define([],function(){return function(k){function f(a){g(a.currentTarget?a.currentTarget:a.srcElement,a)}function h(a){i(a.currentTarget?a.currentTarget:a.srcElement,a)}function g(d,b){d=$(d);if(b.pageX==null&&b.clientX!=null){var c=document.documentElement,e=document.body;b.pageX=b.clientX+(c&&c.scrollLeft||e&&e.scrollLeft||0)-(c&&c.clientLeft||e&&e.clientLeft||0)}a.audio.currentTime=Math.round(a.audio.duration*(b.pageX-d.offset().left)/d.width())}function i(d,b){d=$(d);if(b.pageY==null&&b.clientY!=
null){var c=document.documentElement,e=document.body;b.pageY=b.clientY+(c&&c.scrollTop||e&&e.scrollTop||0)-(c&&c.clientTop||e&&e.clientTop||0)}a.audio.volume=Math.abs((b.pageY-(d.offset().top+d.height()))/d.height())}function j(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60),a=Math.ceil(a%600%60);return(b==0?"":b>0&&b.toString().length<2?"0"+b+":":b+":")+(c.toString().length<2?"0"+c:c)+":"+(a.toString().length<2?"0"+a:a)}var a=this;a.width="auto";a.src=null;a.autoplay=!1;a.preload=!0;a.loop=!1;
a.muted=!1;a.volume=null;a.currentTime=null;a.audio=null;a.isplaying=!1;a.isstop=!1;a.ismuted=!1;a.volumelow=!1;a.currentTime="00.00";a.timeDuration="00.00";a.playedwidth="0";a.volumeheight="100%";a.currentTimeVisible=!0;a.timeDurationVisible=!0;a.onPlay=null;a.onPlaying=null;a.onPause=null;a.onEnded=null;a.onTimeupdate=null;a.onRendered=null;a._init=function(){a.autoplay()==!0&&a.isplaying(!0);a.muted()==!0&&a.ismuted(!0)};a.playpause=function(){a.osplaying()==!0?(a.audio.pause(),a.isplay(!1)):(a.audio.play(),
a.isplaying(!0),a.isstop(!1))};a.stop=function(){a.audio.pause();a.isplaying(!1);a.isstop(!0);a.audio.currentTime=0};a.setmuted=function(){a.audio.muted=!a.audio.muted;a.audio.muted==!0?a.ismuted(!0):a.ismuted(!1)};a.barmousedown=function(a,b){g(a,b);$(a).bind("mousemove",f)};a.barmouseup=function(a){$(a).unbind("mousemove",f)};a.volumemousedown=function(a,b){i(a,b);$(a).bind("mousemove",h)};a.volumemouseup=function(a){$(a).unbind("mousemove",h)};a.onload=function(d){a.audio=$(d).find("audio").get(0);
var b=$(d).children(":first");parseInt(b.width(),10)<180&&a.timeDurationVisible(!1);parseInt(b.width(),10)<150&&a.timeDurationVisible(!1);var b=a.volume(),c=a.currentTime();if(b!=null)a.audio.volume=b;if(c!=null)a.audio.currentTime=c;a.audio.muted=a.muted();b=$(a.audio);b.on("loadeddata",function(){a.timeDuration(j(a.audio.duration));a.volume(a.audio.volume);a.volumeheight(a.audio.volume*100+"%");a.audio.volume*100<50?a.volumelow(!0):a.volumelow(!1)});b.on("play",function(){if(a.onPlay!=null&&cube.isObservable(a.onPlay))a.onPlay()});
b.on("pause",function(){if(a.onPause!=null&&cube.isObservable(a.onPause))a.onPause()});b.on("playing",function(){if(a.onPlaying!=null&&cube.isObservable(a.onPlaying))a.onPlaying()});b.on("timeupdate",function(){a.currentTime(j(a.audio.currentTime));a.playedwidth(a.audio.currentTime/a.audio.duration*100+"%");if(a.onTimeupdate!=null&&cube.isObservable(a.onTimeupdate))a.onTimeupdate(a.audio.currentTime)});b.on("volumechange",function(){a.volumeheight(a.audio.volume*100+"%");a.audio.volume*100<50?a.volumelow(!0):
a.volumelow(!1)});b.on("ended",function(){a.isplaying(!1);a.isstop(!0);if(a.onEnded!=null&&cube.isObservable(a.onEnded))a.onEnded()});if(a.onRendered!=null&&!cube.isObservable(a.onRendered))a.onRendered(d)};cube.endViewModel(a,k)}});