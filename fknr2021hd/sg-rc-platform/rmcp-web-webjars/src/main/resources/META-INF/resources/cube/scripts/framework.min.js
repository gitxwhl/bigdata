if(!Array.prototype.indexOf)Array.prototype.indexOf=function(b,g){var j=this.length>>>0,f=Number(g)||0,f=f<0?Math.ceil(f):Math.floor(f);for(f<0&&(f+=j);f<j;f++)if(f in this&&this[f]===b)return f;return-1};
CUBE=function(){var b=this;b.debugMode=!0;b.oneComponentsmin=!0;b.loadExtComponentsmin=!1;b.syncDebugMode=!0;b.debugLess=!1;b.theme="";b.locale="zh_CN";b.localePath="cube";b.bundleName="";b.name="";b.errorType="normal";b.timeout=6E4;b.ajaxSetupOptions=null;b.ieCorsProxy=!1;b.ieCorsProxyHost="~/corsproxy";b.rootPath=null;b.authorization=null;b.customHeaders=null;b.fileSuffix="html";b.componentDefaultValue={};b.encryptData=null;b.dialogCount=0;b.requirePaths=null;b.init=function(){var a="",c=0,d=document.getElementsByTagName("script");
if(d.length>0)for(var e=0;e<d.length;e++)if(d[e].src&&d[e].src.indexOf("cube/scripts/framework")!=-1){a=d[e].src;c=e;break}a.substring(0,4)!="http"&&(a=d[c].getAttribute("src",4));if(a.substring(a.length-26)=="/cube/scripts/framework.js")b.rootPath=a.substr(0,a.length-26);else if(a.substring(a.length-30)=="/cube/scripts/framework.min.js")b.rootPath=a.substr(0,a.length-30),b.debugMode=!1;c=a="";b.debugMode||(a="min/",c=".min");b.requirePaths={text:"cube/scripts/libs/"+a+"require.text"+c,sammy:"cube/scripts/libs/"+
a+"sammy"+c,bootstrap:"cube/scripts/libs/"+a+"bootstrap"+c,jqprint:"cube/scripts/libs/"+a+"jqprint"+c,entityContainer:"cube/scripts/utils/"+a+"EntityContainer"+c,treeEntityContainer:"cube/scripts/utils/"+a+"TreeEntityContainer"+c,JSONUtil:"cube/scripts/utils/"+a+"JsonUtil"+c,CheckUtil:"cube/scripts/utils/"+a+"CheckUtil"+c,Validator:"cube/scripts/utils/"+a+"Validator"+c,RESTClient:"cube/scripts/utils/"+a+"RESTClient"+c,GUIDUtil:"cube/scripts/utils/"+a+"GUIDUtil"+c,FileUploader:"cube/scripts/utils/"+
a+"FileUploader"+c,PrintUtil:"cube/scripts/utils/"+a+"PrintUtil"+c,ExcelUtil:"cube/scripts/utils/"+a+"ExcelUtil"+c,PermissionUtil:"cube/scripts/utils/"+a+"PermissionUtil"+c,PinyinUtil:"cube/scripts/utils/"+a+"PinyinUtil"+c,cropper:"cube/scripts/libs/cropper.min",cryptocore:"cube/scripts/libs/"+a+"cryptocore"+c,md5:"cube/scripts/libs/"+a+"md5"+c,echarts:"cube/scripts/libs/echarts.min",croppercss:"cube/resources/css/cropper.min.css"};require={baseUrl:b.rootPath,paths:b.requirePaths};b.ieVersion=b.getIEVersion();
b.ieRealVersion=b.getIERealVersion();document.write('<\!--[if IE]<meta http-equiv="X-UA-Compatible" content="IE=edge;" /><![endif]--\>\r\n');typeof $CUBE_THEME!="undefined"&&$CUBE_THEME!=""?(b.theme=$CUBE_THEME,b._includeFrameworkCSS("bootstrap-"+$CUBE_THEME.toLowerCase()+"2.3.2"+c+".css")):b._includeFrameworkCSS("bootstrap2.3.2"+c+".css");b._includeFrameworkCSS("bootstrap-ie6"+c+".css",6);typeof $CUBE_RESPONSIVE!="undefined"&&$CUBE_RESPONSIVE==!0&&(document.write('<meta name="viewport" content="width=device-width, initial-scale=1.0" />\r\n'),
b._includeFrameworkCSS("bootstrap-responsive.css"));b._includeFrameworkCSS("ie"+c+".css",6);b._includeFrameworkCSS("font-awesome"+c+".css");b._includeFrameworkCSS("font-awesome-ie7.min.css",7);typeof $CUBE_THEME!="undefined"&&$CUBE_THEME!=""?b._includeFrameworkCSS("cube-"+$CUBE_THEME.toLowerCase()+c+".css"):b._includeFrameworkCSS("cube"+c+".css");b._includeFrameworkCSS("cropper.min.css");typeof jQuery=="undefined"&&b._includeFrameworkJs("libs/jquery-1.11.1.min.js");b._includeFrameworkJs(b.debugMode?
"libs/json2.js":"libs/min/json2.min.js");b._includeFrameworkJs(b.debugMode?"libs/knockout-3.2.0.js":"libs/min/knockout-3.2.0.min.js");b._includeFrameworkJs(b.debugMode?"libs/knockout.mapping.js":"libs/min/knockout.mapping.min.js");b._includeFrameworkJs(b.debugMode?"libs/knockout.cube.js":"libs/min/knockout.cube.min.js");b._includeFrameworkJs(b.debugMode?"libs/pubsub.js":"libs/min/pubsub.min.js");b._includeFrameworkJs(b.debugMode?"utils/ObjectUtil.js":"utils/min/ObjectUtil.min.js");b.isIE6()&&b._includeFrameworkJs(b.debugMode?
"libs/bootstrap-ie.js":"libs/min/bootstrap-ie.min.js");if(typeof $CUBE_DEBUGLESS!="undefined"&&$CUBE_DEBUGLESS==!0)b.debugLess=$CUBE_DEBUGLESS,b._includeFrameworkLess("custom-bootstrap.less"),b._includeFrameworkLess("custom-cube.less"),b._includeFrameworkJs("libs/less.min.js");document.createElement("section")};b._includeFrameworkCSS=function(a,c){(typeof c=="undefined"||b.ieVersion>0&&b.ieVersion<=c)&&document.write("<link rel='stylesheet' href='"+b.rootPath+"/cube/resources/css/"+a+"'>")};b._includeFrameworkLess=
function(a){document.write("<link rel='stylesheet/less' type='text/css' href='"+b.rootPath+"/cube/resources/css/"+a+"'>")};b._includeFrameworkJs=function(a){document.write("<script type='text/javascript' src='"+b.rootPath+"/cube/scripts/"+a+"'><\/script>")};b.includeMessages=function(a){var c=b.localePath;typeof a!="undefined"&&(c=a);require([b.rootPath+"/"+c+"/resources/locales/"+b.locale+"/messages.js"])};b.msg=function(a,c){var b=cube.messages[a];if(b&&b.indexOf("{")!=-1&&b.indexOf("}")!=-1)if(typeof c==
"string"||typeof c=="number")b=b.replace("{0}",c);else if($.isArray(c)||$.isPlainObject(c))for(var e in c)b=b.replace("{"+e+"}",c[e]);return b};var g=null;b.showError=function(a,c){arguments.length==1&&(c=a,a="\u9519\u8bef\u4fe1\u606f");b.errorType&&b.errorType=="friendly"||(b.errorType&&b.errorType=="console"&&typeof console!="undefined"&&typeof console.error!="undefined"?console.error(a+":"+c):(b.importComponent("dialog.msgdialog"),g!=null&&g.remove(),g=b.bindComponent("msgdialog",{isShowDialog:!0,
title:a,content:c,msgType:"error",zIndex:1070+b.dialogCount*20,__comtype:"msgdialog"})))};b.confirm=function(a,c,d,e){var h=1070+b.dialogCount*20,i=(new Date).getTime();b.importComponent("dialog.msgdialog");g!=null&&g.remove();g=document.createElement("div");g=$(g);$("body").append(g);g.attr("id",i);b.bindComponentByNode(g,{component:{name:"msgdialog",params:{isShowDialog:!0,title:a||" ",content:c,msgType:"confirm",zIndex:h,isShowCancelBtn:e,onConfirmBtnClick:d,eleId:i,__comtype:"msgdialog"}}})};
b.indicate=function(a,c,d,e,h){var i=1070+b.dialogCount*20,k=(new Date).getTime(),f=null;if(typeof a=="object"){f=a;if(typeof f.isShowDialog=="undefined")f.isShowDialog=!0;if(typeof f.showTime=="undefined")f.showTime=a=="confirm"?0:3E3;f.zIndex=i;f.eleId=k;f.__comtype="msgdialog"}else a=="prompt"&&(a="confirm"),["info","warning","error","confirm"].indexOf(a)==-1&&(c=a,a="info"),arguments.length==3&&typeof d!="function"&&(e=d),f={isShowDialog:!0,title:e||" ",content:c,msgType:a,showTime:a=="confirm"?
0:3E3,zIndex:i,isShowCancelBtn:h,onConfirmBtnClick:d,eleId:k,__comtype:"msgdialog"};b.importComponent("dialog.msgdialog");g!=null&&g.remove();g=document.createElement("div");g=$(g);$("body").append(g);g.attr("id",k);b.bindComponentByNode(g,{component:{name:"msgdialog",params:f}})};b.showPopDialog=function(a,c){b.importComponent("dialog.popoverdialog");var d=(new Date).getTime(),e=document.createElement("div"),e=$(e);$("body").append(e);arguments.length==1&&(c=a);c.eleId=d;e.attr("id",d);if(typeof c.isShowDialog==
"undefined")c.isShowDialog=!0;if(typeof c.zIndex=="undefined")c.zIndex=1060+b.dialogCount*20;a instanceof jQuery&&(a=a.get(0));if(a&&a.getBoundingClientRect){var h=c.popoverDirection;h||(h="right");var i=document.body.scrollTop?document.body.scrollTop:document.documentElement.scrollTop,f=document.body.scrollLeft?document.body.scrollLeft:document.documentElement.scrollLeft,d=a.offsetWidth;switch(h){case "top":h=a.getBoundingClientRect().top+i;f=a.getBoundingClientRect().left+f;c.top=h+"px";c.left=
f+"px";c.eleWidth=d;break;case "right":h=a.getBoundingClientRect().top+i;d=a.getBoundingClientRect().right+f;c.top=h-6+"px";c.left=d+"px";break;case "left":h=a.getBoundingClientRect().top+i;d=a.getBoundingClientRect().right+f;f=a.clientWidth;c.top=h-6+"px";c.right=d+f+55+"px";c.left="inherit";break;case "bottom":h=a.getBoundingClientRect().bottom+i,f=a.getBoundingClientRect().left+f,c.top=h+"px",c.left=f+"px",c.eleWidth=d}}else c.isFixed=!0;c.__comtype="popoverdialog";b.bindComponentByNode(e,{component:{name:"popoverdialog",
params:c}});return e};b.showDialog=function(a){b.dialogCount++;b.importComponent("dialog.modaldialog");var c=!1,d=(new Date).getTime(),e=document;if(window.name&&window.name.indexOf("iframe_")==0)try{if(top.document&&top.cube)e=top.document,b.dialogCount+=top.cube.dialogCount}catch(h){c=!0}var i=e.createElement("div"),i=$(i);$("body",e).append(i);typeof a.eleId=="undefined"?a.eleId=d:d=a.eleId;i.attr("id",d);if(typeof a.isShowDialog=="undefined")a.isShowDialog=!0;if(typeof a.zIndex=="undefined")a.zIndex=
1050+b.dialogCount*20;a.__comtype="modaldialog";c?b._showCrosDialog(a):b.bindComponentByNode(i,{component:{name:"modaldialog",params:a}});return i};var j=null;b.showLoading=function(a,c,d){cube.isBoolean(a)&&(d=a,a={});a instanceof jQuery?(cube.isBoolean(c)&&(d=c),c=a,a={}):cube.isEmpty(a)&&(a={});cube.isBoolean(c)&&(d=c,c=null,cube.isObject(a)||(c=a));if(d===!1)j!=null&&j.remove(),c!=null&&(c=$(c),a=c.attr("loadingId"),cube.notEmpty(a)&&(a=c.children("#"+a),a!=null&&a.remove()));else{b.dialogCount++;
b.importComponent("controls.loading");var e=(new Date).getTime(),d=$("<div></div>");d.attr("id",e);if(cube.isEmpty(c)){c=document;if(window.name&&window.name.indexOf("iframe_")==0)try{if(top.document&&top.cube)c=top.document,b.dialogCount+=top.cube.dialogCount}catch(h){}$("body",c).append(d);j=d}else $(c).append(d),$(c).attr("loadingId",e);if(typeof a.isShow=="undefined")a.isShow=!0;if(typeof a.zIndex=="undefined")a.zIndex=1050+b.dialogCount*20;a.__comtype="loading";b.bindComponentByNode(d,{component:{name:"loading",
params:a}});return d}};var f=null;b.showContextmenu=function(a,c){b.importComponent("controls.contextmenu");f!=null&&f.remove();var d=(new Date).getTime(),e=document.createElement("div"),e=$(e);$("body").append(e);f=e;c.eleId=d;e.attr("id",d);if(typeof c.isShowMenu=="undefined")c.isShowMenu=!0;if(typeof c.zIndex=="undefined")c.zIndex=1060+b.dialogCount*20;c.popoverDirection="right";c.top=a.clientY+"px";c.left=a.clientX+"px";c.__comtype="contextmenu";b.bindComponentByNode(e,{component:{name:"contextmenu",
params:c}});return e};b._showCrosDialog=function(a){var c=function(b){var b=b.data,b=JSON.parse(b),c=b.eventType;delete b.eventType;if(typeof a.onCloseBtnClick!="undefined")a.onCloseBtnClick(b);if(c=="onCloseBtnClick"&&typeof a.onCloseBtnClick!="undefined")a.onCloseBtnClick(b);else if(c=="onConfirmBtnClick"&&typeof a.onConfirmBtnClick!="undefined")a.onConfirmBtnClick(b);else if(typeof a.customBtns!="undefined")for(c=0;c<a.customBtns.length;c++)if(b.text==a.customBtns[c].text){a.customBtns[c].click();
break}};window.addEventListener?window.addEventListener("message",c,!1):window.attachEvent("onmessage",c);if(c=a.templateOptions){var d=c.name;if(d.indexOf("http")!=0&&(d=d.split("."),d.length>=3)){var e=d[0]+"/pages/"+d[1]+"/";b.bundleName!=""&&(e=b.bundleName+"/"+e);for(var h=2;h<d.length-1;h++)e+=d[h]+"/";e+=d[d.length-1]}c.name=b.rootPath+"/"+e;c.type="viewModel"}a.__dialog__=!0;top.postMessage(JSON.stringify(a),"*")};b.cubepath=function(a){if(typeof a!="string")return null;a.indexOf("~/")==0?
a=b.rootPath+a.substring(1):a.indexOf("./")==0?a=b.rootPath+"/cube"+a.substring(1):a.indexOf("$/")==0?a=b.rootPath+"/cube/resources"+a.substring(1):a.indexOf("$locale/")==0&&(a=b.rootPath+"/cube/resources/locales/"+b.locale+a.substring(7));return a};b.mappath=function(a){if(typeof a!="string")return null;var c=b.rootPath;c.lastIndexOf("/")!=c.length-1&&(c+="/");var d=c;d+=b.bundleName!=""?b.bundleName+"/":"";return a.indexOf("~/../")==0?c+a.substr(5):a.indexOf("~/")==0?d+a.substr(2):a.indexOf("./")==
0?d+b.name+a.substr(1):a.indexOf("$/")==0?d+b.name+"/resources"+a.substr(1):a.indexOf("$locale/")==0?d+b.name+"/resources/locales/"+b.locale+a.substr(7):b.cubepath(a)};b.random=function(a){var b=(new Date).getTime(),b=(b*9301+49297)%233280;return a==null||parseInt(a)==NaN?Math.ceil(b/233280*1E16):Math.ceil(b/233280*parseInt(a))};b.isSupportHtml5=function(){return window.applicationCache?!0:!1};b.isIE6=function(){return navigator.userAgent.toLowerCase().indexOf("msie 6.0")>-1};b.getIEVersion=function(){var a=
-1;navigator.appName=="Microsoft Internet Explorer"?/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent)!=null&&(a=parseFloat(RegExp.$1)):/Trident\/7\./.test(navigator.userAgent)&&(a=11);return a};b.getIERealVersion=function(){return document&&function(){for(var a=3,b=document.createElement("div");b.innerHTML="<\!--[if gt IE "+ ++a+"]><i></i><![endif]--\>",iElems=b.getElementsByTagName("i"),iElems[0];);return a>4?a:-1}()};b.importedComponents=[];b.loadedPagePartVVM=[];b.compWritable=function(a){return ko.pureComputed(a)};
b.notPureCompWritable=function(a){return ko.computed(a)};b.comp=function(a,b){return ko.pureComputed(a,b)};b.notPureComp=function(a,b){return ko.computed(a,b)};b.obj=function(a){if(typeof a=="function")return a;return ko.observable(a)};b.isObservable=function(a){return ko.isObservable(a)};b.array=function(a){if(typeof a=="function")return a;return ko.observableArray(a)};b.subscribe=function(a,b,d,e){if(a&&typeof a=="function"&&typeof a.subscribe=="function")return a.subscribe(b,d,e);return null};
b.notifySubscribers=function(a,b,d){if(a&&typeof a=="function"&&typeof a.notifySubscribers=="function")return a.notifySubscribers(b,d);return null};b.startWebPage=function(a){b.includeMessages();!b.debugMode&&b.oneComponentsmin?(b.loadExtComponentsmin&&(require([b.rootPath+"/cube/components/components.ext.js"]),require(["text!cube/components/components.ext.html"],function(a){b.templateext=$(a)})),require([b.rootPath+"/cube/components/components.min.js"]),require(["text!cube/components/components.min.html"],
function(c){b.template=$(c);ko.applyBindings(a)})):ko.applyBindings(a);b._setAjax();b._setAllowCrosDialog()};b.importComponent=function(a){b.debugMode&&typeof console!="undefined"&&typeof console.log!="undefined"&&console.log("\u52a0\u8f7d\u7ec4\u4ef6\uff1a"+a);if(a!=null){var c=a.split(".");if(c.length==2)if(a=c[0],c=c[1],b.importedComponents.indexOf(c)<0)try{b.debugMode||!b.oneComponentsmin?ko.components.register(c,{viewModel:{require:b.rootPath+"/cube/components/"+a+"/"+c+"/"+c+(b.debugMode?"":
".min")+".js"},template:{require:"text!"+b.rootPath+"/cube/components/"+a+"/"+c+"/"+c+".html"}}):ko.components.register(c,{viewModel:{require:c},template:{id:c}}),b.importedComponents.push(c)}catch(d){alert(d)}else b.debugMode&&typeof console!="undefined"&&typeof console.log!="undefined"&&console.log("\u7ec4\u4ef6"+c+"\u5df2\u7ecf\u6ce8\u518c\u3002");else alert("\u7ec4\u4ef6\u53c2\u6570\u9519\u8bef\uff1a"+a)}};b.loadSubWebPageVVM=function(a){var c={};b.debugMode&&typeof console!="undefined"&&typeof console.log!=
"undefined"&&console.log("\u52a0\u8f7dvvm\uff1a"+a);if(a!=null){if(b.loadedPagePartVVM.indexOf(a)<0)if(a.indexOf("http")==0)c={viewModel:{require:a+"viewmodel."+(!b.debugMode&&b.syncDebugMode?"min.":"")+"js"},template:{require:"text!"+a+"view."+b.fileSuffix}},ko.components.register(a,c),b.loadedPagePartVVM.push(a);else{var d=a.split(".");if(d.length>=3){c=d[0]+"/pages/"+d[1]+"/";b.bundleName!=""&&(c=b.bundleName+"/"+c);for(var e=2;e<d.length-1;e++)c+=d[e]+"/";c+=d[d.length-1];c={viewModel:{require:b.rootPath+
"/"+c+"viewmodel."+(!b.debugMode&&b.syncDebugMode?"min.":"")+"js"},template:{require:"text!"+b.rootPath+"/"+c+"view."+b.fileSuffix}};ko.components.register(a,c);b.loadedPagePartVVM.push(a)}else alert("\u5b57\u7b26\u4e32\u9519\u8bef\uff1a"+a)}else b.debugMode&&typeof console!="undefined"&&typeof console.log!="undefined"&&console.log("webpage vvm: "+a+"\u5df2\u7ecf\u6ce8\u518c\u3002");return c}};b.initComponentProperty=function(a,b,d){d==null&&(d="obj");if(d=="obj")return typeof a=="function"?a:a!=
null?cube.obj(a):cube.obj(b);else if(d=="arr")return typeof a=="function"?a:a!=null?cube.array(a):cube.array(b);return null};b.getPageViewModelByNode=function(a){if(a=a instanceof jQuery?a.children().get(0):a.childNodes[0])return ko.dataFor(a);return null};b.bindSubWebPageVVM=function(a,b,d){!a instanceof jQuery&&(a=$(a));b&&a.attr("data-bind","component: {name : '"+b+"',params:"+(d?ko.toJSON(d):"{}")+"}");ko.applyBindingsToNode(a[0])};b.bindComponentByNode=function(a,b){!a instanceof jQuery?ko.applyBindingsToNode(a,
b):ko.applyBindingsToNode(a[0],b)};b.bindTemlate=function(a,b){a instanceof jQuery&&(a=a.get(0));ko.applyBindingsToNode(a,null,b)};b.bindComponent=function(a,b){var d=document.createElement(a),d=$(d);$("body").append(d);var e=(new Date).getTime();b.eleId=e;d.attr("id",e);d.attr("params",ko.toJSON(b));ko.applyBindingsToNode(d[0]);return d};b.applyBindings=function(a,b){a instanceof jQuery&&(a=a.get(0));a&&ko.applyBindings(b,a)};b.loadWebpage=function(a){var b=a.vvms==null?[]:a.vvms;$.each(a.components==
null?[]:a.components,function(){cube.importComponent(this.toString())});$.each(b,function(){cube.loadSubWebPageVVM(this.toString())})};b._setAjax=function(){requirejs.config({config:{text:{useXhr:function(){return!0}}}});if(b.ajaxSetupOptions==null)b.ajaxSetupOptions={global:!0,complete:function(a){var b=a.getResponseHeader("sessionstate"),d=a.getResponseHeader("redirecturl");if(b!=null&&b=="timeout"||a.responseText=="timeout")if(cube.indicate("info",cube.msg("SESSION_TIMEOUT")),d!=null){if(d=encodeURI(d),
d=d.replace("&","&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/javascript/gi,""),!d.toLowerCase().indexOf("http://")&&!d.toLowerCase().indexOf("https://"))top.window.location.href=d}else top.window.location.reload();else a.responseText=="authorizeFail"&&cube.indicate("warning",cube.msg("OPERATION_NOT_ALLOWED"))}};$.ajaxSetup(b.ajaxSetupOptions);$.ajaxPrefilter(function(a){var c=b.getIEVersion();if(b.ieCorsProxy&&c>-1&&c<=9&&b.crosDomain(a.url)){var d=
a.url,e=a.beforeSend;a.beforeSend=function(a,b){typeof e=="function"&&e(a,b);a.setRequestHeader("X-CorsProxy-Url",d)};a.url=b.mappath(b.ieCorsProxyHost);a.crossDomain=!1}})};b._setAllowCrosDialog=function(){var a=function(a){var d=a.source,a=a.data,a=JSON.parse(a);if(typeof a.__dialog__!="undefined"){a.onCloseBtnClick=function(a){a.eventType="onCloseBtnClick";d.postMessage(JSON.stringify(a),"*")};a.onConfirmBtnClick=function(a){a.eventType="onConfirmBtnClick";d.postMessage(JSON.stringify(a),"*")};
if(typeof a.customBtns!="undefined")for(var e=0;e<a.customBtns.length;e++)a.customBtns[e].click=function(a){d.postMessage(JSON.stringify(a),"*")};b.showDialog(a)}};window.addEventListener?window.addEventListener("message",a,!1):window.attachEvent("onmessage",a)};b.interactToServer=function(a,b,d,e,h,f){var g=a!=null?a:"",a=b!=null?b.toUpperCase():"GET",b=!0;e!=null&&(b=e);var j=h==null?!1:h,d={url:g,timeout:6E4,type:a,contentType:"application/json",dataType:"json",cache:!1,async:b,data:j?ko.toJSON(d):
d,success:function(a){$.isFunction(f)&&(j&&(a=ko.mapping.fromJS(a),delete a.__ko_mapping__),f(a))},error:function(a){if($.isFunction(f))a=Error(a.responseText),a.url=g,f({successful:!1,error:a})}};return $.ajax(d)};b.publishTopic=function(a,b){return PubSub.publish(a,b)};b.publishTopicSync=function(a,b){return PubSub.publishSync(a,b)};b.subscribeTopic=function(a,b,d){return PubSub.subscribe(a,b,d)};b.unsubscribeTopic=function(a){return PubSub.unsubscribe(a)};b.clearAllSubscribeTopic=function(){PubSub.clearAllSubscriptions()};
b.clearSubscribeTopic=function(a){PubSub.clearSubscriptions(a)};b.clearComponentCached=function(a){if(cube.notEmpty(a)){var c="",d="";if(b.importedComponents.indexOf(a)!=-1){var e=a.split(".");e.length==2&&(d=e[0],e=e[1],c=b.rootPath+"/cube/components/"+d+"/"+e+"/"+e+(b.debugMode?"":".min")+".js",d="text!"+b.rootPath+"/cube/components/"+d+"/"+e+"/"+e+".html")}else if(a.indexOf("http")==0)c=p_vvm+"viewmodel."+(!b.debugMode&&b.syncDebugMode?"min.":"")+"js",d="text!"+p_vvm+"view."+b.fileSuffix;else if(e=
a.split("."),e.length>=3){d=e[0]+"/pages/"+e[1]+"/";b.bundleName!=""&&(d=b.bundleName+"/"+d);for(c=2;c<e.length-1;c++)d+=e[c]+"/";d+=e[e.length-1];c=b.rootPath+"/"+d+"viewmodel."+(!b.debugMode&&b.syncDebugMode?"min.":"")+"js";d="text!"+b.rootPath+"/"+d+"view."+b.fileSuffix}c&&requirejs.undef(c);d&&requirejs.undef(d);ko.components.clearCachedDefinition(a)}};b.cleanNode=function(a){a instanceof jQuery&&(a=a.get(0));ko.cleanNode(a)};b.endViewModel=function(a,c){if(!cube.isEmpty(a)){cube.isEmpty(c)&&
(c={});var d=b.componentDefaultValue[c.__tagName]||{},e;for(e in a){var f;f=c[e];var i=a[e];typeof d[e]!="undefined"&&(i=d[e]);typeof i==="function"&&typeof d[e]=="undefined"||(f=typeof f!="undefined"?f:i,f instanceof Array?f=b.array(f):typeof f!="undefined"&&typeof f!=="function"&&(f=b.obj(f)),a[e]=f)}if(typeof a._init==="function"&&c._lazyInit!==!0)a._init(),a._initialized=!0}};b.crosDomain=function(a){if(typeof a=="undefined"||!a||a.indexOf("http://")==-1&&a.indexOf("https://")==-1)return!1;if((a=
a.match(/((http|https):\/\/[^\/]+)\//i))&&a.length>1&&a[1]==window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))return!1;return!0};b.getUrlParams=function(){var a=null,b=location.href;if(b.indexOf("?")!=-1&&(b=b.split("?")[1],b.toLowerCase().indexOf("params")!=-1))for(var b=b.split("&"),d=0;d<b.length;d++){var e=b[d].split("=");if(cube.trim(e[0]).toLowerCase()=="params"){try{if(a=JSON.parse(cube.trim(e[1]).replace(/%22/g,'"')),a.dialog)a.__iframe=
!0,b=function(a){a=a.data;a=JSON.parse(a);typeof a.__result__!="undefined"&&cube.notEmpty(cube.__params)&&cube.notEmpty(cube.__params.dialog)&&(result=cube.isFunction(cube.__params.dialog.result)?cube.__params.dialog.result():cube.__params.dialog.result,top.postMessage(JSON.stringify(result),"*"))},window.addEventListener?window.addEventListener("message",b,!1):window.attachEvent("onmessage",b)}catch(f){}break}}return a}};cube=new CUBE;cube.init();