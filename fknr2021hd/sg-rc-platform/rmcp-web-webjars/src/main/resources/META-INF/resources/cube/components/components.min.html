<div id="accordion"><div class="cube accordion"  data-bind="foreach: panels">
	<div class="accordion-group" >
		<div class="accordion-heading" style="padding:1px; background-color: #eeeeee;">
			<span class="accordion-toggle"
				data-bind="click: $parent.setSelectedPanel, text: title"></span>
		</div>
		<div class="accordion-body collapse" style="height: auto;"
			data-bind="style:{height: (!$parent.isEnabledDrawer()?route == $parent.selectedPanelRoute():expanded()) ? 'auto':0,
				'display': (!$parent.isEnabledDrawer()?route == $parent.selectedPanelRoute():expanded())? 'block':'none'}">
			<!-- ko if: $parent.isLazyRender() && !$parent.isEnabledDrawer() -->
				<div class="accordion-inner"></div>
			<!-- /ko -->
			<!-- ko if: !$parent.isLazyRender() || $parent.isEnabledDrawer() -->
				<!-- ko if: typeof($data.content)!="undefined" -->
					<div class="accordion-inner" data-bind="html: $data.content"></div>
				<!-- /ko -->
				<!-- ko if: typeof($data.content)=="undefined" && typeof(templateOptions)!="undefined"-->
					<div class="accordion-inner" data-bind="component: templateOptions"></div>
				<!-- /ko -->
			<!-- /ko -->
		</div>
	</div>
</div></div>
<div id="hsplit"><div class="cube row-fluid" data-bind="style:{height: height,width: width},foreach: { data: contents, as: 'item' }">
	<div class="row-fluid hsplit-item"
		data-bind="style:{display:display,height:height}">
		<!-- ko if: typeof(item.content)!="undefined" -->
		<div data-bind="html: item.content"></div>
		<!-- /ko -->

		<!-- ko if: typeof(item.content)=="undefined" && typeof(templateOptions)!="undefined"-->
			<!-- ko if: isOut -->
				<!-- ko if: templateOptions.type == "ajax" -->
					<div data-bind="html: ajaxHtml"></div>
				<!-- /ko --> 
				<!-- ko if: templateOptions.type == "iframe" -->
					<iframe name="iframe_hsplit" style="width:100%;" frameborder=0 data-bind="style:{height:templateOptions.iframeHeight},attr:{src:templateOptions.name}"></iframe>
				<!-- /ko --> 
			<!-- /ko --> 
			<!-- ko ifnot: isOut -->
			<div data-bind="component: templateOptions"></div>
			<!-- /ko -->
		<!-- /ko -->
	</div>
	<!-- ko if: $index()<$parent.contents().length-1 -->
	<div class="hsplit-splitter" id="hSplitter"
		data-bind="visible:$parent.resizable, event:{mousedown:function(data, event){$parent.mousedown($index, data, event)},mouseup:$parent.mouseup}">
		<div id="topSpiltterBtn"
			data-bind="attr:{title: cube.msg('HIDE')},click:function() { $parent.setPanel($index)},css:splitClass,style:{background:$parent.btnbgcolor()}">
				<span class="caret" ></span>
			</div>
	</div>
	<!-- /ko -->
</div></div>
<div id="panelcontainer"><div class="cube accordion panel" data-bind="style:{width:width(),marginBottom:marginBottom()}">
    <div class="accordion-group" >
        <div class="accordion-heading" data-bind="style:{padding:1,background:bgcolor(),height:titleheight()}">
            <span class="accordion-toggle" data-bind="visible:visible,text:title,style:{height:titleheight(),lineHeight:titleheight()}"></span>
	        <div class="custombtns" data-bind="style:{height:titleheight(),lineHeight:titleheight()}">
			<!-- ko foreach: customBtns -->
				<div  data-bind="attr:{'class':'panelBtns btn'}, 
				style:{
				color:typeof(btnColor)!='undefined'?btnColor:null,
				backgroundImage:typeof(backgroundImage)!='undefined'?backgroundImage:null,
				backgroundColor:typeof(backgroundColor)!='undefined'?backgroundColor:null,
				}, 
				visible: typeof(visible)!='undefined'?visible:true, click: $parent.customClick, clickBubble: false">
				<span data-bind="attr:{'class':'icon-'+(typeof(btnIcon)!='undefined'?btnIcon:'default')}"></span>
				<span data-bind="text:text"></span>
				</div>
	        <!-- /ko -->
			</div>
        </div>
        <div class="accordion-body collapse" data-bind="style:{height:height()}">
			<!-- ko if: isOut && content()=="" && templateOptions()!=null && templateOptions().type == "iframe" -->
				<iframe name="iframe_panel" style="width:100%;" frameborder=0 data-bind="style:{height:templateOptions().iframeHeight},attr:{src:templateOptions().name}"></iframe>
			<!-- /ko --> 
			<!-- ko if: templateOptions()==null || templateOptions().type != "iframe" -->
            <div class="accordion-inner">
               <!-- ko if: content()!="" -->
                <div class="panel-content" data-bind="html:content"></div>
                <!-- /ko -->
               <!-- ko if: content()=="" && templateOptions()!=null-->
	               <!-- ko if: isOut -->
						<!-- ko if: templateOptions().type == "ajax" -->
							<div class="panel-content" data-bind="html: ajaxHtml"></div>
						<!-- /ko --> 
					<!-- /ko --> 
					<!-- ko ifnot: isOut -->
					 <div class="panel-content" data-bind="component: templateOptions"></div>
					<!-- /ko -->
                <!-- /ko -->
            </div>
			<!-- /ko --> 
        </div>
    </div>
</div></div>
<div id="tabcontainer"><!-- ko if: tabLayout() == "top" -->
	<div class="tabsheader" data-bind="css:{'tabLineFeed': isTabLineFeed()}">
		<!-- ko if: _showBtn -->
		<span class="prev icon-chevron-left" data-bind="click: function(){prev($element)}"></span>
		<!-- /ko -->
		<div class="scrollborder" data-bind="event:{contextmenu:function(event){event.preventDefault}}">
			<div class="scroll">
				<ul class="cube nav nav-tabs" data-bind="foreach: tabContents, css:{'tab': type() == 'tab'}">
					<li data-bind="css:{'active':  $parent.selectedTabRoute() == route , 'isLocked': (typeof(isLocked)!='undefined' && isLocked() == true)}, event:{contextmenu:function(data, event){$parent.showTabCloseDialog($index,data, event)}}">
						<!-- ko if: isLocked -->
						<span class="lockedIcon icon-lock"></span>
						<!-- /ko -->
						<a href="#" data-bind="click: $parent.showTabContent, text: title,attr:{href: route}"></a>
						<span class="icon-remove" data-bind="click: $parent.hiddenTab"></span>
					</li>
				</ul>
			</div>
		</div>
		<!-- ko if: _showBtn -->
		<span class="next icon-chevron-right" data-bind="click: function(){next($element)}"></span>
		<!-- /ko -->
	</div>

	<!-- ko ifnot: reusable -->
		<!-- ko if: selectedTab() && typeof(selectedTab().content)!="undefined" -->
			<div class="cube tab-content" data-bind="html: selectedTab().content"></div>
		<!-- /ko -->
		<!-- ko if: selectedTab() && typeof(selectedTab().content)=="undefined" && typeof(selectedTab().templateOptions)!="undefined"-->
			<!-- ko if: selectedTab().isOut -->
				<!-- ko if: selectedTab().templateOptions.type == "ajax" -->
					<div class="cube tab-content" data-bind="html: ajaxHtml"></div>
				<!-- /ko --> 
				<!-- ko if: selectedTab().templateOptions.type == "iframe" -->
					<div class="cube tab-content">
						<iframe name="iframe_tab" style="width:100%;" frameborder=0 data-bind="event:{load: iframeLoad},style:{height:selectedTab().templateOptions.iframeHeight},attr:{src:selectedTab().templateOptions.name}"></iframe>
					</div>
				<!-- /ko --> 
			<!-- /ko --> 
			<!-- ko ifnot: selectedTab().isOut -->
				<div class="cube tab-content" data-bind="component: selectedTab().templateOptions"></div>
			<!-- /ko -->
		<!-- /ko -->
	<!-- /ko -->
	<!-- ko if: reusable -->
		<!-- ko foreach: { data: tabContents, as: 'item' }-->
			<div data-bind="visible: $parent.selectedTab() == item">
				<!-- ko if: typeof(item.content)!="undefined" -->
					<div class="cube tab-content" data-bind="html: item.content"></div>
				<!-- /ko -->
				<!-- ko if: typeof(item.content)=="undefined" && typeof(item.templateOptions)!="undefined"-->
					<!-- ko if: item.isOut -->
						<!-- ko if: item.templateOptions.type == "ajax" -->
							<div class="cube tab-content" data-bind="html: item.ajaxHtml"></div>
						<!-- /ko --> 
						<!-- ko if: item.templateOptions.type == "iframe" -->
							<div class="cube tab-content">
								<iframe name="iframe_tab" style="width:100%;" frameborder=0 data-bind="event:{load: $parent.iframeLoad},style:{height:item.templateOptions.iframeHeight},attr:{src:item.templateOptions.name}"></iframe>
							</div>
						<!-- /ko --> 
					<!-- /ko --> 
					<!-- ko ifnot: item.isOut -->
						<div class="cube tab-content" data-bind="component: item.templateOptions"></div>
					<!-- /ko -->
				<!-- /ko -->
			</div>
		<!-- /ko -->
	<!-- /ko -->
<!-- /ko -->

<!-- ko if: tabLayout() == "main" -->
	<div class="tabsheader-left">
		<!-- ko if: _showBtn -->
		<span class="prev-left icon-chevron-up" data-bind="click: function(){prevLeft($element)}"></span>
		<!-- /ko -->
		<div class="scrollborder-left">
			<div class="scroll-left" data-bind="style:{ height: tabLeftHeight()}">
				<ul class="cube nav nav-tabs-left" data-bind="foreach: tabContents, css:{'tab': type() == 'tab'}">
					<li data-bind="css:{'active':  $parent.selectedTabRoute() == route} ">
						<a href="#" data-bind="click: $parent.showTabContent, text: title,attr:{href: route}"></a>
						<span class="icon-remove" data-bind="click: $parent.hiddenTab"></span>
					</li>
				</ul>
			</div>
		</div>
		<!-- ko if: _showBtn -->
		<span class="next-left icon-chevron-down" data-bind="click: function(){nextLeft($element)}"></span>
		<!-- /ko -->
	</div>
	
	<!-- ko ifnot: reusable -->
		<!-- ko if: selectedTab() && typeof(selectedTab().content)!="undefined" -->
		<div class="cube tab-content-left" data-bind="html: selectedTab().content,style:{ height: tabLeftHeight()}"></div>
		<!-- /ko -->
		<!-- ko if: selectedTab() && typeof(selectedTab().content)=="undefined" && typeof(selectedTab().templateOptions)!="undefined"-->
			<!-- ko if: selectedTab().isOut -->
				<!-- ko if: selectedTab().templateOptions.type == "ajax" -->
					<div class="cube tab-content" data-bind="html: ajaxHtml, style:{ height: tabLeftHeight()}"></div>
				<!-- /ko --> 
				<!-- ko if: selectedTab().templateOptions.type == "iframe" -->
					<div class="cube tab-content" data-bind="style:{ height: tabLeftHeight()}">
						<iframe name="iframe_tab" style="width:100%;" frameborder=0 data-bind="event:{load: iframeLoad},style:{height:selectedTab().templateOptions.iframeHeight}, attr:{src:selectedTab().templateOptions.name}"></iframe>
					</div>
				<!-- /ko --> 
			<!-- /ko --> 
			<!-- ko ifnot: selectedTab().isOut -->
				<div class="cube tab-content-left" data-bind="component: selectedTab().templateOptions,style:{ height: tabLeftHeight()}"></div>
			<!-- /ko -->
		<!-- /ko -->
	<!-- /ko -->
	<!-- ko if: reusable -->
		<!-- ko foreach: { data: tabContents, as: 'item' }-->
			<div data-bind="visible: $parent.selectedTab() == item">
				<!-- ko if: typeof(item.content)!="undefined" -->
				<div class="cube tab-content-left" data-bind="html: item.content,style:{ height: $parent.tabLeftHeight()}"></div>
				<!-- /ko -->
				<!-- ko if: typeof(item.content)=="undefined" && typeof(item.templateOptions)!="undefined"-->
					<!-- ko if: item.isOut -->
						<!-- ko if: item.templateOptions.type == "ajax" -->
							<div class="cube tab-content" data-bind="html: item.ajaxHtml, style:{ height: $parent.tabLeftHeight()}"></div>
						<!-- /ko --> 
						<!-- ko if: item.templateOptions.type == "iframe" -->
							<div class="cube tab-content" data-bind="style:{ height: $parent.tabLeftHeight()}">
								<iframe name="iframe_tab" style="width:100%;" frameborder=0 data-bind="event:{load: $parent.iframeLoad},style:{height:item.templateOptions.iframeHeight}, attr:{src:item.templateOptions.name}"></iframe>
							</div>
						<!-- /ko --> 
					<!-- /ko --> 
					<!-- ko ifnot: item.isOut -->
						<div class="cube tab-content-left" data-bind="component: item.templateOptions,style:{ height: $parent.tabLeftHeight()}"></div>
					<!-- /ko -->
				<!-- /ko -->
			</div>
		<!-- /ko -->
	<!-- /ko -->
<!-- /ko -->

<ul class="tabCloseDialog dropdown-menu" data-bind="style:{display: isShowCloseTab()?'block':'none'},
       hasFocus: closeTabFocus,
     		event:{mouseover: mouseoverPopoverDialog, mousedown: mousedownInnerPopoverDialog, mouseleave: hiddenPopoverDialog}">
	<li>
		<a href="#" data-bind="text: _tabLockedText(),click: tabLockedThis"></a>
	</li>
	<li>
		<a href="#" data-bind="text: cube.msg('CLOSE'),click: tabCloseThis"></a>
	</li>
	<li>
		<a href="#" data-bind="text: cube.msg('CLOSEOTHERS'),click: tabCloseOthers"></a>
	</li>
	<li>
		<a href="#" data-bind="text: cube.msg('CLOSEALL'),click: tabCloseAll"></a> 
	</li>
	<li>
		<a href="#" data-bind="text: cube.msg('CANCEL'),click:tabCancelClose"></a> 
	</li>
</ul></div>
<div id="vsplit"><div class="cube row-fluid"
	data-bind="style:{height: height,width: width},foreach: { data: contents, as: 'item' }">
	<div class="split-body" data-bind="css:{'vsplit-item':$index()<$parent.contents().length-1,'vsplit-item-last':$index()==$parent.contents().length-1},
					style:{display:display,width:width}">
		<!-- ko if: typeof(item.content)!="undefined" -->
		<div data-bind="html: item.content"></div>
		<!-- /ko -->

		<!-- ko if: typeof(item.content)=="undefined" && typeof(templateOptions)!="undefined"-->
		<!-- ko if: isOut -->
				<!-- ko if: templateOptions.type == "ajax" -->
					<div data-bind="html: ajaxHtml"></div>
				<!-- /ko --> 
				<!-- ko if: templateOptions.type == "iframe" -->
					<iframe name="iframe_vsplit" style="width:100%;" frameborder=0 data-bind="style:{height:templateOptions.iframeHeight},attr:{src:templateOptions.name}"></iframe>
				<!-- /ko --> 
			<!-- /ko --> 
			<!-- ko ifnot: isOut -->
			<div data-bind="component: templateOptions"></div>
			<!-- /ko -->
		<!-- /ko -->
	</div>
	<!-- ko if: $index()<$parent.contents().length-1 -->
	<div class="vsplit-splitter" id="vSplitter"
		data-bind="visible:$parent.resizable, event:{mousedown:function(data, event){$parent.mousedown($index,data, event)},mouseup:$parent.mouseup}">
		<div class = "vsplit-middle">
			<div id="topSpiltterBtn"
				data-bind="attr:{title: cube.msg('HIDE')},click:function() { $parent.setPanel($index)},css:splitClass,style:{background:$parent.btnbgcolor()}">
					<span class="caret" ></span>
				</div>
		</div>
	</div>
	<!-- /ko -->
</div></div>
<div id="breadcrumb"><span data-bind='attr:{"class":"icon icon-"+icon()}'></span>
<ul class="cube breadcrumb" data-bind="foreach: items">
  <li data-bind="css:{'active': route==$parent.selectedRoute()}">
  <!-- ko ifnot:route==$parent.selectedRoute() -->
  	<a href="#" data-bind="text: text,click: $parent.setSelectRoute, attr:{href: route}"></a>
	<span class="divider" data-bind="text: $parent.splitTxt">
  	</span>
  <!-- /ko -->
  <!-- ko if:route==$parent.selectedRoute()-->
  	<!-- ko text: text --><!-- /ko -->
  <!-- /ko -->
  </li>
</ul></div>
<div id="calendar"><div class="cube calendar">
	<!-- ko if: showCalendar()==1 -->
		<div class="calendar-top">
			<table>
				<tr>
					<td data-bind="click:showPre" class="calendar-caption calendar-arrow">
						<div>
	                        	<span class="icon-chevron-left" aria-hidden="false"></span>
	                    </div>
					</td>
					<td data-bind="click: changeShowState ,css:{'calendar-caption' : showMonthPicker()}">
						<div data-bind="text: titleText"></div>
					</td>
					<td data-bind="click:showNext" class="calendar-caption calendar-arrow">
						<div>
						<span class="icon-chevron-right" aria-hidden="false"></span></div>
					</td>
				</tr>
			</table>
		</div>
		<table>
			<tr data-bind="if: showState()==0 && showDayPicker() && !showQuarterPicker()">
				<td>
					<table class="calendar-weekday">
						<tr data-bind="foreach:isWest()?westWeekDays():weekDays()">
							<td>
								<div data-bind="text: $data"></div>
							</td>
						</tr>
					</table>
				</td>
			</tr>
			<!-- ko if: showState()==0 && showDayPicker() && !showQuarterPicker() -->
			<tr>
				<td class="calendar-cell calendar-cell-day">
					 <table>
						<tbody data-bind="foreach: DateItems">
							<tr data-bind="foreach: $data">
								<td data-bind="click: selectDay,event:{dblclick: selectDayAndClose,mouseover: showHover,mouseout: hiddenHover},text: day, css:{'calendar-cell-othermonth':monthInd()!=0,'calendar-cell-selected':isSelect,'calendar-cell-hover':isHover,'calendar-cell-disable':disable}">
								</td>
							</tr>
						</tbody>
					</table>
				</td>
			</tr>
			<!-- /ko -->
			
			<!-- ko if: showState()==1  && showMonthPicker() && !showQuarterPicker()-->
			<tr>
				<td class="calendar-cell calendar-cell-other">
					 <table>
						<tbody data-bind="foreach: MonthItems">
							<tr data-bind="foreach: $data">
								<td data-bind="click: selectMonth,event:{mouseover: showHover,mouseout: hiddenHover},text: monthName, css:{'calendar-cell-selected':isSelect,'calendar-cell-hover':isHover}">
								</td>
							</tr>
						</tbody>
					</table>
				</td>
			</tr>
			<!-- /ko -->
			
			<!-- ko if:  showState()==3 && showQuarterPicker()-->
			<tr>
				<td class="calendar-cell calendar-cell-other">
					 <table>
						<tbody data-bind="foreach: QuarterItems">
							<tr data-bind="foreach: $data">
								<td data-bind="click: selectQuarter,event:{mouseover: showHover,mouseout: hiddenHover},text: quarterName, css:{'calendar-cell-selected':isSelect,'calendar-cell-hover':isHover}">
								</td>
							</tr>
						</tbody>
					</table>
				</td>
			</tr>
			<!-- /ko -->
			
			<!-- ko if: showState()==2 -->
			<tr>
				<td class="calendar-cell calendar-cell-other">
					 <table>
						<tbody data-bind="foreach: YearItems">
							<tr data-bind="foreach: $data">
								<td data-bind="click: selectYear,event:{mouseover: showHover,mouseout: hiddenHover},text: yearName, css:{'calendar-cell-selected':isSelect,'calendar-cell-hover':isHover}">
								</td>
							</tr>
						</tbody>
					</table>
				</td>
			</tr>
			<!-- /ko -->
		</table>
	<!-- /ko -->
	
	
	<!-- ko if: showCalendar()==0 -->
		<!-- ko if: timePickType()==1 -->
		<div class="calendar-cell calendar-cell-time">
			 <table>
				<tbody data-bind="foreach: HourItems">
					<tr data-bind="foreach: $data">
						<td data-bind="click: selectHour,event:{mouseover: showHover,mouseout: hiddenHover},text: hourName, css:{'calendar-cell-selected':isSelect,'calendar-cell-hover':isHover}">
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	    <!-- /ko -->
	    <!-- ko if: timePickType()==2 -->
		<div class="calendar-cell calendar-cell-time">
			 <table>
				<tbody data-bind="foreach: MinuteItems">
					<tr data-bind="foreach: $data">
						<td data-bind="click: selectMinute,event:{mouseover: showHover,mouseout: hiddenHover},text: minuteName, css:{'calendar-cell-selected':isSelect,'calendar-cell-hover':isHover}">
						</td>
					</tr>
				</tbody>
			</table>
		</div>
	    <!-- /ko -->
	    <!-- ko if: timePickType()==3 -->
		<div class="calendar-cell calendar-cell-time">
			 <table>
				<tbody data-bind="foreach: MinuteItems">
					<tr data-bind="foreach: $data">
						<td data-bind="click: selectSecond,event:{mouseover: showHover,mouseout: hiddenHover},text: minuteName, css:{'calendar-cell-selected':isSelect,'calendar-cell-hover':isHover}">
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- /ko -->
    <!-- /ko -->
   
	<div class="calendar-time">
			<!-- ko if:showTimePicker() -->
			<table>
				<tr>
					<td><div data-bind="click: onHourClick, text: hour"></div></td>
					<td>
							<span data-bind="click: hourUp" class="icon-chevron-up" aria-hidden="false"></span>
							<span data-bind="click: hourDown" class="icon-chevron-down" aria-hidden="false"></span>
					</td>
					<td>:</td>
					<td><div data-bind="click: onMinuteClick, text: minute"></div></td>
					<td>
							<span data-bind="click: minuteUp" class="icon-chevron-up" aria-hidden="false"></span>
							<span data-bind="click: minuteDown" class="icon-chevron-down" aria-hidden="false"></span>
					</td>
					<td>:</td>
					<td><div data-bind="click: onSecondClick, text: second"></div></td>
					<td>
							<span data-bind="click: secondUp" class="icon-chevron-up" aria-hidden="false"></span>
							<span data-bind="click: secondDown" class="icon-chevron-down" aria-hidden="false"></span>
					</td>
					<td><div></div></td>
					<td><span></span></td>
				</tr>
			</table>
			<!-- /ko -->
	</div>
</div></div>
<div id="carousel"><div class="cube carousel slide" data-bind='attr:{"style": style,"id": id},css:{imgfull:showImgFull}'>
    <ol class="carousel-indicators" data-bind="foreach: imgItems">
      <li data-bind='attr:{"class": ($parent.currentImgIndex()==num?"active":""),"data-slide-to": (num-1),"data-target": "#"+$parent.id()}'></li>
    </ol>  
    <div class="carousel-inner" data-bind="foreach: imgItems">
      <div class="item" data-bind='attr:{"class": "item " + ($parent.currentImgIndex()==num?"active ":""), "num": num}'>
        <img data-bind="attr:{'src': imgSrc,'alt': title}"/>
        <!-- ko if:$parent.showCaption() -->
        <div class="carousel-caption">
          <h4 data-bind="text: title"></h4>
          <p data-bind="text: content"></p>
        </div>
        <!-- /ko -->
        <!-- ko if: typeof(innerhtml)!="undefined" -->
        <div data-bind="html: innerhtml"></div>
        <!-- /ko -->
      </div>
    </div>
    <!-- ko if:showArrow() -->
    <a class="carousel-control left" data-bind='attr:{"href": "#"+id()}'
      data-slide="prev">&lsaquo;</a>
    <a class="carousel-control right" data-bind='attr:{"href": "#"+id()}'
      data-slide="next">&rsaquo;</a>
    <!-- /ko -->
</div></div>
<div id="contextmenu"><div class="cube" data-bind='attr:{"class": "contextmenu popover "+popoverDirection()}, 
	style:{display: isShowMenu() == true ? "block" : "none",zIndex: zIndex(),left:left(),right:right(),top:top(),bottom:bottom()}, 
	event:{mouseout: function(data,event){mouseout($element,event)}}'>
	<menu params="menuItems:  contextMenuItems,
					isList: true,
					isHorizontalChildren:true,
			onSelectItemChanged: ctxItemChanged" style="padding-left:0" ></menu>
</div></div>
<div id="cubeaudio"><div class="cube audio" data-bind="style:{width: width}">
	<audio data-bind="attr:{autoplay: autoplay, preload: preload, loop: loop}">
		<!-- ko if: cube.isArray(src()) -->
		<!-- ko foreach: {data: src, as: 'item'} -->
		<source data-bind="attr:{src: item}">
		<!-- /ko -->
		<!-- /ko -->
		<!-- ko if: cube.isString(src()) -->
		<source data-bind="attr:{src: src">
		<!-- /ko -->
	</audio>
	<div class="audio-playpause" data-bind="click:playpause">
		<a data-bind="css:{'icon-pause': isplaying(), 'icon-play': !isplaying() && !isstop(), 'icon-stop': isstop()}"></a>
	</div>
	<div class="audio-time audio-time-current" data-bind="text:currentTime, visible:currentTimeVisible">00:00</div>
	<div class="audio-bar" data-bind="event:{mousedown:function(data,event){barmousedown($element, event)}, mouseup:function(data,event){barmouseup($element, event)}}">
		<div class="audio-bar-loaded" style="width:100%"></div>
		<div class="audio-bar-played" data-bind="style:{width:playedwidth}"></div>
	</div>
	<div class="audio-time audio-time-duration" data-bind="text:timeDuration, visible:timeDurationVisible">00:00</div>
	<div class="audio-volume">
		<div class="audio-volume-button" data-bind="click:setmuted">
			<a data-bind="css:{'icon-volume-off':ismuted(),'icon-volume-up':!ismuted()&&!volumelow(),'icon-volume-down':!ismuted()&&volumelow()}"></a>
		</div>
		<div class="audio-volume-adjust" data-bind="event:{mousedown:function(data,event){volumemousedown($element,event)}, mouseup:function(data,event){volumemouseup($element, event)}">
			<div>
				<div data-bind="style:{height: volumeheight}"></div>
			</div>
		</div>
	</div>
</div></div>
<div id="cubebutton"><button type="button" data-bind="visible: visible, style:{ width: (_width()?_width():'auto'), height: (_height()?_height():'auto'), 
	background: bgcolor, border: border}, attr:{'class': 'cube btn btn-'+type()},css:{'disabled': disabled}, text: text, event:{click:_onclick}">
</button></div>
<div id="cubelabel"><label class="cube" data-bind="style:{ width: _width(), height: _height(), backgroundColor: bgcolor,
	border: border, textAlign: textAlign, lineHeight: height(),fontSize: fontSize,fontWeight:fontWeight }, text: text">
</label></div>
<div id="loading"><!-- ko if: isShow-->
<div class="cube modal-backdrop fade loading" data-bind="css:{'in': isShow},style:{backgroundColor:backgroundColor,position: fixed()?'fixed':'', zIndex: zIndex()}">
	<div style="position: absolute; top: 50%; left: 50%">
		<div style="position: relative; top: -50%; left: -50%; color: #ccc;">
			<!-- ko if: content() != null -->
				<div data-bind="html: content"></div>
			<!-- /ko -->
			<!-- ko if: content() == null -->
				<img alt="加载中" data-bind="attr:{src: imgUrl}">
			<!-- /ko -->
		</div>
	</div>

</div>
<!-- /ko --></div>
<div id="menu"><div class="cube" data-bind="css:{'navbar': isList() == false, 'navlistbar': isList},style:{width:width()}">
	<div class="navbar-inner">
		<ul class="nav cmenu" data-bind="css:{'nav-list': isList()&&!isHorizontalChildren(), 'dropdown-horizontal': isList()&&isHorizontalChildren(), 'nav-pills': !isList()}">
			<!-- ko foreach: menuItems -->
			<li data-bind="attr:{code:typeof(code)!='undefined'?code:''},event:{mouseenter:$parent.openSubItems,mouseleave:$parent.closeSubItems},
							css:{'dropdown':  typeof(hasChildren)!='undefined' && hasChildren, 
								'open': (typeof(hasChildren)!='undefined' && hasChildren && $parent.hoverItem()!=null && $parent.hoverItem().route==route) || (typeof(expanded)!='undefined' && expanded)}">
				<a href='#' data-bind="css:{'dropdown-toggle': typeof(hasChildren)!='undefined' && hasChildren},
						click:$parent.selectMenuItem,
						attr:{href: route,'data-toggle': typeof(hasChildren)!='undefined' && hasChildren?'dropdown':''}">
					<!-- ko if: typeof(icon) != "undefined" -->
					<span  data-bind='attr:{"class":"icon icon-"+icon}'></span>
					<!-- /ko -->
					<span data-bind="text: text"></span>
					<!-- ko if: $parent.isList() -->
               			<b class="cube-caret-right" data-bind="visible: typeof(hasChildren)!='undefined' && hasChildren"></b>
               		<!-- /ko -->
               		<!-- ko ifnot: $parent.isList() -->
						<b class="caret bottom-up" data-bind="visible: typeof(hasChildren)!='undefined' && hasChildren"></b>
					<!-- /ko -->
				</a>
				
				<!-- ko if: typeof(hasChildren)!='undefined' && hasChildren -->
					<!-- ko if: !$parent.isHorizontalChildren() || $parent.isList() -->
						<div data-bind='component:{name: "submenutmpl", params: {isList:$parent.isList,isHorizontalChildren:$parent.isHorizontalChildren,hoverItem:$parent.hoverItem,parentItem: $data,children: children, selectMenuItem: $parent.selectMenuItem}}'></div>
					<!-- /ko -->
				<!-- /ko -->
			</li>
			<!-- /ko -->
		</ul>
	</div>
</div>
<!-- ko if: !isList() && isHorizontalChildren() && hoverItem()!=null-->
<div data-bind="css:{'toolbarmenuopen': hoverItem()!=null}">
	<ul class="toolbar-menu" data-bind="foreach: hoverItem().children">
			<!-- ko if:text=='-' -->
			<li class="divider">|</li>
			<!-- /ko -->
			<!-- ko if:!(text=='-') -->
			<li data-bind="attr:{code:typeof(code)!='undefined'?code:''}">
				<a data-bind="attr:{href: typeof(route)!='undefined'?route:'#'},click: $parents[1].selectMenuItem">
					<!-- ko if: typeof(icon) != "undefined" -->
					<span data-bind='attr:{"class":"icon-"+icon}'></span>
					<!-- /ko -->
					<span data-bind="text: text"></span>
				</a>
			</li>
			<!-- /ko -->
	</ul>
</div>
<!-- /ko --></div>
<div id="navbar"><div class="cube navbar cubenavbar" data-bind="css:{'navbar-fixed-top': isFixTop,'navbar-menuwrap': isMenuWrap, 'navbar-inverse': isInverse}">
	<div class="navbar-inner" data-bind="css:{'hasbgcolor': bgcolor()!=''},style:{background:bgcolor,height:height}">
		<!-- ko if:navLogo -->
		<a class="brand" href="#"><img data-bind="attr{src: navLogo}" /></a>
		<!-- /ko -->
		<!-- ko if:navTitle -->
		<a class="brand" data-bind="text: navTitle,style:{color: fontColor}"></a>
		<!-- /ko -->
		
		
		<div class="navsheader" data-bind="style:{width: navWidth()}">
			<!-- ko if: _showBtn -->
			<span class="prev icon-chevron-left" data-bind="click: function(){prev($element)},style:{top:_showBtnTop}"></span>
			<!-- /ko -->
			<div class="scrollborder">
				<div class="scroll">
		
		
					<ul class="nav"	data-bind="style:{height:(isMenuWrap()?'auto':height())},foreach: items">
						<li data-bind="attr:{code:typeof(code)!='undefined'?code:''},event:{mouseover:function(data, event){$parent.openSubItems($element, data, event)},mouseout:$parent.closeSubItems},
										style:{lineHeight:($parent.isMenuWrap()?null:$parent.height())},
										css:{'active': $parent.selectedRoute()==route, 
											'dropdown': typeof(hasChildren)!='undefined' && hasChildren, 
											'open': typeof(hasChildren)!='undefined' && hasChildren && ($parent.hoverItem()!=null) && ($parent.hoverItem().route==route)}">
							<a href='#' data-bind="css:{'dropdown-toggle': typeof(hasChildren)!='undefined' && hasChildren},
									attr:{href: route,'data-toggle': typeof(hasChildren)!='undefined' && hasChildren?'dropdown':''},
									style:{'background': $parent.selectedRoute()==route?$parent.activeBgColor:'',color: $parent.fontColor},
									click:$parent.setSelectRoute">
														
								<!-- ko if: typeof(icon) != "undefined" -->
									<span  data-bind='attr:{"class":"icon icon-"+icon+" "+"icon-align-"+$parent.iconAlign()}'></span>
									<span data-bind='text: text, attr:{"class":"text-"+$parent.iconAlign()}'></span>
								<!-- /ko -->
					
								<!-- ko if: typeof(icon) == "undefined" -->
									<span data-bind='text: text'></span>
								<!-- /ko -->
								
								<b class="caret bottom-up" data-bind="visible: typeof(hasChildren)!='undefined' && hasChildren,style:{'border-top-color': $parent.fontColor,'border-bottom-color': $parent.fontColor}"></b>
								<i class="iefix"></i>
							</a>
							
						</li>
						<!-- ko if: $parent.isShowDividerVertical -->
							<li class="divider-vertical"></li>
						<!-- /ko -->
					</ul>
					
					
				</div>
			</div>
			<!-- ko if: _showBtn -->
			<span class="next icon-chevron-right" data-bind="click: function(){next($element)},style:{top:_showBtnTop}"></span>
			<!-- /ko -->
		</div>
		
		
		
	<!-- <div> -->
		<!-- ko if:isShowSearchbox -->
		<div class="form-search form-inline navbar-search " data-bind="css:{'pull-right': isSearchboxRight}">
			<div class="input-append">
	           	<input type="text" class="search-query" placeholder="搜索">
	           	<button class="btn btn-default" data-bind="click: function(){_onSearchBtnClick($element)}">
			        <span class="icon-search"></span>
			    </button>
           	</div>
           	<i class="iefix"></i>
        </div>
        <!-- /ko -->
        <ul class="nav pull-right operations"	data-bind="foreach: operations" >
			<li data-bind="	event:{mouseover:$parent.openSubItems,mouseout:$parent.closeSubItems},
							css:{'dropdown': typeof(hasChildren)!='undefined' && hasChildren, 'open': typeof(hasChildren)!='undefined' && hasChildren && ($parent.hoverItem()!=null) && ($parent.hoverItem()==$data)}">
				<a href='#' data-bind="css:{'dropdown-toggle': typeof(hasChildren)!='undefined' && hasChildren},
						attr:{'data-toggle': typeof(hasChildren)!='undefined' && hasChildren?'dropdown':''},
						style:{color: $parent.fontColor},
						click: $parent.setSelectRoute">
					<span data-bind="attr:{'class':'icon-'+icon}"></span>
					<span data-bind="html: text"></span>
					<b class="caret bottom-up" data-bind="visible: typeof(hasChildren)!='undefined' && hasChildren,style:{'border-top-color': $parent.fontColor,'border-bottom-color': $parent.fontColor}"></b>
					<i class="iefix"></i>
				</a>
				
				<!-- ko if:typeof(hasChildren)!='undefined' && hasChildren -->
				<ul class="dropdown-menu dropdown" style="margin-top: -1px;"
					data-bind="foreach: children">
					<li>
						<a data-bind="text: text, attr:{href: route},click:$parents[1].setSelectRoute"></a>
					</li>
				</ul>
				<!-- /ko -->
			</li>
			<!-- ko if: $parent.isShowDividerVertical -->
				<li class="divider-vertical"></li>
			<!-- /ko -->
		</ul>
		
	</div>
	<!-- 	</div> -->

	<ul class="dropdown-menu dropdown" style="margin-top: -1px;"  data-bind="style:{display: isShowChildren()?'block':'none',top:_menuHeight},
	foreach: _children,event:{mouseover:openChildrenDialog,mouseout:closeChildrenDialog}">
		<li>
			<a data-bind="text: text, attr:{href: route},click:$parents[0].setSelectRoute"></a>
		</li>
	</ul>

</div></div>
<div id="progressbar"><div class="cube progress progress-striped active" data-bind="attr:{title: progressValue, 'style':style}">
	<div class="bar bar-success"
		data-bind="style:{width: (progressItems()[0]*100)+'%'},">
		<div style="width:100%;height:100%;background:url(../../../cube/resources/images/progressbar/greenbg.png) repeat-x"></div>	
	</div>
	<div class="bar bar-warning"
		data-bind="style:{width: (progressItems()[1]*100)+'%'}">
		<div style="width:100%;height:100%;background:url(../../../cube/resources/images/progressbar/yellowbg.png) repeat-x"></div>	
	</div>
	<div class="bar bar-danger"
		data-bind="style:{width: (progressItems()[2]*100)+'%'}">
		<div style="width:100%;height:100%;background:url(../../../cube/resources/images/progressbar/redbg.png) repeat-x"></div>	
	</div>
	<div class="bar" style="width:0%;color:#000;" data-bind="text: progressValue"></div>
</div></div>
<div id="switch"><div  data-bind="style:{
						background: _bgcolor, border: border, 
						width: (_width()?_width():'auto'), 
						height: _height(), 
 						lineHeight: (_height()?_height():'auto'),
 						borderRadius: (_height()?_height():'auto')
 						},
 				css:{'disabled': disabled},
 				event:{click:_onclick},
 				attr:{'class': 'switch '+_type()}" >
 				
	<input type = "hidden" data-bind=  "value: _value"></input>
	<span class = "switch-inner" data-bind="style:{left: _textleft()}">
		<span data-bind="text: _text"></span>
	</span>
	<div data-bind="style:{ width: (_sliph()?_sliph():'auto'), 
					height: (_sliph()?_sliph():'auto'), 
					background: _slipbg}" 
					class="switch-slip">
	</div>
</div></div>
<div id="titlebar"><div class="cube accordion titlebar" data-bind="style:{width:width(),marginBottom:marginBottom()}">
    <div data-bind="attr:{'class':'accordion-group '+(typeof(type())!='undefined'?type():'default')}" >
        <div class="accordion-heading" data-bind="style:{padding:1,background:bgcolor(),height:height()}">
        	<span data-bind="attr:{'class':'icon-'+(typeof(icon())!='undefined'?icon():'default')}"></span>
            <span class="accordion-toggle" data-bind="visible:visible,text:title,style:{height:height(),lineHeight:height()}"></span>
	        <div class="custombtns" data-bind="style:{height:height(),lineHeight:height()}">
			<!-- ko foreach: customBtns -->
				<div  data-bind="attr:{'class':'panelBtns btn'}, 
				style:{
				color:typeof(btnColor)!='undefined'?btnColor:null,
				width:typeof(btnWidth)!='undefined'?btnWidth:'auto',
				height:typeof(btnHeight)!='undefined'?btnHeight:'auto',
				backgroundImage:typeof(backgroundImage)!='undefined'?backgroundImage:null,
				backgroundColor:typeof(backgroundColor)!='undefined'?backgroundColor:null,
				}, 
				visible: typeof(visible)!='undefined'?visible:true, click: $parent.customClick, clickBubble: false">
				<span data-bind="attr:{'class':'icon-'+(typeof(btnIcon)!='undefined'?btnIcon:'default')}"></span>
				<span data-bind="text:text"></span>
				</div>
	        <!-- /ko -->
			</div>
        </div>
        
    </div>
</div></div>
<div id="toolbar"><div class="cube btn-toolbar" data-bind="css:{toolbar:isShowBackground}">
	<!-- ko foreach: toolbarContent -->
	<div class="btn-group" data-bind='foreach: group, css:{"btn-group-right" : typeof(isFloatRight)!="undefined" && isFloatRight}'>
		<!-- ko if:  typeof(visible)=="undefined" || visible -->
		<div data-bind='attr:{"class":"btn btn-"+(typeof(type)!="undefined"?type:"default"),"title":text,code:typeof(code)!="undefined"?code:""}, css:{"dropdown": typeof(hasChildren)!="undefined" && hasChildren, 
								"open": typeof(hasChildren)!="undefined" && hasChildren && ($parents[1].hoverItem()!=null) && ($parents[1].hoverItem().func==func),"disabled": typeof(enable)!="undefined" && (typeof(enable)=="function"?!enable():!enable)}, click:$parent.onItemClick'>
		  <span data-bind='attr:{"class":"icon-"+icon}'></span>
		  <!-- ko if: $parents[1].showtext -->
		  	<span data-bind="text:text"></span>
		  <!-- /ko -->
		  <!-- ko if: typeof(hasChildren)!='undefined' && hasChildren -->
		  	<div class="box" data-bind="visible: hasChildren,event:{click:$parents[1].openSubItems},clickBubble: false">
		  	 	<b class="caret bottom-up"></b>
		  	</div>
		  <!-- /ko -->
		  <!-- ko if: typeof(hasChildren)!='undefined' && hasChildren -->
				<div data-bind='component:{name: "submenutmpl", params: {hoverItem:$parents[1].hoverItem,parentItem: $data,children: children, selectMenuItem: $parents[1].selectMenuItem}},event:{mouseleave:$parents[1].closeSubItems}'></div>
		  <!-- /ko -->		
		</div>
		<!-- /ko -->
	</div>
	<!-- /ko -->
</div></div>
<div id="chart"><div data-bind="style:{ width: _width(), height: _height()}">
</div></div>
<div id="dataform"><form class="cube row-fluid form-horizontal" data-bind="attr:{style:style},css:{inline:cols()>1}">
   <!-- ko foreach: { data: fields, as: 'items' }-->
  	  <!-- ko if: cube.isArray(items) && typeof(items[0].isGroupInfo) != "undefined" -->
	  <div class="group-header" data-bind="click: $parent.expandGroup">
	  		<!-- ko if: typeof(items[0].icon) != "undefined" -->
				<span  data-bind='attr:{"class":"icon icon-"+items[0].icon}'></span>
			<!-- /ko -->
	  		<span data-bind="text:items[0].caption"></span>
	  		<span data-bind="attr:{'class': items[0].expanded() ? 'caret':'caret notexpanded'}"></span>
	  </div>
	  <div class="group-body" data-bind="visible:items[0].expanded()">
	  	<!-- ko foreach: { data: items }-->
	  	<!-- ko if: typeof(isGroupInfo) == "undefined" -->
		  	<!-- ko if: typeof(isLine) != "undefined" && (typeof(visible) == "undefined" || visible) -->
		  		<div class="splitLine">
		  			<!-- ko if: typeof(icon) != "undefined" -->
						<span  data-bind='attr:{"class":"icon icon-"+icon}'></span>
					<!-- /ko -->
					<!-- ko if: typeof(caption) != "undefined" -->
						<span data-bind="text:caption"></span>
					<!-- /ko -->
		  		</div>
		  	<!-- /ko -->
		  	<!-- ko if: typeof(isLine) == "undefined" -->
		  	<div data-bind="visible:typeof(visible)=='undefined'?true:visible,attr: {'class':'control-group '+validStatus()+' span'+(typeof(colspan)!='undefined'?colspan*(12/$parents[1].cols()):12/$parents[1].cols())}">
			    <label class="control-label" data-bind="style:{width:typeof(captionWidth)!='undefined'?captionWidth:null}">
			    	<!-- ko if: typeof(nullable)=='function'?!nullable():nullable==false -->
			    	<span class="required">*</span>
			    	<!-- /ko -->
			    	<span data-bind='text:caption'></span>
			    	<!-- ko if: $parents[1].separator != '' &&  (typeof(showSeparator) == 'undefined' || showSeparator == true)-->
					 <span data-bind='text:$parents[1].separator'></span>
					<!-- /ko -->
			    </label>
			    <div class="controls controls-row" data-bind="css:{'controls-file':editorType == 'FileEditor', 'controls-rich':editorType == 'RichEditor', 'controls-multiline': (editorType == 'TextEditor' && typeof(textMode) != 'undefined' && textMode == 'multiline')},
			    	style:{marginLeft:typeof(captionWidth)!='undefined'?(parseInt(captionWidth)+10)+'px':null}">
			         <!-- ko if: typeof(renderEditor) != "undefined" -->
			         	<span class="uneditable-input labelEditor" data-bind="css:{autowrap: typeof(labelAutowrap)!='undefined'?labelAutowrap:null},html:$parents[1].renderEditor($data, $parents[1].data[name]),
			         		click: typeof(onClick)!='undefined'?function(){onClick($parents[1].data[name])}:null"></span>
			         <!-- /ko -->
			        <!-- ko if: editorType == "DateTimeEditor" && typeof(renderEditor) == "undefined"-->
						<div class="textInpCom" data-bind="attr:{id: name}, component: { name: 'datetimeeditor', params: $parents[1].getEditorParam($data) }"></div>
			         <!-- /ko -->
			         <!-- ko if: editorType == "FileEditor" && typeof(renderEditor) == "undefined" -->
					      <div class="textInpCom form-fileeditor" data-bind="attr:{id: name}, component: { name: 'fileeditor', params: $parents[1].getEditorParam($data) }"></div>
			         <!-- /ko -->
			         <!-- ko if: editorType == "RichEditor" && typeof(renderEditor) == "undefined" -->
					      <div class="textInpCom" data-bind="attr:{id: name}, component: { name: 'richeditor', params: $parents[1].getEditorParam($data) }"></div>
			         <!-- /ko -->
			         <!-- ko if: editorType == "GridEditor" && typeof(renderEditor) == "undefined" -->
					      <div class="textInpCom" data-bind="attr:{id: name}, component: { name: 'datagrid', params: $parents[1].getEditorParam($data) }"></div>
			         <!-- /ko -->
			         <!-- ko if: editorType != "DateTimeEditor" && editorType != "FileEditor" && editorType != "RichEditor" && typeof(renderEditor) == "undefined" -->
							<div  class="textInpCom" data-bind="attr:{id: name}, component: { name: 'commoneditor', params: $parents[1].getEditorParam($data) }"></div>
			         <!-- /ko -->
			         <!-- ko if: typeof(tips)!='undefined' && tips !=null && (typeof(validHint)=='undefined' || validHint() =="")-->
			         <span class="help-inline" data-bind="text:tips"></span>
			         <!-- /ko -->
			         <!-- ko if: ($parents[1].validHintType()=="inline"||(typeof(validHintType)!="undefined" && validHintType == "inline")) && typeof(validHint)!='undefined' && validHint() !="" -->
			         <span class="help-inline" data-bind="text:validHint()"></span>
			         <!-- /ko -->
			    </div>
		     </div>
		     <!-- /ko -->
		 <!-- /ko -->
		 <!-- /ko -->
		 <div style="clear: both;"></div>
	  </div>
	  <div data-bind="css:{'group-body-last':$index()==$parent.fields().length-1}"></div>
	  <!-- /ko -->
	  <!-- ko ifnot: cube.isArray(items) -->
	  	<!-- ko if: typeof(isGroupInfo) == "undefined" -->
		  	<!-- ko if: typeof(isLine) != "undefined" && (typeof(visible) == "undefined" || visible) -->
	  		<div class="splitLine">
	  			<!-- ko if: typeof(icon) != "undefined" -->
					<span  data-bind='attr:{"class":"icon icon-"+icon}'></span>
				<!-- /ko -->
				<!-- ko if: typeof(caption) != "undefined" -->
					<span data-bind="text:caption"></span>
				<!-- /ko -->
	  		</div>
		  	<!-- /ko -->
		  	<!-- ko if: typeof(isLine) == "undefined" -->
	  		<div data-bind="visible:typeof(visible)=='undefined'?true:visible,attr: {'class':'control-group '+validStatus()+' span'+(typeof(colspan)!='undefined'?colspan*(12/$parent.cols()):12/$parent.cols())}">
			    <label class="control-label" data-bind="style:{width:typeof(captionWidth)!='undefined'?captionWidth:null}">
			    	<!-- ko if: typeof(nullable)=='function'?!nullable():nullable==false -->
			    	<span class="required">*</span>
			    	<!-- /ko -->
			    	<span data-bind='text:caption'></span>
			    	<!-- ko if: $parent.separator != '' &&  (typeof(showSeparator) == 'undefined' || showSeparator == true)-->
					 <span data-bind='text:$parent.separator'></span>
					<!-- /ko -->
			    </label>
			    <div class="controls controls-row" data-bind="css:{'controls-file':editorType == 'FileEditor','controls-rich':editorType == 'RichEditor','controls-multiline': (editorType == 'TextEditor' && typeof(textMode) != 'undefined' && textMode == 'multiline')},
			    	style:{marginLeft:typeof(captionWidth)!='undefined'?(parseInt(captionWidth)+10)+'px':null}">
			         <!-- ko if: typeof(renderEditor) != "undefined" -->
			         	<span class="uneditable-input labelEditor" data-bind="css:{autowrap: typeof(labelAutowrap)!='undefined'?labelAutowrap:null},html:$parent.renderEditor($data, $parent.data[name]),
			         		click: typeof(onClick)!='undefined'?function(){onClick($parent.data[name])}:null"></span>
			         <!-- /ko -->
			         <!-- ko if: editorType == "DateTimeEditor" && typeof(renderEditor) == "undefined"-->
						<div class="textInpCom" data-bind="attr:{id: name}, component: { name: 'datetimeeditor', params: $parent.getEditorParam($data) }"></div>
			         <!-- /ko -->
			         <!-- ko if: editorType == "FileEditor" && typeof(renderEditor) == "undefined" -->
					      <div class="textInpCom form-fileeditor" data-bind="attr:{id: name}, component: { name: 'fileeditor', params: $parent.getEditorParam($data) }"></div>
			         <!-- /ko -->
			         <!-- ko if: editorType == "RichEditor" && typeof(renderEditor) == "undefined" -->
					      <div class="textInpCom" data-bind="attr:{id: name}, component: { name: 'richeditor', params: $parent.getEditorParam($data) }"></div>
			         <!-- /ko -->
			         <!-- ko if: editorType == "GridEditor" && typeof(renderEditor) == "undefined" -->
					      <div class="textInpCom" data-bind="attr:{id: name}, component: { name: 'datagrid', params: $parent.getEditorParam($data) }"></div>
			         <!-- /ko -->
			         <!-- ko if: editorType != "DateTimeEditor" && editorType != "FileEditor" && editorType != "RichEditor" && typeof(renderEditor) == "undefined" -->
						  <div  class="textInpCom" data-bind="attr:{id: name}, component: { name: 'commoneditor', params: $parent.getEditorParam($data) }"></div>
			         <!-- /ko -->
			         <!-- ko if: typeof(tips)!='undefined' && tips !=null && (typeof(validHint)=='undefined' || validHint() =="")-->
			         <span class="help-inline" data-bind="text:tips"></span>
			         <!-- /ko -->
			         <!-- ko if: ($parent.validHintType()=="inline"||(typeof(validHintType)!="undefined" && validHintType == "inline")) && typeof(validHint)!='undefined' && validHint() !="" -->
			         <span class="help-inline" data-bind="text:validHint()"></span>
			         <!-- /ko -->
			    </div>
		     </div>
		     <!-- /ko -->
	     <!-- /ko -->
	  <!-- /ko -->
  <!-- /ko -->
  <!-- ko if: displaySubmitButton() || displaySaveButton() || displayResetButton() || customBtns().length > 0 -->
  <div class="control-group span12" style="display: block;">
    <div class="controls" data-bind="style:{textAlign:buttonAlign}">
      <!-- ko if: displaySaveButton -->
      <input type="button" class="btn btn-primary" data-bind="click:submitForm,value:cube.msg('SAVE')"></input>
      <!-- /ko -->
      <!-- ko if: displaySubmitButton -->
      <input type="button" class="btn btn-primary" data-bind="click:submitForm,value:cube.msg('SUBMIT')"></input>
      <!-- /ko -->
      <!-- ko if: displayResetButton -->
      <input type="button" class="btn btn-success" data-bind="click:reset,value:cube.msg('RESET')"></input>
      <!-- /ko -->
      <!-- ko foreach: customBtns -->
		<button data-bind="text:text, attr:{'class': 'btn btn-'+(typeof(type)!='undefined'?type:'')}, visible: typeof(visible)!='undefined'?visible:true, event:{click: function(){$parent.customBtnClick(click, typeof(valid)!='undefined'?valid:false)}}, clickBubble: false"></button>
      <!-- /ko -->
    </div>
  </div>
  <!-- /ko -->
   <!-- ko if: isShowLoading-->
	<div class="cube modal-backdrop fade loading in loading-data">
		<div style="position: absolute; top: 50%; left: 50%">
			<div style="position: relative; top: -50%; left: -50%; color: #ccc;">
				<img alt="加载中" data-bind="attr:{src: cube.cubepath('$/images/window_loading.gif')}">
			</div>
		</div>
	</div>
	<!-- /ko -->
</form></div>
<div id="datagrid"><div class="cube grid" data-bind="attr:{style:style},style:{height:height,  'max-height':(maxHeight()!='auto' && height() == 'auto')?maxHeight:'none'},css:{hasScroll:items()!=null&&items().length == 0,autowrap: isAllowAutowrap}">
	<div class="tableHeader">
	<table class="table" data-bind='css:{
		"table-bordered": isShowBorder,
		"table-striped": isShowStripe,
		"table-hover": isShowHover,
		"table-condensed": isShowCondense
		}'>
         <thead>
           <tr>
             <!-- ko ifnot: isAllowSort -->
             	<!-- ko if: subColumns() != null -->
          		<th width="10px"></th>
         		<!-- /ko -->
             	<!-- ko if: markColumn() != null -->
          		<th data-bind="style:{width: typeof(markColumn().width)!='undefined'?markColumn().width:'30px'}, text:  markColumn().caption"></th>
         		<!-- /ko -->
         		  
         		<!-- ko if: isShowCheckBox -->
          		<th width="30px">
          			<!-- ko ifnot: isRadio -->
          			<input type="checkbox" data-bind="checked: _selectedAll">
          			<!-- /ko -->
          		</th>
         		<!-- /ko -->
         		<!-- ko if: isShowRowNumber -->
          		<th data-bind='style:{width:rowNumberWidth()}'>
          			<!-- ko if: rowNumberColumnName() == null -->
          				<!--ko text: cube.msg('ROWNUM')--><!--/ko-->
          			<!-- /ko -->
          			<!-- ko if: rowNumberColumnName() != null -->
          				<!--ko text: rowNumberColumnName--><!--/ko-->
          			<!-- /ko -->
          		</th>
         		  <!-- /ko -->
              <!-- ko foreach: columns -->
              	<!-- ko if:((name == $parent.primaryKey() && $parent.isShowPrimaryKey()== true) || name != $parent.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
              	<th data-bind="style:{width: typeof(width)!='undefined'?width:$parent.columnDefaultWidth()}, text: caption, event:{mousemove: function(data, event){$parent.mousemove($element,event)}, mousedown: function(data,event){$parent.mousedown($element,data,event,$index())},mouseup:$parent.mouseup}"></th>
              	 <!-- /ko -->
              <!-- /ko -->
             <!-- /ko -->
             <!-- ko if: isAllowSort -->
             	<!-- ko if: subColumns() != null -->
          		<th width="10px"></th>
         		<!-- /ko -->
             	<!-- ko if: markColumn() != null -->
          		<th data-bind="style:{width: typeof(markColumn().width)!='undefined'?markColumn().width:'30px'}, text:  markColumn().caption"></th>
         		<!-- /ko -->
         		<!-- ko if: isShowCheckBox -->
          		<th width="30px">
          			<!-- ko ifnot: isRadio -->
          			<input type="checkbox" data-bind="checked: _selectedAll">
          			<!-- /ko -->
          		</th>
         		<!-- /ko -->
         		<!-- ko if: isShowRowNumber -->
          		<th data-bind='style:{width:rowNumberWidth()}'>
          			<!-- ko if: rowNumberColumnName() == null -->
          				<!--ko text: cube.msg('ROWNUM')--><!--/ko-->
          			<!-- /ko -->
          			<!-- ko if: rowNumberColumnName() != null -->
          				<!--ko text: rowNumberColumnName--><!--/ko-->
          			<!-- /ko -->
          		</th>
         		  <!-- /ko -->
              <!-- ko foreach: columns -->
              	<!-- ko if:((name == $parent.primaryKey() && $parent.isShowPrimaryKey()== true) || name != $parent.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
              	<th  class="sort"  data-bind="style:{width: typeof(width)!='undefined'?width:$parent.columnDefaultWidth()}, event:{mousemove: function(data, event){$parent.mousemove($element,event)}, mousedown: function(data,event){$parent.mousedown($element,data,event,$index())},mouseup:$parent.mouseup}">
              		<div data-bind="attr:{title: cube.msg('SORTING')}, click:$parent.sortGrid,mousedownBubble: false">
               		<!-- ko if: $parent.sortName()== name -->
               			<span data-bind='attr:{"class": $parent.sortType()==1?"icon-arrow-up":"icon-arrow-down"}'></span>
               		<!-- /ko -->
               		<span data-bind='text: caption'></span>
              		</div>
              	</th>
              	 <!-- /ko -->
              <!-- /ko -->
             <!-- /ko -->
             <!-- ko if: isShowTempColumn -->
             <th data-bind="event:{mousemove: function(data, event){mousemove($element,event)}, mousedown: function(data,event){mousedown($element,null,event,-1)},mouseup:mouseup}"></th>
             <!-- /ko -->
             <th data-bind="'visible': (isAllowOperations() || _hasVScroll()),style:{width:_headerOperationsColumnWidth,padding:(!isAllowOperations()&&!isShowCondense()?'5px':null)}">
             	<!-- ko if: isAllowOperations -->
             		<!--ko text: cube.msg('OPERATIONS')--><!--/ko-->
             	<!-- /ko -->
             </th>
           </tr>
         </thead>
       </table>
    </div>
    <div class="tableBody" data-bind="style:{height: _bodyHeight,  'max-height':(maxHeight()!='auto' && height() == 'auto')?_bodyMaxHeight:'none'},css:{hasvscroll:_hasVScroll}">
	<table class="table" data-bind='css:{
		"table-bordered": isShowBorder,
		"table-striped": isShowStripe,
		"table-hover": isShowHover,
		"table-condensed": isShowCondense
		}'>
              <tbody>
              	<!-- ko foreach: { data: items, as: 'item' }-->
              	<!-- ko if: item!=null -->
                <tr data-bind='css:$parent._selectedItem()==item?"info":"", event:{dblclick: function() {$parent.dblclick(item)}}'>
                  <!-- ko if: $parent.subColumns() != null -->
          		    <td width="10px" data-bind="click:$parent.openSubGrid">
          		    	<span data-bind="attr:{'class':($parent.subGridId() == item[$parent.primaryKey()]?'icon-caret-down':'icon-caret-right')}"></span>
          		    </td>
         		  <!-- /ko -->
                  <!-- ko if: $parent.markColumn() != null -->
	          		<td class="table-markcolumn" data-bind="style:{width: typeof($parent.markColumn().width)!='undefined'?$parent.markColumn().width:'30px'}, html: $parent.renderMarkCell(item, $element) "></td>
	         	  <!-- /ko -->
           		  <!-- ko if: $parent.isShowCheckBox -->
	              		<td width="30px" class="table-checkbox">
	              			<input name="rowCheckbox" type="checkbox" data-bind="visible: $parent.checkboxVisible(item),attr:{type:$parent.isRadio()?'radio':'checkbox',value:item[$parent.primaryKey()]},checked: $parent._selectedIds">
	              		</td>
              	  <!-- /ko -->
              	  <!-- ko if: $parent.isShowRowNumber -->
            			<td class="table-rownum"  data-bind='style:{width:$parent.rowNumberWidth()}'><span data-bind=" text:($parent.isRowNumberSerial()?($parent.pageIndex()-1)*$parent.pageSize():0) + $index()+1"></span></td>
           		  <!-- /ko -->
                  <!-- ko if:($parent._selectedItem()!=item || $parent._isEdited()== false) && !$parent.isAllEdited() -->
	                  <!-- ko foreach: {data:$parent.columns,as:'column'} -->
	                  	<!-- ko if:((column.name == $parents[1].primaryKey() && $parents[1].isShowPrimaryKey()== true) || column.name != $parents[1].primaryKey()) && (typeof(column.visible)=='undefined' || column.visible) -->
                  			<td data-bind="css:{'wrapreverse':typeof(column.isAllowAutowrap)!='undefined'&&column.isAllowAutowrap!=$parents[1].isAllowAutowrap()},style:{'text-align': column.align,width: typeof(width)!='undefined'?width:$parents[1].columnDefaultWidth()},html:$parents[1].renderCell(item[column.name], $element, column, item), 
                  			event:{
                  				mouseenter:function(){$parents[1].mouseenter(item[$parents[1].primaryKey()], item[column.name], column, $element)},
                  				mouseleave:function(){$parents[1].mouseleave(item[$parents[1].primaryKey()], item[column.name], column, $element)},
                  				dblclick:function(){column.onDblClick?column.onDblClick(item[$parents[1].primaryKey()],item[column.name], column):null},
                  				click: function() {column.onClick?column.onClick(item[$parents[1].primaryKey()],item[column.name], column):$parents[1].setSelectedItem(item, $parentContext.$index())}
                  			}"></td>
	                  	<!-- /ko -->
	                  <!-- /ko -->
                  <!-- /ko -->
                  
                  <!-- ko if:($parent._isEdited()== true && $parent._selectedItem()==item) || $parent.isAllEdited() -->
	                  <!-- ko foreach: $parent.columns -->
	                  	<!-- ko if:((name == $parents[1].primaryKey() && $parents[1].isShowPrimaryKey()== true) || name != $parents[1].primaryKey()) && (typeof(visible)=='undefined' || visible) -->
	                  	<td data-bind="style:{width: typeof(width)!='undefined'?width:$parents[1].columnDefaultWidth(),overflow: (editorType != 'NoEditor'?'visible':null)}">
	                  		<!-- ko if: editorType == "NoEditor" -->
                  			<div data-bind="html: $parents[1].renderCell(item[$data.name], $element, $data, item)"></div>	
                  			<!-- /ko -->
                  			<!-- ko if: editorType != "NoEditor" -->
	                  		<div data-bind="attr: {
	                  				'class':'control-group '+($parents[1].isAllEdited()&&$parents[1]._editorValid().length>0?$parents[1]._editorValid()[$parentContext.$index()][name].validStatus():(typeof(validStatus)!='undefined'?validStatus():'')),
	                  				title:($parents[1].isAllEdited()&&$parents[1]._editorValid().length>0?$parents[1]._editorValid()[$parentContext.$index()][name].validHint():(typeof(validHint)!='undefined'?validHint():''))}">
		                  		<!-- ko if: editorType == "DateTimeEditor" -->
								<div data-bind="component: { name: 'datetimeeditor', params: $parents[1].getEditorParam($data, item, $parentContext.$index())}"></div>
						        <!-- /ko -->
						        <!-- ko if: editorType == "FileEditor" -->
							      <div data-bind="component: { name: 'fileeditor', params: $parents[1].getEditorParam($data, item, $parentContext.$index())}"></div>
					            <!-- /ko -->
						        <!-- ko if: editorType != "DateTimeEditor" && editorType != "FileEditor" -->
								<div data-bind="component: { name: 'commoneditor', params:  $parents[1].getEditorParam($data, item, $parentContext.$index())}"></div>
								 <!-- /ko -->
							 </div>
							 <!-- /ko -->
	                  	</td>
	                  	<!-- /ko -->
	                  <!-- /ko -->
                  <!-- /ko -->
                  <!-- ko if: $parent.isShowTempColumn -->
	             <td></td>
	             <!-- /ko -->
                 <td data-bind="'visible': $parent.isAllowOperations,style:{width:$parent.operationsColumnWidth,textAlign:$parent.operationsColumnAlign}">
	                  <!-- ko if: (!$parent._isEdited() || $parent._selectedItem() != item)-->
	                  	<!-- ko if: !$parent.isAllEdited() -->
	                  	<a href="" data-bind='text: $parent.isShowEditBtnText()?cube.msg("EDIT"):"", css:{"icon-edit":!$parent.isShowEditBtnText()}, attr:{title: cube.msg("EDIT")}, visible: $parent.isAllowEdit, click: function(){$parent.editItem(item,$index())}, clickBubble: false'></a>
	                  	<!-- /ko -->
	                  	<a href="" data-bind='text: $parent.isShowEditBtnText()?cube.msg("DELETE"):"", css:{"icon-remove":!$parent.isShowEditBtnText()}, attr:{title: cube.msg("DELETE")}, visible: $parent.isAllowDelete, click: $parent.delItem, clickBubble: false'></a>
	                  	<a href="" data-bind='text: $parent.isShowEditBtnText()?cube.msg("MOVEUP"):"", css:{"icon-arrow-up":!$parent.isShowEditBtnText()}, attr:{title: cube.msg("MOVEUP")}, visible: $parent.isAllowShift, click: $parent.shiftupItem, clickBubble: false'></a>
	                  	<a href="" data-bind='text: $parent.isShowEditBtnText()?cube.msg("MOVEDOWN"):"", css:{"icon-arrow-down":!$parent.isShowEditBtnText()}, attr:{title: cube.msg("MOVEDOWN")}, visible: $parent.isAllowShift, click: $parent.shiftdownItem, clickBubble: false'></a>
	                  <!-- /ko -->
	                  <!-- ko if: ($parent._isEdited() && $parent._selectedItem()==item) || $parent.isAllEdited() -->
	                  	<a href="" data-bind='text: $parent.isShowEditBtnText()?cube.msg("SAVE"):"", css:{"icon-save":!$parent.isShowEditBtnText()}, attr:{title: cube.msg("SAVE")},visible: $parent.isShowSave, click: $parent.saveItem, clickBubble: false'></a>
	                  	<!-- ko if: !$parent.isAllEdited() -->
	                  	<a href="" data-bind='text: $parent.isShowEditBtnText()?cube.msg("CANCEL"):"", css:{"icon-share-alt":!$parent.isShowEditBtnText()}, attr:{title: cube.msg("CANCEL")}, click: $parent.cancelSaveItem, clickBubble: false'></a>
	                  	 <!-- /ko -->
	                  <!-- /ko -->
	                  <!-- ko foreach: $parent.customOperations -->
                    	 <!-- ko if: typeof(icon)!='undefined' -->
                    	<a href="" data-bind="attr:{title: caption, 'class':icon}, visible: $parents[1].customOperationsVisible(item, typeof(visible)!='undefined'?visible:null), click: function(){$parents[1].customOperationsClick(item, $data, $element)}, clickBubble: false"></a>
                    	<!-- /ko -->
                    	<!-- ko if: typeof(icon)=='undefined' -->
                    	<a href="" data-bind="text:caption,attr:{title: caption}, visible: $parents[1].customOperationsVisible(item, typeof(visible)!='undefined'?visible:null), click: function(){$parents[1].customOperationsClick(item, $data, $element)}, clickBubble: false"></a>
                    	<!-- /ko -->
                       <!-- /ko -->
                  </td>
                </tr>
                 <!-- ko if: $parent.subColumns() != null && $parent.subGridId() == item[$parent.primaryKey()] -->
                 	<tr >
                 		<td></td>
                 		<td class="subgrid_td" data-bind="attr:{colSpan:$parent.columns().length + ($parent.isAllowOperations()?1:0) + ($parent.isShowCheckBox()?1:0) + ($parent.isShowPrimaryKey()?0:-1) + 1}">
                 			<div data-bind='component:{name: "datagrid", params: {
                 				url: cube.isEmpty($parent.subUrl())?$parent.url:$parent.subUrl,
                 				columns: $parent.subColumns,
                 				args: {pid: item[$parent.primaryKey()]},
                 				loadMeta: false,
                 				isAllowPaging: false,
                 				isShowCondense: true,
                 				rowNumberColumnName:"",
                 				onRendered:$parent.subGridRendered
                 			}}'></div>
                 		</td>
                 	</tr>
                 <!-- /ko -->
                 
                <!-- /ko -->
                <!-- /ko -->
                
                <!-- ko if:isAllowAppend -->
               	<tr>
               		<!-- ko if: subColumns() != null -->
	          		<th width="10px"></th>
	         		<!-- /ko -->
               		<!-- ko if: markColumn() != null -->
	          		<td style="text-align:center" data-bind="style:{width: typeof(markColumn().width)!='undefined'?markColumn().width:'30px'}"></td>
	         	    <!-- /ko -->
           			<!-- ko if: isShowCheckBox -->
              			<td width="30px"></td>
              		<!-- /ko -->
              		<!-- ko if: isShowRowNumber -->
            			<td data-bind='style:{width:rowNumberWidth()}'></td>
           			<!-- /ko -->
               		<!-- ko foreach: appendColumns -->
               		<!-- ko if:((name == $parent.primaryKey() && $parent.isShowPrimaryKey()== true) || name != $parent.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
               		<td data-bind="style:{width: typeof(width)!='undefined'?width:$parent.columnDefaultWidth(),overflow:'visible'}">
               			<div data-bind="attr: {'class':'control-group '+validStatus(),title:validHint()}">
               			<!-- ko if: editorType == "DateTimeEditor" -->
						<div data-bind="component: { name: 'datetimeeditor', params: $parent.getEditorParam($data) }"></div>
				         <!-- /ko -->
				         <!-- ko if: editorType == "FileEditor" -->
					      <div data-bind="component: { name: 'fileeditor', params:  $parent.getEditorParam($data)}"></div>
			            <!-- /ko -->
				         <!-- ko if: editorType != "DateTimeEditor" && editorType != "FileEditor" -->
						<div data-bind="component: { name: 'commoneditor', params:  $parent.getEditorParam($data)}"></div>
						 <!-- /ko -->
						 </div>
                  	</td>
                  	<!-- /ko -->
                  	<!-- /ko -->
                  	 <!-- ko if: isShowTempColumn -->
		             <td></td>
		             <!-- /ko -->
                  	<td data-bind="'visible': isAllowOperations,style:{width:operationsColumnWidth,textAlign:operationsColumnAlign}">
                  		<a href="" data-bind='css:{"icon-save":!isShowEditBtnText()},text: isShowEditBtnText()?cube.msg("SAVE"):"", attr:{title: cube.msg("SAVE")},visible: isShowSave, click: saveAppend'></a>
                  		<a href="" data-bind='css:{"icon-plus":!isShowEditBtnText()},text: isShowEditBtnText()?cube.msg("ADD"):"", attr:{title: cube.msg("ADD")},visible: isShowAdd, click: appendItem'></a>
                  		<!-- ko foreach: customOperations -->
	                    	 <!-- ko if: typeof(icon)!='undefined' -->
	                    	<a href="" data-bind="attr:{title: caption, 'class':icon}, click: $parent.appendCustomClick, clickBubble: false"></a>
	                    	<!-- /ko -->
	                    	<!-- ko if: typeof(icon)=='undefined' -->
	                    	<a href="" data-bind="text:caption,attr:{title: caption}, click: $parent.appendCustomClick, clickBubble: false"></a>
	                    	<!-- /ko -->
	                    <!-- /ko -->
                  	</td>
               	</tr>
                <!-- /ko -->
                
              </tbody>
            </table>
        </div>
        <!-- ko if: watermarkOptions()!=null -->
        <div class="watermark" data-bind="style:{
       	 		opacity: watermarkOptions().alpha,
       	 		color: watermarkOptions().color,
       	 		fontSize: watermarkOptions().fontSize,
       	 		filter: 'progid:DXImageTransform.Microsoft.Alpha(opacity='+watermarkOptions().alpha*100+')'
        	}">
       		<!-- ko foreach: { data: watermarkRows, as: 'row' } -->
       			<!-- ko foreach: { data: $parent.watermarkCols, as: 'col' } -->
       				<div data-bind="style:{
       						left: col.x+($parentContext.$index()%2==0?0:$parents[1].watermarkOptions().indent)+'px',
       						top: row.y+'px',
       						transform: 'rotate(-'+$parents[1].watermarkOptions().rotate+'deg)',
       						width: $parents[1].watermarkOptions().width+'px',
       						height: $parents[1].watermarkOptions().height+'px'
       					}, 
       					text: $parents[1].watermarkOptions().text"></div>
       			<!-- /ko -->
       		<!-- /ko -->
        </div>
        <!-- /ko -->
        <!-- ko if: isShowLoading-->
		<div class="cube modal-backdrop fade loading in loading-data">
			<div style="position: absolute; top: 50%; left: 50%">
				<div style="position: relative; top: -50%; left: -50%; color: #ccc;">
					<img alt="加载中" data-bind="attr:{src: cube.cubepath('$/images/window_loading.gif')}">
				</div>
			</div>
		</div>
		<!-- /ko -->
</div>
<!-- ko if: isAllowPaging -->
<div class="gridpagenavibar">
 	<pagenavibar params="
		size: 'middle',
		showArrow: true,
		isShowBtnText: isShowBtnText,
		firstIcon: firstIcon,
		previousIcon: previousIcon,
		nextIcon: nextIcon,
		endIcon: endIcon,
		showTotal: true,
		showGoto: true,
		showAllPage: false,
		pageTotalCount: _pageCount,
		count: itemCount,
		pageIndex: pageIndex,
		pageVisibleCount: pageVisibleCount,
		pageInfoToLeft: pageInfoToLeft,
		blurGoto: blurGoto,
		loadTime: loadTime,
		isShowLoadTime: isShowLoadTime() && autoLoad(),
		loadTimeFadeout: loadTimeFadeout,
		onPageIndexChanged: onCurrentPageIndexChanged"></pagenavibar>
</div>
<!-- /ko --></div>
<div id="exceltmpl"><div data-bind="visible: step() == 1">
	<dataform id="exceltmpl_excelForm"
		params="
	loadMeta:false,
	fields:columnFields,
	displaySubmitButton:false,
	cols: 3,
	separator:'：',
	validHintType: 'pop'
">
	</dataform>
</div>
<div data-bind="visible: step() == 2">
	<div>
		<h6>
			<span data-bind="text:cube.msg('IMPORT_EXCEL_WIZARD_ANALYSE_RESULT')"></span>
			（<span data-bind="text:cube.msg('IMPORT_EXCEL_WIZARD_ANALYSE_RESULT_DESCRIPTION')"></span>）
		</h6>
	</div>
	<datagrid id="exceltmpl_excelGrid" params="
			url: previewGridBaseUrl,
			loadMeta:false,
			autoLoad: false,
			height: '250px',
			columns: columns,
			items: items
	"></datagrid>
</div></div>
<div id="groupheadergrid"><div class="cube grid" data-bind="attr:{style:style},style:{height:height},css:{autowrap: isAllowAutowrap}">
	<table class="table" data-bind='css:{
		"table-bordered": isShowBorder,
		"table-striped": isShowStripe,
		"table-hover": isShowHover,
		"table-condensed": isShowCondense
		},style:{"table-layout":tableLayout()}'>
              <thead>
              	<!-- ko ifnot: isAllowSort -->
              		<!-- ko foreach: _levelColumns -->
	              	<tr>
              			<!-- ko if: $parent.isShowCheckBox() && $index() == 0 -->
	              			<th width="15px" data-bind='attr:{"rowSpan":$parent._levelColumns().length}'>
	              				<!-- ko ifnot: $parent.isRadio -->
	              				<input type="checkbox" data-bind="checked: $parent._selectedAll">
	              				<!-- /ko -->
	              			</th>
              			<!-- /ko -->
              			<!-- ko if: $parent.isShowRowNumber() && $index() == 0 -->
	              			<th width="40px" data-bind='attr:{"rowSpan":$parent._levelColumns().length}'>
	              				<!-- ko if: $parent.rowNumberColumnName() == null -->
			          				<!--ko text: cube.msg('ROWNUM')--><!--/ko-->
			          			<!-- /ko -->
			          			<!-- ko if: $parent.rowNumberColumnName() != null -->
			          				<!--ko text: $parent.rowNumberColumnName--><!--/ko-->
			          			<!-- /ko -->
	              			</th>
              			<!-- /ko -->
						<!-- ko foreach: $data -->
							<!-- ko if:((name == $parents[1].primaryKey() && $parents[1].isShowPrimaryKey()== true) || name != $parents[1].primaryKey()) && (typeof(visible)=='undefined' || visible) -->
							<th data-bind='text: caption, attr:{"valign":"", "colSpan": colspan, "rowSpan": colspan>1?1:($parents[1]._levelColumns().length-$parentContext.$index())}, style:{width: typeof(width)!="undefined"?width:$parents[1].columnDefaultWidth},
							event:{mousemove: function(data, event){$parents[1].mousemove($element,event)}, mousedown: function(data,event){$parents[1].mousedown($element,data,event)},mouseup:$parents[1].mouseup}'></th>
							<!-- /ko -->
						<!-- /ko -->
						<!-- ko if: $index() == 0 -->
						<th data-bind="'visible': $parent.isAllowOperations,attr:{'rowSpan': $parent._levelColumns().length}" style="text-align:center"><!--ko text: cube.msg('OPERATIONS')--><!--/ko--></th>
						<!-- /ko -->
	              	</tr>
	              	<!-- /ko -->
              	<!-- /ko -->
              	<!-- ko if: isAllowSort -->
              	    <!-- ko foreach: _levelColumns -->
	              	<tr>
              			<!-- ko if: $parent.isShowCheckBox() && $index() == 0 -->
	              			<th width="15px" data-bind='attr:{"rowSpan":$parent._levelColumns().length}'>
	              				<!-- ko ifnot: $parent.isRadio -->
	              				<input type="checkbox" data-bind="checked: $parent._selectedAll">
	              				<!-- /ko -->
	              			</th>
              			<!-- /ko -->
              			<!-- ko if: $parent.isShowRowNumber() && $index() == 0 -->
	              			<th width="40px" data-bind='attr:{"rowSpan":$parent._levelColumns().length}'>
	              				<!-- ko if: $parent.rowNumberColumnName() == null -->
			          				<!--ko text: cube.msg('ROWNUM')--><!--/ko-->
			          			<!-- /ko -->
			          			<!-- ko if: $parent.rowNumberColumnName() != null -->
			          				<!--ko text: $parent.rowNumberColumnName--><!--/ko-->
			          			<!-- /ko -->
	              			</th>
              			<!-- /ko -->
						<!-- ko foreach: $data -->
							<!-- ko if: colspan == 1 -->
								<!-- ko if:((name == $parents[1].primaryKey() && $parents[1].isShowPrimaryKey()== true) || name != $parents[1].primaryKey()) && (typeof(visible)=='undefined' || visible) -->
								<th class='sort'  data-bind='attr:{"colSpan": colspan, "rowSpan": colspan>1?1:($parents[1]._levelColumns().length-$parentContext.$index())}, style:{width: typeof(width)!="undefined"?width:$parents[1].columnDefaultWidth},
								event:{mousemove: function(data, event){$parents[1].mousemove($element,event)}, mousedown: function(data,event){$parents[1].mousedown($element,data,event)},mouseup:$parents[1].mouseup}'>
									<div data-bind="click: $parents[1].sortGrid,mousedownBubble: false"  title="排序">
				                  		<!-- ko if: $parents[1].sortName()== name-->
				                  			<span data-bind='attr:{"class": $parents[1].sortType()==1?"icon-arrow-up":"icon-arrow-down"}'></span>
				                  		<!-- /ko -->
				                  		<span data-bind='text: caption'></span>
			                  		</div>
			                  	</th>
			                  	<!-- /ko -->
							<!-- /ko -->
							<!-- ko ifnot: colspan == 1 -->
								<!-- ko if:((name == $parents[1].primaryKey() && $parents[1].isShowPrimaryKey()== true) || name != $parents[1].primaryKey()) && (typeof(visible)=='undefined' || visible) -->
		                  		<th data-bind='text: caption, attr:{"colSpan": colspan, "rowSpan": colspan>1?1:($parents[1]._levelColumns().length-$parentContext.$index())}, style:{width: typeof(width)!="undefined"?width:$parents[1].columnDefaultWidth}' ></th>
		                  		<!-- /ko -->
							<!-- /ko -->
						<!-- /ko -->
						<!-- ko if: $index() == 0 -->
						<th data-bind="'visible': $parent.isAllowOperations,attr:{'rowSpan': $parent._levelColumns().length}"><!--ko text: cube.msg('OPERATIONS')--><!--/ko--></th>
						<!-- /ko -->
	              	</tr>
	              	<!-- /ko -->
              	<!-- /ko -->
              </thead>
              <tbody>
              	<!-- ko foreach: { data: items, as: 'item' }-->
              	<!-- ko if: item!=null -->
               <tr data-bind='css:$parent._selectedItem()==item?"info":"",event:{dblclick: function() {$parent.dblclick(item)}}'>
           			<!-- ko if: $parent.isShowCheckBox -->
	              		<td class="table-checkbox"><input name="rowCheckbox" type="checkbox" data-bind="visible: $parent.checkboxVisible(item),attr:{type:$parent.isRadio()?'radio':'checkbox',value:item[$parent.primaryKey()]},checked: $parent._selectedIds"></td>
              		<!-- /ko -->
              		<!-- ko if: $parent.isShowRowNumber -->
            			<td class="table-rownum"><span data-bind="text: ($parent.isRowNumberSerial()?($parent.pageIndex()-1)*$parent.pageSize():0) + $index()+1"></span></td>
           			<!-- /ko -->
                  <!-- ko if:$parent._selectedItem()!=$data || $parent._isEdited()== false-->
	                  <!-- ko foreach: {data:$parent._showItemColumns,as:"column"} -->
	                  		<!-- ko if:((column.name == $parents[1].primaryKey() && $parents[1].isShowPrimaryKey()== true) || column.name != $parents[1].primaryKey()) && (typeof(column.visible)=='undefined' || column.visible) -->
                  			<td data-bind="css:{'wrapreverse':typeof(column.isAllowAutowrap)!='undefined'&&column.isAllowAutowrap!=$parents[1].isAllowAutowrap()},style:{'text-align': column.align,width: typeof(width)!='undefined'?width:$parents[1].columnDefaultWidth()}, html:$parents[1].renderCell(item[column.name], $element, column, item),
                  			 event:{
                  			 	mouseenter:function(){$parents[1].mouseenter(item[$parents[1].primaryKey()], item[column.name], column, $element)},
                  				mouseleave:function(){$parents[1].mouseleave(item[$parents[1].primaryKey()], item[column.name], column, $element)},
                  				dblclick:function(){column.onDblClick?column.onDblClick(item[$parents[1].primaryKey()],item[column.name], column):null},
                  			 	click: function() {column.onClick?column.onClick(item[$parents[1].primaryKey()],item[column.name], column):$parents[1].setSelectedItem(item, $parentContext.$index())}}"></td>
                  			 <!-- /ko -->
	                  <!-- /ko -->
                  <!-- /ko -->
                  
                  <!-- ko if:$parent._isEdited()== true && $parent._selectedItem()==$data-->
	                   <!-- ko foreach: $parent._showItemColumns -->
	                   	<!-- ko if:((name == $parents[1].primaryKey() && $parents[1].isShowPrimaryKey()== true) || name != $parents[1].primaryKey()) && (typeof(visible)=='undefined' || visible) -->
	                  	<td data-bind="style:{width: typeof(width)!='undefined'?width:$parents[1].columnDefaultWidth(),overflow:'visible'}">
	                  		<div data-bind="attr: {'class':'control-group '+validStatus(),title:validHint()}">
								<!-- ko if: editorType == "DateTimeEditor" -->
								<div data-bind="component: { name: 'datetimeeditor', params: { 
									showTimePicker: typeof(showTimePicker)!='undefined'?showTimePicker:undefined,
									showDayPicker: typeof(showDayPicker)!='undefined'?showDayPicker:undefined,
									value: $parents[1]._editedItem[name],
									format: typeof(format)!='undefined'?format:undefined,
									isAllowEdit: typeof(isAllowEdit)!='undefined'?isAllowEdit:undefined,
									isShowValue: typeof(isShowValue)!='undefined'?isShowValue:undefined,
									validType: typeof(validType)!='undefined'?validType:undefined,
									nullable: typeof(nullable)!='undefined'?nullable:undefined,
									validStatus: typeof(validStatus)!='undefined'?validStatus:undefined,
									validHint: typeof(validHint)!='undefined'?validHint:undefined,
									validFailValue:typeof(validFailValue)!='undefined'?validFailValue:undefined,
									isClickCloseDialog:  typeof(isClickCloseDialog)!='undefined'?isClickCloseDialog:undefined,
									isExtDisplay: typeof(isExtDisplay)!='undefined'?isExtDisplay:true,
									width: '75%'} }"></div>
						         <!-- /ko -->
						         <!-- ko if: editorType == "FileEditor" -->
							      <div data-bind="component: { name: 'fileeditor', params: { name: typeof(name)!='undefined'?name:'',
							       	    url: typeof(url)!='undefined'?url:'',
							       	    isShowPreview: typeof(isShowPreview)!='undefined'?isShowPreview:undefined,
							       	    autoUpload: typeof(autoUpload)!='undefined'?autoUpload:undefined,
							       	    previewSize: typeof(previewSize)!='undefined'?previewSize:undefined,
							       	    maxCount: typeof(maxCount)!='undefined'?maxCount:undefined,
							       	    maxFileSize: typeof(maxFileSize)!='undefined'?maxFileSize:undefined,
							       	    isGetMd5: typeof(isGetMd5)!='undefined'?isGetMd5:undefined,
							       	    allowTypes: typeof(allowTypes)!='undefined'?allowTypes:undefined,
							       	    type: typeof(type)!='undefined'?type:undefined,
							       	    filePath: typeof(filePath)!='undefined'?filePath:undefined,
							       	    tableName: typeof(tableName)!='undefined'?tableName:undefined,
							       	    primaryKey: typeof(primaryKey)!='undefined'?primaryKey:undefined,
							       	    pkVal: typeof(pkVal)!='undefined'?pkVal:undefined,
							       	    colName: typeof(colName)!='undefined'?colName:undefined,
							       	    uploadMode: typeof(uploadMode)!='undefined'?uploadMode:undefined,
							       	    params: typeof(params)!='undefined'?params:undefined,
							       	    isVirtual: typeof(isVirtual)!='undefined'?isVirtual:undefined,
							       	    isShowUploadButton: typeof(isShowUploadButton)!='undefined'?isShowUploadButton:undefined,
		       	    					isShowRemoveButton: typeof(isShowRemoveButton)!='undefined'?isShowRemoveButton:undefined,
		       	    					isShowDownloadButton: typeof(isShowDownloadButton)!='undefined'?isShowDownloadButton:undefined,
		       	    					isShowThumbnail: typeof(isShowThumbnail)!='undefined'?isShowThumbnail:undefined,
							       	    validStatus: typeof(validStatus)!='undefined'?validStatus:undefined,
										validHint: typeof(validHint)!='undefined'?validHint:undefined,
										onItemUploading: typeof(onItemUploading)!='undefined'?onItemUploading:undefined,
										onItemUploaded: typeof(onItemUploaded)!='undefined'?onItemUploaded:undefined,
										onItemUploadFail: typeof(onItemUploadFail)!='undefined'?onItemUploadFail:undefined,
							       	    onAllItemUploaded: typeof(onAllItemUploaded)!='undefined'?onAllItemUploaded:undefined,
							       	    onItemRemoved: typeof(onItemRemoved)!='undefined'?onItemRemoved:undefined,
							       	    onAllItemRemoved: typeof(onAllItemRemoved)!='undefined'?onAllItemRemoved:undefined,
							       	    onChanged: $parents[1]._editor_upload
							       	    } }"></div>
					            <!-- /ko -->
						         <!-- ko if: editorType != "DateTimeEditor" && editorType != "FileEditor" -->
								<div data-bind="component: { name: 'commoneditor', params: { value: $parents[1]._editedItem[name],
									readOnly: typeof(readOnly)!='undefined'?readOnly:undefined,
									editorType: typeof(editorType)!='undefined'?editorType:'TextEditor',
									isShowScroll: typeof(isShowScroll)!='undefined'?isShowScroll:undefined,
									isShowNull: typeof(isShowNull)!='undefined'?isShowNull:undefined,
									dropdownMenuHeight: typeof(dropdownMenuHeight)!='undefined'?dropdownMenuHeight: undefined,
									isTextEllipsis: typeof(isTextEllipsis)!='undefined'?isTextEllipsis:undefined,
									isShowCheckbox: typeof(isShowCheckbox)!='undefined'?isShowCheckbox:undefined,
									isClickShow: typeof(isClickShow)!='undefined'?isClickShow:undefined,
									textMode: typeof(textMode)!='undefined'?textMode:undefined,
									type: typeof(type)!='undefined'?type:undefined,
									list: typeof(list)!='undefined'?list:undefined,
									validType: typeof(validType)!='undefined'?validType:undefined,
									validOptions: typeof(validOptions)!='undefined'?validOptions:undefined,
									maxLength: typeof(maxLength)!='undefined'?maxLength:undefined,
									nullable: typeof(nullable)!='undefined'?nullable:undefined,
									treeOptions: typeof(treeOptions)!='undefined'?treeOptions:undefined,
									validStatus: typeof(validStatus)!='undefined'?validStatus:undefined,
									validHint: typeof(validHint)!='undefined'?validHint:undefined,
									customValidate: typeof(customValidate)!='undefined'?customValidate:undefined,
									customBtnText: typeof(customBtnText)!='undefined'?customBtnText:undefined,
									customBtnIcon: typeof(customBtnIcon)!='undefined'?customBtnIcon:undefined,
									customBtnEnabled: typeof(customBtnEnabled)!='undefined'?customBtnEnabled:undefined,
									isAllowEdit: typeof(isAllowEdit)!='undefined'?isAllowEdit:undefined,
									isValueIsEmptyEnter: typeof(isValueIsEmptyEnter)!='undefined'?isValueIsEmptyEnter:undefined,
									textAlign: typeof(align)!='undefined'?align:undefined,
									isExtDisplay: typeof(isExtDisplay)!='undefined'?isExtDisplay:true,
									onChanged: typeof(onChanged)!='undefined'?onChanged:undefined,
									onClick: typeof(onClick)!='undefined'?onClick:undefined,
									onSelectedChanged: typeof(onSelectedChanged)!='undefined'?onSelectedChanged:undefined,
									width: editorType=='DropDownEditor'?'auto':(editorType=='NumberEditor'?'40%':'85%')} }"></div>
								 <!-- /ko -->
							 </div>
	                  	</td>
	                  	 <!-- /ko -->
	                  <!-- /ko -->
                  <!-- /ko -->
                  
                  <td data-bind="'visible': $parent.isAllowOperations,style:{width:$parent.operationsColumnWidth,textAlign:$parent.operationsColumnAlign}">
	                  <!-- ko if: !$parent._isEdited() || $parent._selectedItem()!=$data -->
	                  	<a href="" title='编辑' class='icon-edit' data-bind='visible: $parent.isAllowEdit, click: function(){$parent.editItem(item,$index())}, clickBubble: false'></a>
	                  	<a href="" title='删除' class='icon-remove' data-bind='visible: $parent.isAllowDelete, click: $parent.delItem, clickBubble: false'></a>
	                  	<a href="" title='上移' class='icon-arrow-up' data-bind='visible: $parent.isAllowShift, click: $parent.shiftupItem, clickBubble: false'></a>
	                  	<a href="" title='下移' class='icon-arrow-down' data-bind='visible: $parent.isAllowShift, click: $parent.shiftdownItem, clickBubble: false'></a>
	                  <!-- /ko -->
	                   <!-- ko if: $parent._isEdited() && $parent._selectedItem()==$data-->
	                  	<a href="" title='保存' class='icon-save' data-bind='click: $parent.saveItem, clickBubble: false'></a>
	                  	<a href="" title='取消' class='icon-share-alt' data-bind='click: $parent.cancelSaveItem, clickBubble: false'></a>
	                  <!-- /ko -->
	                  <!-- ko foreach: $parent.customOperations -->
	                    	 <!-- ko if: typeof(icon)!='undefined' -->
	                    	<a href="" data-bind="attr:{title: caption, 'class':icon}, visible: $parents[1].customOperationsVisible(item, typeof(visible)!='undefined'?visible:null), click: function(){click(item)}, clickBubble: false"></a>
	                    	<!-- /ko -->
	                    	<!-- ko if: typeof(icon)=='undefined' -->
	                    	<a href="" data-bind="text:caption,attr:{title: caption}, visible: $parents[1].customOperationsVisible(item, typeof(visible)!='undefined'?visible:null), click: function(){click(item)}, clickBubble: false"></a>
	                    	<!-- /ko -->
	                     <!-- /ko -->
                  </td>
                </tr>
                <!-- /ko -->
                <!-- /ko -->
                 
                <!-- ko if:isAllowAppend -->
                	<tr>
	           			<!-- ko if: isShowCheckBox -->
	              			<td></td>
	              		<!-- /ko -->
	              		<!-- ko if: isShowRowNumber -->
	            			<td></td>
	           			<!-- /ko -->
                		<!-- ko foreach: appendColumns -->
                		<!-- ko if:((name == $parent.primaryKey() && $parent.isShowPrimaryKey()== true) || name != $parent.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
                		<td style="overflow:visible">
                			<div data-bind="attr: {'class':'control-group '+validStatus(),title:validHint()}">
	                  		<!-- ko if: editorType == "DateTimeEditor" -->
							<div data-bind="component: { name: 'datetimeeditor', params: { 
								showTimePicker: typeof(showTimePicker)!='undefined'?showTimePicker:undefined,
								showDayPicker: typeof(showDayPicker)!='undefined'?showDayPicker:undefined,
								value: $parent._appendedItem[name],
								format: typeof(format)!='undefined'?format:undefined,
								isAllowEdit: typeof(isAllowEdit)!='undefined'?isAllowEdit:undefined,
								isShowValue: typeof(isShowValue)!='undefined'?isShowValue:undefined,
								validType: typeof(validType)!='undefined'?validType:undefined,
								nullable: typeof(nullable)!='undefined'?nullable:undefined,
								validStatus: typeof(validStatus)!='undefined'?validStatus:undefined,
								validHint: typeof(validHint)!='undefined'?validHint:undefined,
								validFailValue:typeof(validFailValue)!='undefined'?validFailValue:undefined,
								isClickCloseDialog:  typeof(isClickCloseDialog)!='undefined'?isClickCloseDialog:undefined,
								isExtDisplay: typeof(isExtDisplay)!='undefined'?isExtDisplay:true,
								width: '75%'} }"></div>
					         <!-- /ko -->
					         <!-- ko if: editorType == "FileEditor" -->
						      <div data-bind="component: { name: 'fileeditor', params: { name: typeof(name)!='undefined'?name:'',
						       	    url: typeof(url)!='undefined'?url:'',
						       	    isShowPreview: typeof(isShowPreview)!='undefined'?isShowPreview:undefined,
						       	    autoUpload: typeof(autoUpload)!='undefined'?autoUpload:undefined,
						       	    previewSize: typeof(previewSize)!='undefined'?previewSize:undefined,
						       	    maxCount: typeof(maxCount)!='undefined'?maxCount:undefined,
						       	    maxFileSize: typeof(maxFileSize)!='undefined'?maxFileSize:undefined,
						       	    isGetMd5: typeof(isGetMd5)!='undefined'?isGetMd5:undefined,
						       	    allowTypes: typeof(allowTypes)!='undefined'?allowTypes:undefined,
						       	    type: typeof(type)!='undefined'?type:undefined,
						       	    filePath: typeof(filePath)!='undefined'?filePath:undefined,
						       	    tableName: typeof(tableName)!='undefined'?tableName:undefined,
						       	    primaryKey: typeof(primaryKey)!='undefined'?primaryKey:undefined,
						       	    pkVal: typeof(pkVal)!='undefined'?pkVal:undefined,
						       	    colName: typeof(colName)!='undefined'?colName:undefined,
						       	    uploadMode: typeof(uploadMode)!='undefined'?uploadMode:undefined,
						       	    params: typeof(params)!='undefined'?params:undefined,
						       	    isVirtual: typeof(isVirtual)!='undefined'?isVirtual:undefined,
						       	    isShowUploadButton: typeof(isShowUploadButton)!='undefined'?isShowUploadButton:undefined,
	       	    					isShowRemoveButton: typeof(isShowRemoveButton)!='undefined'?isShowRemoveButton:undefined,
	       	    					isShowDownloadButton: typeof(isShowDownloadButton)!='undefined'?isShowDownloadButton:undefinede,
	       	    					isShowThumbnail: typeof(isShowThumbnail)!='undefined'?isShowThumbnail:undefined,
						       	    validStatus: typeof(validStatus)!='undefined'?validStatus:undefined,
									validHint: typeof(validHint)!='undefined'?validHintundefined,
									onItemUploading: typeof(onItemUploading)!='undefined'?onItemUploading:undefined,
									onItemUploaded: typeof(onItemUploaded)!='undefined'?onItemUploaded:undefined,
									onItemUploadFail: typeof(onItemUploadFail)!='undefined'?onItemUploadFail:undefined,
						       	    onAllItemUploaded: typeof(onAllItemUploaded)!='undefined'?onAllItemUploaded:undefined,
						       	    onItemRemoved: typeof(onItemRemoved)!='undefined'?onItemRemoved:undefined,
						       	    onAllItemRemoved: typeof(onAllItemRemoved)!='undefined'?onAllItemRemoved:undefined,
						       	    onChanged: $parent._editor_upload
						       	    } }"></div>
				            <!-- /ko -->
					         <!-- ko if: editorType != "DateTimeEditor" && editorType != "FileEditor"-->
							<div data-bind="component: { name: 'commoneditor', params: { value: $parent._appendedItem[name],
								readOnly: typeof(readOnly)!='undefined'?readOnly:undefined,
								editorType: typeof(appendEditorType)!='undefined'?appendEditorType:(typeof(editorType)!='undefined'?editorType:'TextEditor'),
								isShowScroll: typeof(isShowScroll)!='undefined'?isShowScroll:undefined,
								isShowNull: typeof(isShowNull)!='undefined'?isShowNull:undefined,
								dropdownMenuHeight: typeof(dropdownMenuHeight)!='undefined'?dropdownMenuHeight: undefined,
								isTextEllipsis: typeof(isTextEllipsis)!='undefined'?isTextEllipsis:undefined,
								isShowCheckbox: typeof(isShowCheckbox)!='undefined'?isShowCheckbox:undefined,
								isClickShow: typeof(isClickShow)!='undefined'?isClickShow:undefined,
								textMode: typeof(textMode)!='undefined'?textMode:undefined,
								type: typeof(type)!='undefined'?type:undefined,
								list: typeof(list)!='undefined'?list:undefined,
								validType: typeof(validType)!='undefined'?validType:undefined,
								validOptions: typeof(validOptions)!='undefined'?validOptions:undefined,
								maxLength: typeof(maxLength)!='undefined'?maxLength:undefined,
								nullable: typeof(nullable)!='undefined'?nullable:undefined,
								treeOptions: typeof(treeOptions)!='undefined'?treeOptions:undefined,
								validStatus: typeof(validStatus)!='undefined'?validStatus:undefined,
								validHint: typeof(validHint)!='undefined'?validHint:undefined,
								customValidate: typeof(customValidate)!='undefined'?customValidate:undefined,
								customBtnText: typeof(customBtnText)!='undefined'?customBtnText:undefined,
								customBtnIcon: typeof(customBtnIcon)!='undefined'?customBtnIcon:undefined,
								customBtnEnabled: typeof(customBtnEnabled)!='undefined'?customBtnEnabled:undefined,
								isAllowEdit: typeof(isAllowEdit)!='undefined'?isAllowEdit:undefined,
								isValueIsEmptyEnter: typeof(isValueIsEmptyEnter)!='undefined'?isValueIsEmptyEnter:undefined,
								textAlign: typeof(align)!='undefined'?align:undefined,
								isExtDisplay: typeof(isExtDisplay)!='undefined'?isExtDisplay:true,
								onChanged: typeof(onChanged)!='undefined'?onChanged:undefined,
								onClick: typeof(onClick)!='undefined'?onClick:undefined,
								onSelectedChanged: typeof(onSelectedChanged)!='undefined'?onSelectedChanged:undefined,
								width: editorType=='DropDownEditor'?'auto':(editorType=='NumberEditor'?'40%':'85%')} }"></div>
							 <!-- /ko -->
							 </div>
	                  	</td>
	                  	<!-- /ko -->
	                  	<!-- /ko -->
	                  	<td data-bind="'visible': isAllowOperations,style:{width:operationsColumnWidth,textAlign:operationsColumnAlign}">
	                  		<a href="" class='icon-save' data-bind='attr:{title: cube.msg("SAVE")},visible: isShowSave, click: saveAppend'></a>
	                  		<a href="" class='icon-plus'  data-bind='attr:{title: cube.msg("ADD")},visible: isShowAdd, click: appendItem'></a>
	                  		<!-- ko foreach: customOperations -->
		                    	<!-- ko if: typeof(icon)!='undefined' -->
		                    	<a href="" data-bind="attr:{title: caption, 'class':icon},  click: $parent.appendCustomClick, clickBubble: false"></a>
		                    	<!-- /ko -->
		                    	<!-- ko if: typeof(icon)=='undefined' -->
		                    	<a href="" data-bind="text:caption,attr:{title: caption},  click: $parent.appendCustomClick, clickBubble: false"></a>
		                    	<!-- /ko -->
	                     	<!-- /ko -->
	                  	</td>
                	</tr>
                <!-- /ko -->
                 <!-- /ko -->
              </tbody>
            </table>
            <!-- ko if: watermarkOptions()!=null -->
	            <div class="watermark" data-bind="style:{
			       	 	opacity: watermarkOptions().alpha,
			       	 	color: watermarkOptions().color,
			       	 	fontSize: watermarkOptions().fontSize,
			       	 	filter: 'progid:DXImageTransform.Microsoft.Alpha(opacity='+watermarkOptions().alpha*100+')'
			        }">
		       		<!-- ko foreach: { data: watermarkRows, as: 'row' } -->
		       			<!-- ko foreach: { data: $parent.watermarkCols, as: 'col' } -->
		       				<div data-bind="style:{
		       						left: col.x+($parentContext.$index()%2==0?0:$parents[1].watermarkOptions().indent)+'px',
		       						top: row.y+'px',
		       						transform: 'rotate(-'+$parents[1].watermarkOptions().rotate+'deg)',
		       						width: $parents[1].watermarkOptions().width+'px',
		       						height: $parents[1].watermarkOptions().height+'px'
		       					}, 
		       					text: $parents[1].watermarkOptions().text"></div>
		       			<!-- /ko -->
		       		<!-- /ko -->
	       		</div>
	        <!-- /ko -->
	        <!-- ko if: isShowLoading-->
			<div class="cube modal-backdrop fade loading in loading-data">
				<div style="position: absolute; top: 50%; left: 50%">
					<div style="position: relative; top: -50%; left: -50%; color: #ccc;">
						<img alt="加载中" data-bind="attr:{src: cube.cubepath('$/images/window_loading.gif')}">
					</div>
				</div>
			</div>
			<!-- /ko -->
</div>
<!-- ko if: isAllowPaging -->
<div class="gridpagenavibar">
 	<pagenavibar params="
		size: 'middle',
		showArrow: true,
		isShowBtnText: isShowBtnText,
		firstIcon: firstIcon,
		previousIcon: previousIcon,
		nextIcon: nextIcon,
		endIcon: endIcon,
		showTotal: true,
		showGoto: true,
		showAllPage: false,
		pageTotalCount: _pageCount,
		count: itemCount,
		pageIndex: pageIndex,
		pageVisibleCount: pageVisibleCount,
		pageInfoToLeft: pageInfoToLeft,
		blurGoto: blurGoto,
		loadTime: loadTime,
		isShowLoadTime: isShowLoadTime() && autoLoad(),
		loadTimeFadeout: loadTimeFadeout,
		onPageIndexChanged: onCurrentPageIndexChanged"></pagenavibar>
</div>
<!-- /ko --></div>
<div id="lockedgrid"><div class="cube grid lockedgrid" data-bind="attr:{style:style},style:{height:height,  'max-height':(maxHeight()!='auto' && height() == 'auto')?maxHeight:'none'},css:{autowrap: isAllowAutowrap}">
	<!-- 左侧锁定表格 -->
	<div class="table-left">
		<div class="tableHeader">
		<table class="table" data-bind='css:{
			"table-bordered": isShowBorder,
			"table-striped": isShowStripe,
			"table-hover": isShowHover,
			"table-condensed": isShowCondense
			}'>
	         <thead>
	           <tr>
	             <!-- ko ifnot: isAllowSort -->
	             	<!-- ko if: subColumns() != null -->
	          		<th width="10px"></th>
	         		<!-- /ko -->
	             	<!-- ko if: markColumn() != null -->
	          		<th data-bind="style:{width: typeof(markColumn().width)!='undefined'?markColumn().width:'30px'}, text:  markColumn().caption"></th>
	         		<!-- /ko -->
	         		  
	         		<!-- ko if: isShowCheckBox -->
	          		<th width="30px">
	          			<!-- ko ifnot: isRadio -->
	          			<input type="checkbox" data-bind="checked: _selectedAll">
	          			<!-- /ko -->
	          		</th>
	         		<!-- /ko -->
	         		<!-- ko if: isShowRowNumber -->
	          		<th data-bind='style:{width:rowNumberWidth()}'>
	          			<!-- ko if: rowNumberColumnName() == null -->
	          				<!--ko text: cube.msg('ROWNUM')--><!--/ko-->
	          			<!-- /ko -->
	          			<!-- ko if: rowNumberColumnName() != null -->
	          				<!--ko text: rowNumberColumnName--><!--/ko-->
	          			<!-- /ko -->
	          		</th>
	         		  <!-- /ko -->
	              <!-- ko foreach: lockedColumns -->
	              	<!-- ko if:((name == $parent.primaryKey() && $parent.isShowPrimaryKey()== true) || name != $parent.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
	              	<th data-bind="style:{width: typeof(width)!='undefined'?width:$parent.columnDefaultWidth()}, text: caption"></th>
	              	 <!-- /ko -->
	              <!-- /ko -->
	             <!-- /ko -->
	             <!-- ko if: isAllowSort -->
	             	<!-- ko if: subColumns() != null -->
	          		<th width="10px"></th>
	         		<!-- /ko -->
	             	<!-- ko if: markColumn() != null -->
	          		<th data-bind="style:{width: typeof(markColumn().width)!='undefined'?markColumn().width:'30px'}, text:  markColumn().caption"></th>
	         		<!-- /ko -->
	         		<!-- ko if: isShowCheckBox -->
	          		<th width="30px">
	          			<!-- ko ifnot: isRadio -->
	          			<input type="checkbox" data-bind="checked: _selectedAll">
	          			<!-- /ko -->
	          		</th>
	         		<!-- /ko -->
	         		<!-- ko if: isShowRowNumber -->
	          		<th data-bind='style:{width:rowNumberWidth()}'>
	          			<!-- ko if: rowNumberColumnName() == null -->
	          				<!--ko text: cube.msg('ROWNUM')--><!--/ko-->
	          			<!-- /ko -->
	          			<!-- ko if: rowNumberColumnName() != null -->
	          				<!--ko text: rowNumberColumnName--><!--/ko-->
	          			<!-- /ko -->
	          		</th>
	         		  <!-- /ko -->
	              <!-- ko foreach: lockedColumns -->
	              	<!-- ko if:((name == $parent.primaryKey() && $parent.isShowPrimaryKey()== true) || name != $parent.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
	              	<th  class="sort"  data-bind="style:{width: typeof(width)!='undefined'?width:$parent.columnDefaultWidth()}">
	              		<div data-bind="attr:{title: cube.msg('SORTING')}, click:$parent.sortGrid,mousedownBubble: false">
	               		<!-- ko if: $parent.sortName()== name -->
	               			<span data-bind='attr:{"class": $parent.sortType()==1?"icon-arrow-up":"icon-arrow-down"}'></span>
	               		<!-- /ko -->
	               		<span data-bind='text: caption'></span>
	              		</div>
	              	</th>
	              	 <!-- /ko -->
	              <!-- /ko -->
	             <!-- /ko -->
	             <th></th>
	           </tr>
	         </thead>
	       </table>
	    </div>
	    <div class="tableBody" data-bind="style:{height: _bodyHeight,  'max-height':(maxHeight()!='auto' && height() == 'auto')?_bodyMaxHeight:'none'},css:{hasvscroll:_hasVScroll}">
		<table class="table" data-bind='css:{
			"table-bordered": isShowBorder,
			"table-striped": isShowStripe,
			"table-hover": isShowHover,
			"table-condensed": isShowCondense
			}'>
	              <tbody>
	              	<!-- ko if: items().length == 0 && !_isSetHeight() -->
                	<tr>
                		<td></td>
                	</tr>
	                <!-- /ko -->
	              	<!-- ko foreach: { data: items, as: 'item' }-->
	              	<!-- ko if: item!=null -->
	                <tr data-bind='css:$parent._selectedItem()==item?"info":"", event:{dblclick: function() {$parent.dblclick(item)}}'>
	                  <!-- ko if: $parent.subColumns() != null -->
	          		    <td width="10px" data-bind="click:$parent.openSubGrid">
	          		    	<span data-bind="attr:{'class':($parent.subGridId() == item[$parent.primaryKey()]?'icon-caret-down':'icon-caret-right')}"></span>
	          		    </td>
	         		  <!-- /ko -->
	                  <!-- ko if: $parent.markColumn() != null -->
		          		<td class="table-markcolumn" data-bind="style:{width: typeof($parent.markColumn().width)!='undefined'?$parent.markColumn().width:'30px'}, html: $parent.renderMarkCell(item, $element) "></td>
		         	  <!-- /ko -->
	           		  <!-- ko if: $parent.isShowCheckBox -->
		              		<td width="30px" class="table-checkbox">
		              			<input name="rowCheckbox" type="checkbox" data-bind="visible: $parent.checkboxVisible(item),attr:{type:$parent.isRadio()?'radio':'checkbox',value:item[$parent.primaryKey()]},checked: $parent._selectedIds">
		              		</td>
	              	  <!-- /ko -->
	              	  <!-- ko if: $parent.isShowRowNumber -->
	            			<td class="table-rownum"  data-bind='style:{width:$parent.rowNumberWidth()}'><span data-bind=" text:($parent.isRowNumberSerial()?($parent.pageIndex()-1)*$parent.pageSize():0) + $index()+1"></span></td>
	           		  <!-- /ko -->
	                  <!-- ko if:($parent._selectedItem()!=item || $parent._isEdited()== false) && !$parent.isAllEdited() -->
		                  <!-- ko foreach: {data:$parent.lockedColumns,as:'column'} -->
		                  	<!-- ko if:((column.name == $parents[1].primaryKey() && $parents[1].isShowPrimaryKey()== true) || column.name != $parents[1].primaryKey()) && (typeof(column.visible)=='undefined' || column.visible) -->
	                  			<td data-bind="css:{'wrapreverse':typeof(column.isAllowAutowrap)!='undefined'&&column.isAllowAutowrap!=$parents[1].isAllowAutowrap()},style:{'text-align': column.align,width: typeof(width)!='undefined'?width:$parents[1].columnDefaultWidth()},html:$parents[1].renderCell(item[column.name], $element, column, item), 
	                  			event:{
	                  				mouseenter:function(){$parents[1].mouseenter(item[$parents[1].primaryKey()], item[column.name], column, $element)},
	                  				mouseleave:function(){$parents[1].mouseleave(item[$parents[1].primaryKey()], item[column.name], column, $element)},
	                  				dblclick:function(){column.onDblClick?column.onDblClick(item[$parents[1].primaryKey()],item[column.name], column):null},
	                  				click: function() {column.onClick?column.onClick(item[$parents[1].primaryKey()],item[column.name], column):$parents[1].setSelectedItem(item, $parentContext.$index())}
	                  			}"></td>
		                  	<!-- /ko -->
		                  <!-- /ko -->
	                  <!-- /ko -->
	                  
	                  <!-- ko if:($parent._isEdited()== true && $parent._selectedItem()==item) || $parent.isAllEdited() -->
		                  <!-- ko foreach: $parent.lockedColumns -->
		                  	<!-- ko if:((name == $parents[1].primaryKey() && $parents[1].isShowPrimaryKey()== true) || name != $parents[1].primaryKey()) && (typeof(visible)=='undefined' || visible) -->
		                  	<td data-bind="style:{width: typeof(width)!='undefined'?width:$parents[1].columnDefaultWidth(),overflow:'visible'}">
		                  		<div data-bind="attr: {
		                  				'class':'control-group '+($parents[1].isAllEdited()&&$parents[1]._editorValid().length>0?$parents[1]._editorValid()[$parentContext.$index()][name].validStatus():(typeof(validStatus)!='undefined'?validStatus():'')),
		                  				title:($parents[1].isAllEdited()&&$parents[1]._editorValid().length>0?$parents[1]._editorValid()[$parentContext.$index()][name].validHint():(typeof(validHint)!='undefined'?validHint():''))}">
			                  		 <!-- ko if: editorType == "DateTimeEditor" -->
									<div data-bind="component: { name: 'datetimeeditor', params: $parents[1].getEditorParam($data, item, $parentContext.$index())}"></div>
							         <!-- /ko -->
							         <!-- ko if: editorType == "FileEditor" -->
								      <div data-bind="component: { name: 'fileeditor', params: $parents[1].getEditorParam($data, item, $parentContext.$index())}"></div>
						            <!-- /ko -->
							        <!-- ko if: editorType != "DateTimeEditor" && editorType != "FileEditor" -->
									<div data-bind="component: { name: 'commoneditor', params:  $parents[1].getEditorParam($data, item, $parentContext.$index())}"></div>
									 <!-- /ko -->
								 </div>
		                  	</td>
		                  	<!-- /ko -->
		                  <!-- /ko -->
	                  <!-- /ko -->
		             <td></td>
	                </tr>
	                 <!-- ko if: $parent.subColumns() != null && $parent.subGridId() == item[$parent.primaryKey()] -->
	                 	<tr >
	                 		<td></td>
	                 		<td class="subgrid_td" data-bind="attr:{colSpan:$parent.columns().length + ($parent.isAllowOperations()?1:0) + ($parent.isShowCheckBox()?1:0) + + ($parent.isShowPrimaryKey()?0:-1) + 1}">
	                 			<div data-bind='component:{name: "datagrid", params: {
	                 				url: cube.isEmpty($parent.subUrl())?$parent.url:$parent.subUrl,
	                 				columns: $parent.subColumns,
	                 				args: {depid: item[$parent.primaryKey()]},
	                 				loadMeta: false,
	                 				isAllowPaging: false,
	                 				isShowCondense: true,
	                 				rowNumberColumnName:"",
	                 				onRendered:$parent.subGridRendered
	                 			}}'></div>
	                 		</td>
	                 	</tr>
	                 <!-- /ko -->
	                 
	                <!-- /ko -->
	                <!-- /ko -->
	                
	                <!-- ko if:isAllowAppend -->
	               	<tr>
	               		<!-- ko if: subColumns() != null -->
		          		<th width="10px"></th>
		         		<!-- /ko -->
	               		<!-- ko if: markColumn() != null -->
		          		<td style="text-align:center" data-bind="style:{width: typeof(markColumn().width)!='undefined'?markColumn().width:'30px'}"></td>
		         	    <!-- /ko -->
	           			<!-- ko if: isShowCheckBox -->
	              			<td width="30px"></td>
	              		<!-- /ko -->
	              		<!-- ko if: isShowRowNumber -->
	            			<td data-bind='style:{width:rowNumberWidth()}'></td>
	           			<!-- /ko -->
	               		<!-- ko foreach: appendColumns -->
	               		<!-- ko if:((name == $parent.primaryKey() && $parent.isShowPrimaryKey()== true) || name != $parent.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
	               		<td data-bind="style:{width: typeof(width)!='undefined'?width:$parent.columnDefaultWidth(),overflow:'visible'}">
	               			<div data-bind="attr: {'class':'control-group '+validStatus(),title:validHint()}">
	               			<!-- ko if: editorType == "DateTimeEditor" -->
							<div data-bind="component: { name: 'datetimeeditor', params: $parent.getEditorParam($data) }"></div>
					         <!-- /ko -->
					         <!-- ko if: editorType == "FileEditor" -->
						      <div data-bind="component: { name: 'fileeditor', params:  $parent.getEditorParam($data)}"></div>
				            <!-- /ko -->
					         <!-- ko if: editorType != "DateTimeEditor" && editorType != "FileEditor" -->
							<div data-bind="component: { name: 'commoneditor', params:  $parent.getEditorParam($data)}"></div>
							 <!-- /ko -->
							 </div>
	                  	</td>
	                  	<!-- /ko -->
	                  	<!-- /ko -->
			            <td></td>
	               	</tr>
	                <!-- /ko -->
	                
	              </tbody>
	            </table>
	        </div>
	      	<!-- ko if: _hasHScroll -->
        	<div class="tempScroll"></div>
        	<!-- /ko -->
        </div>
        <!-- 右侧表格 -->
        <div class="table-right" data-bind="css:{hasoperations:isAllowOperations}">
	        <div class="tableHeader">
			<table class="table" data-bind='css:{
			"table-bordered": isShowBorder,
			"table-striped": isShowStripe,
			"table-hover": isShowHover,
			"table-condensed": isShowCondense
			}'>
	         <thead>
	           <tr>
	             <!-- ko ifnot: isAllowSort -->
	              <!-- ko foreach: columns -->
	              	<!-- ko if:((name == $parent.primaryKey() && $parent.isShowPrimaryKey()== true) || name != $parent.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
	              	<th data-bind="style:{width: typeof(width)!='undefined'?width:$parent.columnDefaultWidth()}, text: caption, event:{mousemove: function(data, event){$parent.mousemove($element,event)}, mousedown: function(data,event){$parent.mousedown($element,data,event,$index())},mouseup:$parent.mouseup}"></th>
	              	 <!-- /ko -->
	              <!-- /ko -->
	             <!-- /ko -->
	             <!-- ko if: isAllowSort -->
	              <!-- ko foreach: columns -->
	              	<!-- ko if: (typeof(locked)=="undefined" || locked == false) && ((name == $parent.primaryKey() && $parent.isShowPrimaryKey()== true) || name != $parent.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
	              	<th  class="sort"  data-bind="style:{width: typeof(width)!='undefined'?width:$parent.columnDefaultWidth()}, event:{mousemove: function(data, event){$parent.mousemove($element,event)}, mousedown: function(data,event){$parent.mousedown($element,data,event,$index())},mouseup:$parent.mouseup}">
	              		<div data-bind="attr:{title: cube.msg('SORTING')}, click:$parent.sortGrid,mousedownBubble: false">
	               		<!-- ko if: $parent.sortName()== name -->
	               			<span data-bind='attr:{"class": $parent.sortType()==1?"icon-arrow-up":"icon-arrow-down"}'></span>
	               		<!-- /ko -->
	               		<span data-bind='text: caption'></span>
	              		</div>
	              	</th>
	              	 <!-- /ko -->
	              <!-- /ko -->
	             <!-- /ko -->
	             <!-- ko if: isShowTempColumn -->
	             <th data-bind="event:{mousemove: function(data, event){mousemove($element,event)}, mousedown: function(data,event){mousedown($element,null,event,-1)},mouseup:mouseup}"></th>
	             <!-- /ko -->
	           </tr>
	         </thead>
	       </table>
	    </div>
	    <div class="tableBody" data-bind="style:{height: _bodyHeight,  'max-height':(maxHeight()!='auto' && height() == 'auto')?_bodyMaxHeight:'none','overflow-y':isAllowOperations()?'hidden':'auto'},css:{hasvscroll:_hasVScroll}">
		<table class="table" data-bind='css:{
			"table-bordered": isShowBorder,
			"table-striped": isShowStripe,
			"table-hover": isShowHover,
			"table-condensed": isShowCondense
			}, style:{width: items().length == 0?_emptyWidth():null,maxWidth: items().length == 0?_emptyWidth():null}
			'>
	              <tbody>
	                <!-- ko if: items().length == 0 && !_isSetHeight() -->
	                	<tr>
	                		<td></td>
	                	</tr>
	                <!-- /ko -->
	              	<!-- ko foreach: { data: items, as: 'item' }-->
	              	<!-- ko if: item!=null -->
	                <tr data-bind='css:$parent._selectedItem()==item?"info":"", event:{dblclick: function() {$parent.dblclick(item)}}'>
	                  <!-- ko if:($parent._selectedItem()!=item || $parent._isEdited()== false) && !$parent.isAllEdited() -->
		                  <!-- ko foreach: {data:$parent.columns,as:'column'} -->
		                  	<!-- ko if:(typeof(locked)=="undefined" || locked == false) && ((column.name == $parents[1].primaryKey() && $parents[1].isShowPrimaryKey()== true) || column.name != $parents[1].primaryKey()) && (typeof(column.visible)=='undefined' || column.visible) -->
	                  			<td data-bind="css:{'wrapreverse':typeof(column.isAllowAutowrap)!='undefined'&&column.isAllowAutowrap!=$parents[1].isAllowAutowrap()},style:{'text-align': column.align,width: typeof(width)!='undefined'?width:$parents[1].columnDefaultWidth()},html:$parents[1].renderCell(item[column.name], $element, column, item), 
	                  			event:{
	                  				mouseenter:function(){$parents[1].mouseenter(item[$parents[1].primaryKey()], item[column.name], column, $element)},
	                  				mouseleave:function(){$parents[1].mouseleave(item[$parents[1].primaryKey()], item[column.name], column, $element)},
	                  				dblclick:function(){column.onDblClick?column.onDblClick(item[$parents[1].primaryKey()],item[column.name], column):null},
	                  				click: function() {column.onClick?column.onClick(item[$parents[1].primaryKey()],item[column.name], column):$parents[1].setSelectedItem(item, $parentContext.$index())}
	                  			}"></td>
		                  	<!-- /ko -->
		                  <!-- /ko -->
	                  <!-- /ko -->
	                  
	                  <!-- ko if:($parent._isEdited()== true && $parent._selectedItem()==item) || $parent.isAllEdited() -->
		                  <!-- ko foreach: $parent.columns -->
		                  	<!-- ko if:(typeof(locked)=="undefined" || locked == false) && ((name == $parents[1].primaryKey() && $parents[1].isShowPrimaryKey()== true) || name != $parents[1].primaryKey()) && (typeof(visible)=='undefined' || visible) -->
		                  	<td data-bind="style:{width: typeof(width)!='undefined'?width:$parents[1].columnDefaultWidth(),overflow:'visible'}">
		                  		<div data-bind="attr: {
		                  				'class':'control-group '+($parents[1].isAllEdited()&&$parents[1]._editorValid().length>0?$parents[1]._editorValid()[$parentContext.$index()][name].validStatus():(typeof(validStatus)!='undefined'?validStatus():'')),
		                  				title:($parents[1].isAllEdited()&&$parents[1]._editorValid().length>0?$parents[1]._editorValid()[$parentContext.$index()][name].validHint():(typeof(validHint)!='undefined'?validHint():''))}">
			                  		 <!-- ko if: editorType == "DateTimeEditor" -->
									<div data-bind="component: { name: 'datetimeeditor', params: $parents[1].getEditorParam($data, item, $parentContext.$index())}"></div>
							         <!-- /ko -->
							         <!-- ko if: editorType == "FileEditor" -->
								      <div data-bind="component: { name: 'fileeditor', params: $parents[1].getEditorParam($data, item, $parentContext.$index())}"></div>
						            <!-- /ko -->
							        <!-- ko if: editorType != "DateTimeEditor" && editorType != "FileEditor" -->
									<div data-bind="component: { name: 'commoneditor', params:  $parents[1].getEditorParam($data, item, $parentContext.$index())}"></div>
									 <!-- /ko -->
								 </div>
		                  	</td>
		                  	<!-- /ko -->
		                  <!-- /ko -->
	                  <!-- /ko -->
	                  <!-- ko if: $parent.isShowTempColumn -->
		             <td></td>
		             <!-- /ko -->
	                </tr>
	                 <!-- ko if: $parent.subColumns() != null && $parent.subGridId() == item[$parent.primaryKey()] -->
	                 	<tr >
	                 		<td></td>
	                 		<td class="subgrid_td" data-bind="attr:{colSpan:$parent.columns().length + ($parent.isShowPrimaryKey()?0:-1) + 1}">
	                 			<div data-bind='component:{name: "datagrid", params: {
	                 				url: cube.isEmpty($parent.subUrl())?$parent.url:$parent.subUrl,
	                 				columns: $parent.subColumns,
	                 				args: {depid: item[$parent.primaryKey()]},
	                 				loadMeta: false,
	                 				isAllowPaging: false,
	                 				isShowCondense: true,
	                 				rowNumberColumnName:"",
	                 				onRendered:$parent.subGridRendered
	                 			}}'></div>
	                 		</td>
	                 	</tr>
	                 <!-- /ko -->
	                 
	                <!-- /ko -->
	                <!-- /ko -->
	                
	                <!-- ko if:isAllowAppend -->
	               	<tr>
	               		<!-- ko if: subColumns() != null -->
		          		<th width="10px"></th>
		         		<!-- /ko -->
	               		<!-- ko if: markColumn() != null -->
		          		<td style="text-align:center" data-bind="style:{width: typeof(markColumn().width)!='undefined'?markColumn().width:'30px'}"></td>
		         	    <!-- /ko -->
	           			<!-- ko if: isShowCheckBox -->
	              			<td width="30px"></td>
	              		<!-- /ko -->
	              		<!-- ko if: isShowRowNumber -->
	            			<td data-bind='style:{width:rowNumberWidth()}'></td>
	           			<!-- /ko -->
	               		<!-- ko foreach: appendColumns -->
	               		<!-- ko if:((name == $parent.primaryKey() && $parent.isShowPrimaryKey()== true) || name != $parent.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
	               		<td data-bind="style:{width: typeof(width)!='undefined'?width:$parent.columnDefaultWidth(),overflow:'visible'}">
	               			<div data-bind="attr: {'class':'control-group '+validStatus(),title:validHint()}">
	               			<!-- ko if: editorType == "DateTimeEditor" -->
							<div data-bind="component: { name: 'datetimeeditor', params: $parent.getEditorParam($data) }"></div>
					         <!-- /ko -->
					         <!-- ko if: editorType == "FileEditor" -->
						      <div data-bind="component: { name: 'fileeditor', params:  $parent.getEditorParam($data)}"></div>
				            <!-- /ko -->
					         <!-- ko if: editorType != "DateTimeEditor" && editorType != "FileEditor" -->
							<div data-bind="component: { name: 'commoneditor', params:  $parent.getEditorParam($data)}"></div>
							 <!-- /ko -->
							 </div>
	                  	</td>
	                  	<!-- /ko -->
	                  	<!-- /ko -->
	                  	 <!-- ko if: isShowTempColumn -->
			             <td></td>
			             <!-- /ko -->
	               	</tr>
	                <!-- /ko -->
	                
	              </tbody>
	            </table>
	        </div>
        </div>
        
        <!-- 锁定操作列表格 -->
        <!-- ko if: isAllowOperations -->
        <div class="table-operations">
	        <div class="tableHeader">
			<table class="table" data-bind='css:{
			"table-bordered": isShowBorder,
			"table-striped": isShowStripe,
			"table-hover": isShowHover,
			"table-condensed": isShowCondense
			}'>
	         <thead>
	           <tr>
	             <th data-bind="'visible': (isAllowOperations() || _hasVScroll()),style:{width:_headerOperationsColumnWidth,padding:(!isAllowOperations()&&!isShowCondense()?'5px':null)}">
	             	<!-- ko if: isAllowOperations -->
	             		<!--ko text: cube.msg('OPERATIONS')--><!--/ko-->
	             	<!-- /ko -->
	             </th>
	           </tr>
	         </thead>
	       </table>
	    </div>
	    <div class="tableBody" data-bind="style:{height: _bodyHeight,  'max-height':(maxHeight()!='auto' && height() == 'auto')?_bodyMaxHeight:'none'},css:{hasvscroll:_hasVScroll}">
		<table class="table" data-bind='css:{
			"table-bordered": isShowBorder,
			"table-striped": isShowStripe,
			"table-hover": isShowHover,
			"table-condensed": isShowCondense
			}'>
	              <tbody>
	                 <!-- ko if: items().length == 0 && !_isSetHeight() -->
	                	<tr>
	                		<td data-bind="style:{width:operationsColumnWidth}"></td>
	                	</tr>
	                <!-- /ko -->
	              	<!-- ko foreach: { data: items, as: 'item' }-->
	              	<!-- ko if: item!=null -->
	                <tr data-bind='css:$parent._selectedItem()==item?"info":"", event:{dblclick: function() {$parent.dblclick(item)}}'>
	                 <td data-bind="'visible': $parent.isAllowOperations,style:{width:$parent.operationsColumnWidth,textAlign:$parent.operationsColumnAlign}">
		                  <!-- ko if: (!$parent._isEdited() || $parent._selectedItem() != item)-->
		                  	<!-- ko if: !$parent.isAllEdited() -->
		                  	<a href="" data-bind='text: $parent.isShowEditBtnText()?cube.msg("EDIT"):"", css:{"icon-edit":!$parent.isShowEditBtnText()}, attr:{title: cube.msg("EDIT")}, visible: $parent.isAllowEdit, click: function(){$parent.editItem(item,$index())}, clickBubble: false'></a>
		                  	<!-- /ko -->
		                  	<a href="" data-bind='text: $parent.isShowEditBtnText()?cube.msg("DELETE"):"", css:{"icon-remove":!$parent.isShowEditBtnText()}, attr:{title: cube.msg("DELETE")}, visible: $parent.isAllowDelete, click: $parent.delItem, clickBubble: false'></a>
		                  	<a href="" data-bind='text: $parent.isShowEditBtnText()?cube.msg("MOVEUP"):"", css:{"icon-arrow-up":!$parent.isShowEditBtnText()}, attr:{title: cube.msg("MOVEUP")}, visible: $parent.isAllowShift, click: $parent.shiftupItem, clickBubble: false'></a>
		                  	<a href="" data-bind='text: $parent.isShowEditBtnText()?cube.msg("MOVEDOWN"):"", css:{"icon-arrow-down":!$parent.isShowEditBtnText()}, attr:{title: cube.msg("MOVEDOWN")}, visible: $parent.isAllowShift, click: $parent.shiftdownItem, clickBubble: false'></a>
		                  <!-- /ko -->
		                  <!-- ko if: ($parent._isEdited() && $parent._selectedItem()==item) || $parent.isAllEdited() -->
		                  	<a href="" data-bind='text: $parent.isShowEditBtnText()?cube.msg("SAVE"):"", css:{"icon-save":!$parent.isShowEditBtnText()}, attr:{title: cube.msg("SAVE")},visible: $parent.isShowSave, click: $parent.saveItem, clickBubble: false'></a>
		                  	<!-- ko if: !$parent.isAllEdited() -->
		                  	<a href="" data-bind='text: $parent.isShowEditBtnText()?cube.msg("CANCEL"):"", css:{"icon-share-alt":!$parent.isShowEditBtnText()}, attr:{title: cube.msg("CANCEL")}, click: $parent.cancelSaveItem, clickBubble: false'></a>
		                  	 <!-- /ko -->
		                  <!-- /ko -->
		                  <!-- ko foreach: $parent.customOperations -->
	                    	 <!-- ko if: typeof(icon)!='undefined' -->
	                    	<a href="" data-bind="attr:{title: caption, 'class':icon}, visible: $parents[1].customOperationsVisible(item, typeof(visible)!='undefined'?visible:null), click: function(){click(item)}, clickBubble: false"></a>
	                    	<!-- /ko -->
	                    	<!-- ko if: typeof(icon)=='undefined' -->
	                    	<a href="" data-bind="text:caption,attr:{title: caption}, visible: $parents[1].customOperationsVisible(item, typeof(visible)!='undefined'?visible:null), click: function(){click(item)}, clickBubble: false"></a>
	                    	<!-- /ko -->
	                       <!-- /ko -->
	                  </td>
	                </tr>
	                <!-- /ko -->
	                <!-- /ko -->
	                
	                <!-- ko if:isAllowAppend -->
	               	<tr>
	                  	<td data-bind="'visible': isAllowOperations,style:{width:operationsColumnWidth,textAlign:operationsColumnAlign}">
	                  		<a href="" data-bind='css:{"icon-save":!isShowEditBtnText()},text: isShowEditBtnText()?cube.msg("SAVE"):"", attr:{title: cube.msg("SAVE")},visible: isShowSave, click: saveAppend'></a>
	                  		<a href="" data-bind='css:{"icon-plus":!isShowEditBtnText()},text: isShowEditBtnText()?cube.msg("ADD"):"", attr:{title: cube.msg("ADD")},visible: isShowAdd, click: appendItem'></a>
	                  		<!-- ko foreach: customOperations -->
		                    	 <!-- ko if: typeof(icon)!='undefined' -->
		                    	<a href="" data-bind="attr:{title: caption, 'class':icon}, click: $parent.appendCustomClick, clickBubble: false"></a>
		                    	<!-- /ko -->
		                    	<!-- ko if: typeof(icon)=='undefined' -->
		                    	<a href="" data-bind="text:caption,attr:{title: caption}, click: $parent.appendCustomClick, clickBubble: false"></a>
		                    	<!-- /ko -->
		                    <!-- /ko -->
	                  	</td>
	               	</tr>
	                <!-- /ko -->
	              </tbody>
	            </table>
	        </div>
	        <!-- ko if: _hasHScroll -->
        	<div class="tempScroll"></div>
        	<!-- /ko -->
        </div>
        <!-- /ko -->
        <!-- ko if: watermarkOptions()!=null -->
        <div class="watermark" data-bind="style:{
       	 		opacity: watermarkOptions().alpha,
       	 		color: watermarkOptions().color,
       	 		fontSize: watermarkOptions().fontSize,
       	 		filter: 'progid:DXImageTransform.Microsoft.Alpha(opacity='+watermarkOptions().alpha*100+')'
        	}">
       		<!-- ko foreach: { data: watermarkRows, as: 'row' } -->
       			<!-- ko foreach: { data: $parent.watermarkCols, as: 'col' } -->
       				<div data-bind="style:{
       						left: col.x+($parentContext.$index()%2==0?0:$parents[1].watermarkOptions().indent)+'px',
       						top: row.y+'px',
       						transform: 'rotate(-'+$parents[1].watermarkOptions().rotate+'deg)',
       						width: $parents[1].watermarkOptions().width+'px',
       						height: $parents[1].watermarkOptions().height+'px'
       					}, 
       					text: $parents[1].watermarkOptions().text"></div>
       			<!-- /ko -->
       		<!-- /ko -->
        </div>
        <!-- /ko -->
        <!-- ko if: isShowLoading-->
		<div class="cube modal-backdrop fade loading in loading-data">
			<div style="position: absolute; top: 50%; left: 50%">
				<div style="position: relative; top: -50%; left: -50%; color: #ccc;">
					<img alt="加载中" data-bind="attr:{src: cube.cubepath('$/images/window_loading.gif')}">
				</div>
			</div>
		</div>
		<!-- /ko -->
</div>
<!-- ko if: isAllowPaging -->
<div class="gridpagenavibar">
 	<pagenavibar params="
		size: 'middle',
		showArrow: true,
		isShowBtnText: isShowBtnText,
		showTotal: true,
		showGoto: true,
		showAllPage: false,
		pageTotalCount: _pageCount,
		count: itemCount,
		pageIndex: pageIndex,
		pageVisibleCount: pageVisibleCount,
		pageInfoToLeft: pageInfoToLeft,
		blurGoto: blurGoto,
		loadTime: loadTime,
		isShowLoadTime: isShowLoadTime() && autoLoad(),
		loadTimeFadeout: loadTimeFadeout,
		onPageIndexChanged: onCurrentPageIndexChanged"></pagenavibar>
</div>
<!-- /ko --></div>
<div id="pagenavibar"><div class="cube pagination page" data-bind='attr:{"class": "cube pagination page "+p_size()}'>
  <!-- ko if:isShowLoadTime() -->
  <ul class="loadtime">
    <li class="disabled">
      <a>
        <span aria-hidden="true" data-bind="text:cube.msg('LOADED_TIME',loadTime())"></span>
      </a>
    </li>
  </ul>
  <!-- /ko -->
  <!-- ko if:showArrow() -->
  <ul>
    <li class="" data-bind='attr:{"class": (pageIndex() == 1 || oldPageIndex() == 1 || pageTotalCount() <= 1?"disabled":"")} '>
      <a href="#" aria-label="First"  data-bind='click: onFirstPageClick'>
      	<!-- ko if:firstIcon() == "" -->  
	      	<!-- ko if:!isShowBtnText() -->
	        <span aria-hidden="true">&lceil;&lt;</span>
	        <!-- /ko -->
	        <!-- ko if:isShowBtnText() -->
	        <span aria-hidden="true" data-bind="text: cube.msg('FIRST')"></span>
	        <!-- /ko -->
        <!-- /ko -->
       	<!-- ko if:firstIcon() != "" -->
        <span data-bind='attr:{"class":firstIcon}'></span>
        <!-- /ko -->
      </a>
    </li>
    <li class="" data-bind='attr:{"class": (pageIndex() == 1 || oldPageIndex() == 1 || pageTotalCount() <= 1?"disabled":"")} '>
      <a href="#" aria-label="Previous" data-bind='click: onPagePreviousClick'>
       	<!-- ko if:previousIcon() == "" -->  
	        <!-- ko if:!isShowBtnText() -->
	        <span aria-hidden="true">&lt;</span>
	        <!-- /ko -->
	        <!-- ko if:isShowBtnText() -->
	        <span aria-hidden="true" data-bind="text: cube.msg('PREVIOUS')"></span>
	        <!-- /ko -->
	    <!-- /ko -->
	   	<!-- ko if:previousIcon() != "" -->
        <span data-bind='attr:{"class":previousIcon}'></span>
        <!-- /ko -->
      </a>
    </li>
  </ul>
  <!-- /ko -->
  <ul data-bind='foreach: pageNumbers'>
    <li>
      <a href="#" class="" data-bind='attr:{"class": ($parent.pageIndex()==text||$parent.oldPageIndex()==text?"selected":"")}, click: $parent.onPageIndexClick, text: text' >
      </a>
    </li>
  </ul>
  <!-- ko if:showArrow() -->
  <ul>
    <li class="" data-bind='attr:{"class": (pageIndex() == pageTotalCount() || oldPageIndex() == pageTotalCount() || pageTotalCount() <= 1 ?"disabled":"")} '>
      <a href="#" aria-label="Next" data-bind='click: onPageNextClick'>
        <!-- ko if:nextIcon() == "" -->     
	        <!-- ko if:!isShowBtnText() -->
	        <span aria-hidden="true">&gt;</span>
	        <!-- /ko -->
	        <!-- ko if:isShowBtnText() -->
	        <span aria-hidden="true" data-bind="text: cube.msg('NEXT')"></span>
	        <!-- /ko -->
	    <!-- /ko -->
	    <!-- ko if:nextIcon() != "" -->
        <span data-bind='attr:{"class":nextIcon}'></span>
        <!-- /ko -->
      </a>
    </li>
    <li class="" data-bind='attr:{"class": (pageIndex() == pageTotalCount() || oldPageIndex() == pageTotalCount() || pageTotalCount() <= 1 ?"disabled":"")} '>
      <a href="#" aria-label="End" data-bind='click: onEndPageClick'>       
       <!-- ko if:endIcon() == "" -->
	    	<!-- ko if:!isShowBtnText() -->
	      	<span aria-hidden="true">&gt;&rfloor;</span>
	        <!-- /ko -->
	        <!-- ko if:isShowBtnText() -->
	       	<span aria-hidden="true" data-bind="text: cube.msg('END')"></span>
	        <!-- /ko -->
    	<!-- /ko -->
        <!-- ko if:endIcon() != "" -->
        <span data-bind='attr:{"class":endIcon}'></span>
        <!-- /ko -->
      </a>
    </li>
  </ul>
  <!-- /ko -->
  <!-- ko if:showTotal() -->
  <ul data-bind="css:{pageInfo: pageInfoToLeft}">
    <li  class="disabled">
      <a>
      	<i style="font-style:normal" data-bind="text:cube.msg('TOTAL')">共</i><span data-bind="text: pageTotalCount"></span><i style="font-style:normal" data-bind="text:cube.msg('PAGE')">页</i>，
      	<span data-bind="text: count"></span><i style="font-style:normal" data-bind="text:cube.msg('ITEMCOUNT')">条记录</i>
      </a>
    </li>
  </ul>
  <!-- /ko -->
  <!-- ko if:showGoto() -->
  <ul>
    <li class="disabled">
      <a data-bind="text:cube.msg('TO')">到</a>
    </li>
  </ul>
  <ul>
    <li>
      <input type="text" data-bind="value: pageIndex,valueUpdate: blurGoto()?'blur':'afterkeydown', event:{keydown: _input_keydown,keypress:_input_keypress}"/>
    </li>
  </ul>
  <ul>
    <li class="disabled">
      <a data-bind="text:cube.msg('PAGE')">页</a>
    </li>
  </ul>
  <!-- /ko -->
</div></div>
<div id="searchbox"><form data-bind="attr:{style:style, 'class': 'cube searchbox form-inline row-fluid '+ (isLineFeed()?'linefeed':'')}">
	<!-- ko foreach: fields-->
	<div class="field" data-bind="visible:typeof(visible)=='undefined' || visible, css: $parent._getSpanNum($data, 0)">
		<label class="control-label" data-bind="css: $parent._getSpanNum($data, 1),style:{ width: (typeof(captionWidth)!='undefined'?captionWidth:null)}">
			<!-- ko if: typeof(nullable)!='undefined'&&!nullable() -->
	    	<span class="required">*</span>
	    	 <!-- /ko -->
	    	 <!-- ko if: typeof(caption) != 'undefined' -->
			<span data-bind='text:caption'></span>
			 <!-- /ko -->
			 <!-- ko if: $parent.separator != '' &&  (typeof(showSeparator) == 'undefined' || showSeparator == true)-->
			 <span data-bind='text:$parent.separator'></span>
			  <!-- /ko -->
		</label>
		<div data-bind="css: $parent._getSpanNum($data, 2)">
		<!-- ko if: typeof(editorType) != 'undefined' && editorType == "DateTimeEditor" -->
			<div data-bind="attr:{id: name}, component: {id: name, name: 'datetimeeditor', params: $parent.getEditorParam($data) }"></div>
		<!-- /ko -->
		<!-- ko if: typeof(editorType) == 'undefined' || (editorType != "DateTimeEditor" && editorType != "FileEditor" && editorType != "RichEditor") -->
		<div data-bind="attr:{id: name}, component: {id: name, name: 'commoneditor', params:  $parent.getEditorParam($data)}"></div>
		<!-- /ko -->
		
		<!-- ko if: $parent.validHintType()=="inline" && typeof(validHint)!='undefined' && validHint() !="" -->
         <span class="help-inline" data-bind="text:validHint()"></span>
         <!-- /ko -->
		</div>
         
		<!-- ko if: typeof(displayButton) != 'undefined' && displayButton -->
		<button type="button" class="btn btn-default afterBtn" data-bind="click: typeof(onClick)!='undefined'?onClick:null">
		 	<!-- ko if:	typeof(displayButtonText) != 'undefined'-->
		 		<!-- ko text:displayButtonText --><!-- /ko -->
		 	<!-- /ko -->
		 	<!-- ko if:	typeof(displayButtonText) == 'undefined' && typeof(displayButtonIcon) != 'undefined' -->
		 	 <span data-bind="css: 'icon-' + displayButtonIcon" aria-hidden="false"></span>
		 	<!-- /ko -->
		 	<!-- ko if:	typeof(displayButtonText) == 'undefined' && typeof(displayButtonIcon) == 'undefined' -->
		 	 <span data-bind="css: 'icon-reorder'" aria-hidden="false"></span>
		 	<!-- /ko -->
	    </button>
		<!-- /ko -->
	</div>
	<!-- /ko -->
	<!-- ko if: displaySearchButton -->
	<div class="control-group" data-bind="css:_getSpanNum(null, 3), style:{textAlign: buttonAlign()}">
		<!-- ko if: isDefaultLayout -->
		<div class="controls" data-bind="css:_getSpanNum(null, 4)"></div>
		<!-- /ko -->
    	<div class="controls" data-bind="css: isDefaultLayout()?_getSpanNum(null, 5):''">
			<input type="button" class="btn btn-primary" data-bind="value: cube.msg('SEARCH'),click:search"></input>
			<!-- ko if: displayResetBtns -->
			<input type="button" class="btn btn-success" data-bind="value: cube.msg('RESET'),click:reset"></input>
	        <!-- /ko -->
			<!-- ko foreach: customBtns -->
				<button data-bind="text:text, attr:{'class': 'btn btn-'+(typeof(type)!='undefined'?type:'')}, visible: typeof(visible)!='undefined'?visible:true, event:{click: function(){$parent.customBtnClick(click, typeof(valid)!='undefined'?valid:false)}}, clickBubble: false"></button>
	        <!-- /ko -->
		</div>
  	</div>
	<!-- /ko -->
</form></div>
<div id="tree"><div data-bind='attr:{"class":"cube tree"}, css:{treeshadow:isShowBorderShadow,borderhide:!isShowBorder(), menu: type() == "menu", whiteSpace: (height()!=="auto")?"nowrap":"initial"},
style:{width: width,height: height, overflow: (width()!="auto"||height()!="auto")?"auto":"hidden"}'>
<ul class='treenode' data-bind='foreach: nodes'>
	<li data-bind='visible: typeof(visible)=="undefined"||visible(), css: {"active": ($parent.selectedNode()==$data||id==$parent.selectedNodeId()), "nodeexpanded":expanded(), "nodenotexpanded":!expanded()},
	 event:{mouseenter: $parent.showEdit,mouseleave: $parent.hideEdit,
	contextmenu:function(data, event){ $parent.ctxtmenu(data, event);}, dblclick: $parent.dblClickNode}'>
		<!-- ko if: hasChildren -->
			<span data-bind="attr:{'class': expanded() ? 'expanded':'notexpanded'}, click: $parent.expandNode"></span>
		<!-- /ko -->
		<!-- ko if : $parent.isShowCheckbox -->
			<!-- ko if : $parent.checkboxType() == "checkbox" -->
			<input type="checkbox" data-bind="enable: $parent.getEnable($data),value:$data,checked: $parent.checkedNode,click: $parent.checkNode">
			<label class="checkbox_label" data-bind="css:{'checkbox_checked': (typeof(checked)!='undefined' && checked()), 'checkbox_readonly': !$parent.getEnable($data), indeterminate:(typeof(indeterminate)!='undefined' && indeterminate())}"></label>
			<!-- /ko -->
			<!-- ko if : $parent.checkboxType() == "radio" -->
			<input type="radio" data-bind="attr:{name:'node_'+level},enable: $parent.getEnable($data),value:$data, click: $parent.checkNode">
			<label class="radio_label" data-bind="css:{'checkbox_checked': (typeof(checked)!='undefined' && checked()), 'checkbox_readonly': !$parent.getEnable($data), indeterminate:(typeof(indeterminate)!='undefined' && indeterminate())}"></label>
			<!-- /ko -->
		<!-- /ko -->
		
		<!-- ko if: $parent.type()=="menu" && typeof(icon) != "undefined" -->
			<span data-bind='attr:{"class":"icon icon-"+icon}'></span>
		<!-- /ko -->
		<!-- ko if: typeof(imageUrl) != "undefined" && imageUrl() != null -->
			<img data-bind='attr:{"src": imageUrl}'></img>
		<!-- /ko -->
		
		<!-- ko if:$parent._editedItem()==$data -->
			<!-- ko component: { name: 'commoneditor', 
				params: { value: $parent._editedItem()['text'],
				editorType: 'TextEditor',
				nullable: false,
				width: '75px'} } --><!-- /ko -->
		<!-- /ko -->
		<!-- ko if:$parent._editedItem()!= $data -->
			<a href='' data-bind='text: text,click: $parent.selectNode'></a>
		<!-- /ko -->
		
		<!-- ko if: $parent.isAllowEdit() || $parent.ctxMenuEdit()-->
			<!-- ko if:$parent._editedItem()== $data -->
				<span class='icon-save' data-bind='attr:{title: cube.msg("SAVE")}, click: $parent.saveItem, clickBubble: false'></span>
				<span class='icon-share-alt' data-bind='attr:{title: cube.msg("CANCEL")}, click: $parent.cancelSaveItem, clickBubble: false'></span>
			<!-- /ko -->
			<!-- ko if:$parent._editedItem()!= $data && $parent._showeditedItem()== $data && !$parent.ctxMenuEdit() -->
				<span class='icon-edit' data-bind='attr:{title: cube.msg("EDIT")}, click: $parent.editItem, clickBubble: false'></span>
			<!-- /ko -->
		<!-- /ko -->
		<!-- ko if:  ($parent.selectedNode()==$data||id == $parent.selectedNodeId()) && $parent.isNodeShowLoading()-->
		<div class="cube modal-backdrop fade loading in loading-data-node">
			<div style="position: absolute;">
				<div style="position: relative; color: #ccc;">
					<img alt="加载中" data-bind="attr:{src: cube.cubepath('$/images/window_loading.gif')}">
				</div>
			</div>
		</div>
		<!-- /ko -->
	</li>
	<!-- ko if: (typeof(childNodes) == 'function'?childNodes().length>0:childNodes.length>0) && expanded() -->
		<div data-bind='component:{name: "treenodetmpl", params: {nodes: typeof(childNodes)!="undefined"?childNodes:[], selectedNode: $parent.selectedNode,selectedNodeId:$parent.selectedNodeId, checkedNode: $parent.checkedNode, isShowCheckbox:$parent.isShowCheckbox,type:$parent.type,
			selectNode: $parent.selectNode, ctxtmenu: $parent.ctxtmenu, dblClickNode: $parent.dblClickNode, expandNode: $parent.expandNode,
			isAllowEdit: $parent.isAllowEdit,_editedItem: $parent._editedItem,
			saveItem: $parent.saveItem, cancelSaveItem: $parent.cancelSaveItem, editItem: $parent.editItem,
			checkNode: $parent.checkNode,onToggleExpand: $parent.onToggleExpand, level:$parent.level(),
			isNodeShowLoading: $parent.isNodeShowLoading,getEnable: $parent.getEnable,checkboxType:$parent.checkboxType,
			ctxMenuEdit: $parent.ctxMenuEdit
			}}'></div>
	<!-- /ko -->
</ul>

<!-- ko if: isShowLoading-->
<div class="cube modal-backdrop fade loading in loading-data">
	<div style="position: absolute; top: 50%; left: 50%">
		<div style="position: relative; top: -50%; left: -50%; color: #ccc;">
			<img alt="加载中" data-bind="attr:{src: cube.cubepath('$/images/window_loading.gif')}">
		</div>
	</div>
</div>
<!-- /ko -->
</div></div>
<div id="treegrid"><div class="cube grid treegrid" data-bind="attr:{style:style},style:{height:height,  'max-height':(maxHeight()!='auto' && height() == 'auto')?maxHeight:'none'},css:{hasScroll:items()!=null&&items().length == 0,autowrap: isAllowAutowrap}">
	<div class="tableHeader">
	<table class="table" data-bind='css:{
		"table-bordered": isShowBorder,
		"table-striped": isShowStripe,
		"table-hover": isShowHover,
		"table-condensed": isShowCondense
		}'>
         <thead>
           <tr>
             <!-- ko ifnot: isAllowSort -->
             	<!-- ko if: markColumn() != null -->
          		<th data-bind="style:{width: typeof(markColumn().width)!='undefined'?markColumn().width:'30px'}, text:  markColumn().caption"></th>
         		<!-- /ko -->
         		  
         		<!-- ko if: isShowCheckBox -->
          		<th width="30px">
          			<!-- ko ifnot: isRadio -->
          			<input type="checkbox" data-bind="checked: _selectedAll">
          			<!-- /ko -->
          		</th>
         		<!-- /ko -->
         		<!-- ko if: isShowRowNumber -->
          		<th data-bind='style:{width:rowNumberWidth()}'>
          			<!-- ko if: rowNumberColumnName() == null -->
          				<!--ko text: cube.msg('ROWNUM')--><!--/ko-->
          			<!-- /ko -->
          			<!-- ko if: rowNumberColumnName() != null -->
          				<!--ko text: rowNumberColumnName--><!--/ko-->
          			<!-- /ko -->
          		</th>
         		  <!-- /ko -->
              <!-- ko foreach: columns -->
              	<!-- ko if:((name == $parent.primaryKey() && $parent.isShowPrimaryKey()== true) || name != $parent.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
              	<th data-bind="style:{width: typeof(width)!='undefined'?width:$parent.columnDefaultWidth()}, text: caption, event:{mousemove: function(data, event){$parent.mousemove($element,event)}, mousedown: function(data,event){$parent.mousedown($element,data,event,$index())},mouseup:$parent.mouseup}"></th>
              	 <!-- /ko -->
              <!-- /ko -->
             <!-- /ko -->
             <!-- ko if: isAllowSort -->
             	<!-- ko if: markColumn() != null -->
          		<th data-bind="style:{width: typeof(markColumn().width)!='undefined'?markColumn().width:'30px'}, text:  markColumn().caption"></th>
         		<!-- /ko -->
         		<!-- ko if: isShowCheckBox -->
          		<th width="30px">
          			<!-- ko ifnot: isRadio -->
          			<input type="checkbox" data-bind="checked: _selectedAll">
          			<!-- /ko -->
          		</th>
         		<!-- /ko -->
         		<!-- ko if: isShowRowNumber -->
          		<th data-bind='style:{width:rowNumberWidth()}'>
          			<!-- ko if: rowNumberColumnName() == null -->
          				<!--ko text: cube.msg('ROWNUM')--><!--/ko-->
          			<!-- /ko -->
          			<!-- ko if: rowNumberColumnName() != null -->
          				<!--ko text: rowNumberColumnName--><!--/ko-->
          			<!-- /ko -->
          		</th>
         		  <!-- /ko -->
              <!-- ko foreach: columns -->
              	<!-- ko if:((name == $parent.primaryKey() && $parent.isShowPrimaryKey()== true) || name != $parent.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
              	<th  class="sort"  data-bind="style:{width: typeof(width)!='undefined'?width:$parent.columnDefaultWidth()}, event:{mousemove: function(data, event){$parent.mousemove($element,event)}, mousedown: function(data,event){$parent.mousedown($element,data,event,$index())},mouseup:$parent.mouseup}">
              		<div data-bind="attr:{title: cube.msg('SORTING')}, click:$parent.sortGrid,mousedownBubble: false">
               		<!-- ko if: $parent.sortName()== name -->
               			<span data-bind='attr:{"class": $parent.sortType()==1?"icon-arrow-up":"icon-arrow-down"}'></span>
               		<!-- /ko -->
               		<span data-bind='text: caption'></span>
              		</div>
              	</th>
              	 <!-- /ko -->
              <!-- /ko -->
             <!-- /ko -->
             <!-- ko if: isShowTempColumn -->
             <th data-bind="event:{mousemove: function(data, event){mousemove($element,event)}, mousedown: function(data,event){mousedown($element,null,event,-1)},mouseup:mouseup}"></th>
             <!-- /ko -->
             <th data-bind="'visible': (isAllowOperations() || _hasVScroll()),style:{width:_headerOperationsColumnWidth,padding:(!isAllowOperations()&&!isShowCondense()?'5px':null)}">
             	<!-- ko if: isAllowOperations -->
             		<!--ko text: cube.msg('OPERATIONS')--><!--/ko-->
             	<!-- /ko -->
             </th>
           </tr>
         </thead>
       </table>
    </div>
    <div class="tableBody" data-bind="style:{height: _bodyHeight,  'max-height':(maxHeight()!='auto' && height() == 'auto')?_bodyMaxHeight:'none'},css:{hasvscroll:_hasVScroll}">
	<table class="table" data-bind='css:{
		"table-bordered": isShowBorder,
		"table-striped": isShowStripe,
		"table-hover": isShowHover,
		"table-condensed": isShowCondense
		}'>
              <tbody>
              	<!-- ko foreach: { data: items, as: 'item' }-->
              	<!-- ko if: item!=null -->
                 	<!-- ko component:{name: "treegriditem", params:{item: item, grid: $parent}} --><!-- /ko -->
                <!-- /ko -->
                <!-- /ko -->
                
                <!-- ko if:isAllowAppend -->
               	<tr>
               		<!-- ko if: markColumn() != null -->
	          		<td style="text-align:center" data-bind="style:{width: typeof(markColumn().width)!='undefined'?markColumn().width:'30px'}"></td>
	         	    <!-- /ko -->
           			<!-- ko if: isShowCheckBox -->
              			<td width="30px"></td>
              		<!-- /ko -->
              		<!-- ko if: isShowRowNumber -->
            			<td data-bind='style:{width:rowNumberWidth()}'></td>
           			<!-- /ko -->
               		<!-- ko foreach: appendColumns -->
               		<!-- ko if:((name == $parent.primaryKey() && $parent.isShowPrimaryKey()== true) || name != $parent.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
               		<td data-bind="style:{width: typeof(width)!='undefined'?width:$parent.columnDefaultWidth(),overflow:'visible'}">
               			<div data-bind="attr: {'class':'control-group '+validStatus(),title:validHint()}">
               			<!-- ko if: editorType == "DateTimeEditor" -->
						<div data-bind="component: { name: 'datetimeeditor', params: $parent.getEditorParam($data) }"></div>
				         <!-- /ko -->
				         <!-- ko if: editorType == "FileEditor" -->
					      <div data-bind="component: { name: 'fileeditor', params:  $parent.getEditorParam($data)}"></div>
			            <!-- /ko -->
				         <!-- ko if: editorType != "DateTimeEditor" && editorType != "FileEditor" -->
						<div data-bind="component: { name: 'commoneditor', params:  $parent.getEditorParam($data)}"></div>
						 <!-- /ko -->
						 </div>
                  	</td>
                  	<!-- /ko -->
                  	<!-- /ko -->
                  	 <!-- ko if: isShowTempColumn -->
		             <td></td>
		             <!-- /ko -->
                  	<td data-bind="'visible': isAllowOperations,style:{width:operationsColumnWidth,textAlign:operationsColumnAlign}">
                  		<a href="" data-bind='css:{"icon-save":!isShowEditBtnText()},text: isShowEditBtnText()?cube.msg("SAVE"):"", attr:{title: cube.msg("SAVE")},visible: isShowSave, click: saveAppend'></a>
                  		<a href="" data-bind='css:{"icon-plus":!isShowEditBtnText()},text: isShowEditBtnText()?cube.msg("ADD"):"", attr:{title: cube.msg("ADD")},visible: isShowAdd, click: appendItem'></a>
                  		<!-- ko foreach: customOperations -->
	                    	 <!-- ko if: typeof(icon)!='undefined' -->
	                    	<a href="" data-bind="attr:{title: caption, 'class':icon}, click: $parent.appendCustomClick, clickBubble: false"></a>
	                    	<!-- /ko -->
	                    	<!-- ko if: typeof(icon)=='undefined' -->
	                    	<a href="" data-bind="text:caption,attr:{title: caption}, click: $parent.appendCustomClick, clickBubble: false"></a>
	                    	<!-- /ko -->
	                    <!-- /ko -->
                  	</td>
               	</tr>
               	
               	
                <!-- /ko -->
                
              </tbody>
            </table>
        </div>
        <!-- ko if: watermarkOptions()!=null -->
        <div class="watermark" data-bind="style:{
       	 		opacity: watermarkOptions().alpha,
       	 		color: watermarkOptions().color,
       	 		fontSize: watermarkOptions().fontSize,
       	 		filter: 'progid:DXImageTransform.Microsoft.Alpha(opacity='+watermarkOptions().alpha*100+')'
        	}">
       		<!-- ko foreach: { data: watermarkRows, as: 'row' } -->
       			<!-- ko foreach: { data: $parent.watermarkCols, as: 'col' } -->
       				<div data-bind="style:{
       						left: col.x+($parentContext.$index()%2==0?0:$parents[1].watermarkOptions().indent)+'px',
       						top: row.y+'px',
       						transform: 'rotate(-'+$parents[1].watermarkOptions().rotate+'deg)',
       						width: $parents[1].watermarkOptions().width+'px',
       						height: $parents[1].watermarkOptions().height+'px'
       					}, 
       					text: $parents[1].watermarkOptions().text"></div>
       			<!-- /ko -->
       		<!-- /ko -->
        </div>
        <!-- /ko -->
        <!-- ko if: isShowLoading-->
		<div class="cube modal-backdrop fade loading in loading-data">
			<div style="position: absolute; top: 50%; left: 50%">
				<div style="position: relative; top: -50%; left: -50%; color: #ccc;">
					<img alt="加载中" data-bind="attr:{src: cube.cubepath('$/images/window_loading.gif')}">
				</div>
			</div>
		</div>
		<!-- /ko -->
</div>
<!-- ko if: isAllowPaging -->
<div class="gridpagenavibar">
 	<pagenavibar params="
		size: 'middle',
		showArrow: true,
		isShowBtnText: isShowBtnText,
		showTotal: true,
		showGoto: true,
		showAllPage: false,
		pageTotalCount: _pageCount,
		count: itemCount,
		pageIndex: pageIndex,
		pageVisibleCount: pageVisibleCount,
		pageInfoToLeft: pageInfoToLeft,
		blurGoto: blurGoto,
		loadTime: loadTime,
		isShowLoadTime: isShowLoadTime() && autoLoad(),
		loadTimeFadeout: loadTimeFadeout,
		onPageIndexChanged: onCurrentPageIndexChanged"></pagenavibar>
</div>
<!-- /ko --></div>
<div id="treegriditem"><!-- ko if: item != null -->
<tr
	data-bind='css: grid._selectedItem()==item?"info":"", event:{dblclick: function() {grid.dblclick(item)}}'>
	<!-- ko if: grid.markColumn() != null -->
	<td class="table-markcolumn"
		data-bind="style:{width: typeof(grid.markColumn().width)!='undefined'?grid.markColumn().width:'30px'}, html: grid.renderMarkCell(item, $element) "></td>
	<!-- /ko -->
	<!-- ko if: grid.isShowCheckBox -->
	<td width="30px" class="table-checkbox"><input name="rowCheckbox"
		type="checkbox"
		data-bind="visible: grid.checkboxVisible(item),attr:{type:grid.isRadio()?'radio':'checkbox',value:item[grid.primaryKey()]},checked: grid._selectedIds">
	</td>
	<!-- /ko -->
	<!-- ko if: grid.isShowRowNumber -->
	<td class="table-rownum" data-bind='style:{width:grid.rowNumberWidth()}'>
		<!-- ko if: level == 1 -->
		<span data-bind=" text:(grid.isRowNumberSerial()?(grid.pageIndex()-1)*grid.pageSize():0) + $index()+1"></span>
		<!-- /ko -->
		<!-- ko if: level > 1 -->
		<span data-bind=" text:index + '.'+ ($index()+1)"></span>
		<!-- /ko -->
	</td>
	<!-- /ko -->
	<!-- ko if:(grid._selectedItem()!=item || grid._isEdited()== false) && !grid.isAllEdited() -->
	<!-- ko foreach: {data:grid.columns,as:'column'} -->
	<!-- ko if:((column.name == $parent.grid.primaryKey() && $parent.grid.isShowPrimaryKey()== true) || column.name != $parent.grid.primaryKey()) && (typeof(column.visible)=='undefined' || column.visible) -->
	<td
		data-bind="css:{'wrapreverse':typeof(column.isAllowAutowrap)!='undefined'&&column.isAllowAutowrap!=$parent.grid.isAllowAutowrap()},
					style:{'text-align': column.align,width: typeof(width)!='undefined'?width:$parent.grid.columnDefaultWidth(),'padding-left':column.name==$parent.grid.treeField()&&$parent.level>1?((20*($parent.level-1))+'px'):null},
           			event:{
           				mouseenter:function(){$parent.grid.mouseenter($parent.item[$parent.grid.primaryKey()], $parent.item[column.name], column, $element)},
           				mouseleave:function(){$parent.grid.mouseleave($parent.item[$parent.grid.primaryKey()], $parent.item[column.name], column, $element)},
           				dblclick:function(){column.onDblClick?column.onDblClick($parent.item[$parent.grid.primaryKey()],$parent.item[column.name], column):null},
           				click: function() {column.onClick?column.onClick($parent.item[$parent.grid.primaryKey()],$parent.item[column.name], column):$parent.grid.setSelectedItem($parent.item, $parentContext.$index(),$parent.parentItem)}
           			}">
         <!-- ko if:  column.name==$parent.grid.treeField() && ((typeof($parent.item.items) != 'undefined' && $parent.item.items().length > 0) || $parent.item.hasChildren === true) -->
         <span data-bind="attr:{'class':($parent.expanded()?'icon-caret-down':'icon-caret-right')},click: $parent.expandItem"></span>
         <!-- /ko -->
         <span data-bind="html:$parent.grid.renderCell($parent.item[column.name], $element, column, $parent.item)"></span>
    </td>
	<!-- /ko -->
	<!-- /ko -->
	<!-- /ko -->

	<!-- ko if:(grid._isEdited()== true && grid._selectedItem()==item) || grid.isAllEdited() -->
	<!-- ko foreach: grid.columns -->
	<!-- ko if:((name == $parent.grid.primaryKey() && $parent.grid.isShowPrimaryKey()== true) || name != $parent.grid.primaryKey()) && (typeof(visible)=='undefined' || visible) -->
	<td
		data-bind="style:{width: typeof(width)!='undefined'?width:$parent.grid.columnDefaultWidth(),overflow: (editorType != 'NoEditor'?'visible':null)}">
		<!-- ko if: editorType == "NoEditor" -->
		<div
			data-bind="html: $parent.grid.renderCell($parent.item[$data.name], $element, $data, $parent.item)"></div>
		<!-- /ko --> 
		<!-- ko if: editorType != "NoEditor" -->
		<div
			data-bind="attr: {'class':'control-group '+(typeof(validStatus)!='undefined'?validStatus():''),
	                  				title:(typeof(validHint)!='undefined'?validHint():'')}">
			<!-- ko if: editorType == "DateTimeEditor" -->
			<div data-bind="component: { name: 'datetimeeditor', params: $parent.grid.getEditorParam($data, $parent.item, $parentContext.$index())}"></div>
			<!-- /ko -->
			<!-- ko if: editorType == "FileEditor" -->
			<div data-bind="component: { name: 'fileeditor', params: $parent.grid.getEditorParam($data, $parent.item, $parentContext.$index())}"></div>
			<!-- /ko -->
			<!-- ko if: editorType != "DateTimeEditor" && editorType != "FileEditor" -->
			<div data-bind="component: { name: 'commoneditor', params:  $parent.grid.getEditorParam($data, $parent.item, $parentContext.$index())}"></div>
			<!-- /ko -->
		</div> 
		<!-- /ko -->
	</td>
	<!-- /ko -->
	<!-- /ko -->
	<!-- /ko -->
	<!-- ko if: grid.isShowTempColumn -->
	<td></td>
	<!-- /ko -->
	<td data-bind="'visible': grid.isAllowOperations,
		style:{width:grid.operationsColumnWidth,textAlign:grid.operationsColumnAlign}">
		<!-- ko if: (!grid._isEdited() || grid._selectedItem() != item)-->
			<!-- ko if: !grid.isAllEdited() --> 
				<a href="" data-bind='text: grid.isShowEditBtnText()?cube.msg("EDIT"):"", 
					css:{"icon-edit":!grid.isShowEditBtnText()}, 
					attr:{title: cube.msg("EDIT")}, 
					visible: grid.isAllowEdit, 
					click: function(){grid.editItem(item,$index(),parentItem)}, clickBubble: false'></a>
			<!-- /ko --> 
		<a href="" data-bind='text: grid.isShowEditBtnText()?cube.msg("DELETE"):"", 
			css:{"icon-remove":!grid.isShowEditBtnText()}, 
			attr:{title: cube.msg("DELETE")}, 
			visible: grid.isAllowDelete, 
			click: function(){grid.delItem(item)}, clickBubble: false'></a>
		<a href="" data-bind='text: grid.isShowEditBtnText()?cube.msg("MOVEUP"):"", 
			css:{"icon-arrow-up":!grid.isShowEditBtnText()},
			attr:{title: cube.msg("MOVEUP")}, 
			visible: grid.isAllowShift, 
			click: function(){grid.shiftupItem(item,parentItem)}, clickBubble: false'></a>
		<a href="" data-bind='text: grid.isShowEditBtnText()?cube.msg("MOVEDOWN"):"", 
			css:{"icon-arrow-down":!grid.isShowEditBtnText()}, 
			attr:{title: cube.msg("MOVEDOWN")}, 
			visible: grid.isAllowShift, 
			click:  function(){grid.shiftdownItem(item,parentItem)}, clickBubble: false'></a>
		<!-- /ko --> 
		<!-- ko if: (grid._isEdited() && grid._selectedItem()==item) || grid.isAllEdited() -->
			<a href="" data-bind='text: grid.isShowEditBtnText()?cube.msg("SAVE"):"", 
				css:{"icon-save":!grid.isShowEditBtnText()}, 
				attr:{title: cube.msg("SAVE")},
				visible: grid.isShowSave, 
				click: grid.saveItem, clickBubble: false'></a>
			<!-- ko if: !grid.isAllEdited() --> 
			<a href="" data-bind='text: grid.isShowEditBtnText()?cube.msg("CANCEL"):"", 
				css:{"icon-share-alt":!grid.isShowEditBtnText()}, 
				attr:{title: cube.msg("CANCEL")}, 
				click: grid.cancelSaveItem, clickBubble: false'>
			</a>
			<!-- /ko --> 
		<!-- /ko --> 
		<!-- ko foreach: grid.customOperations -->
			<!-- ko if: typeof(icon)!='undefined' --> 
			<a href="" data-bind="attr:{title: caption, 'class':icon}, 
				visible: $parent.grid.customOperationsVisible(item, typeof(visible)!='undefined'?visible:null), 
				click: function(){click($parent.item)}, clickBubble: false"></a>
			<!-- /ko --> 
			<!-- ko if: typeof(icon)=='undefined' --> 
			<a href="" data-bind="text:caption,attr:{title: caption}, 
				visible: $parent.grid.customOperationsVisible(item, typeof(visible)!='undefined'?visible:null), 
				click: function(){click($parent.item)}, clickBubble: false"></a>
			<!-- /ko --> 
		<!-- /ko -->
	</td>
</tr>
	<!-- ko if: typeof(item.items) != 'undefined' && expanded() --> 
		<!-- ko foreach: { data: item.items, as: 'childitem' }-->
			<!-- ko if: childitem != null -->
				<!-- ko component:{name: "treegriditem", params:{item: childitem, parentItem: $parent.item, grid: $parent.grid, level: $parent.level + 1,index: $parent.level == 1?(($parent.grid.isRowNumberSerial()?($parent.grid.pageIndex()-1)*$parent.grid.pageSize():0) + $parentContext.$index()+1):($parent.index + '.'+ ($index()+1))}} --><!-- /ko -->
			<!-- /ko -->
		<!-- /ko -->
	<!-- /ko -->
<!-- /ko --></div>
<div id="treenodetmpl"><ul class='treenode' data-bind='foreach: nodes'>
	 <li data-bind='visible: typeof(visible)=="undefined"||visible(),css: {"active": ($parent.selectedNode()==$data||id == $parent.selectedNodeId()), "nodeexpanded":expanded(), "nodenotexpanded":!expanded()},
	 event:{mouseenter: $parent.showEdit,mouseleave: $parent.hideEdit, 
	 contextmenu: $parent.ctxtmenu, dblclick: $parent._dblClickNode}'>
	 		<!-- ko if:  hasChildren  -->
				<span data-bind="attr:{'class': expanded() ? 'expanded':'notexpanded'}, click: $parent._expandNode"></span>
			<!-- /ko -->
			<!-- ko if : $parent.isShowCheckbox() -->
				<!-- ko if : $parent.checkboxType() == "checkbox" -->
				<input type='checkbox' data-bind="css:{'checkbox_checked': (typeof(checked)!='undefined' && checked()),checkbox_readonly: !$parent.getEnable($data)},enable: $parent.getEnable($data),value:$data,checked: $parent.checkedNode, click: $parent.checkNode">
				<label class="checkbox_label" data-bind="css:{'checkbox_checked': (typeof(checked)!='undefined' && checked()), 'checkbox_readonly': !$parent.getEnable($data), indeterminate:(typeof(indeterminate)!='undefined' && indeterminate())}"></label>
				<!-- /ko -->
				<!-- ko if : $parent.checkboxType() == "radio" -->
				<input type='radio' data-bind="css:{'checkbox_checked': (typeof(checked)!='undefined' && checked()),checkbox_readonly: !$parent.getEnable($data)},attr:{name:'node_'+level},enable: $parent.getEnable($data),value:$data,click: $parent.checkNode">
				<label class="radio_label"  data-bind="css:{'checkbox_checked': (typeof(checked)!='undefined' && checked()), 'checkbox_readonly': !$parent.getEnable($data), indeterminate:(typeof(indeterminate)!='undefined' && indeterminate())}"></label>
				<!-- /ko -->
			<!-- /ko -->
			<!-- ko if: $parent.type()=="menu" && typeof(icon) != "undefined" -->
				<span data-bind='attr:{"class":"icon icon-"+icon}'></span>
			<!-- /ko -->
			<!-- ko if: typeof(imageUrl) != "undefined" && imageUrl() != null -->
				<img data-bind='attr:{"src": imageUrl}'></img>
			<!-- /ko -->
			<!-- ko if:$parent._editedItem()==$data -->
				<!-- ko component: { name: 'commoneditor', 
					params: { value: $parent._editedItem()['text'],
					editorType: 'TextEditor',
					nullable: false,
					width: '75px'} } --><!-- /ko -->
			<!-- /ko -->
			<!-- ko if:$parent._editedItem()!= $data -->
				<a href='' data-bind='text: text,click: $parent._selectNode'></a>
			<!-- /ko -->
			<!-- ko if: $parent.isAllowEdit() || $parent.ctxMenuEdit() -->
				<!-- ko if:$parent._editedItem()== $data -->
					<span class='icon-save' data-bind='attr:{title: cube.msg("SAVE")}, click: $parent.saveItem, clickBubble: false'></span>
					<span class='icon-share-alt' data-bind='attr:{title: cube.msg("CANCEL")}, click: $parent.cancelSaveItem, clickBubble: false'></span>
				<!-- /ko -->
				<!-- ko if:$parent._editedItem()!= $data && $parent._showeditedItem()== $data && !$parent.ctxMenuEdit()-->
					<span class='icon-edit' data-bind='attr:{title: cube.msg("EDIT")}, click: $parent.editItem, clickBubble: false'></span>
				<!-- /ko -->
			<!-- /ko -->
			<!-- ko if:  ($parent.selectedNode()==$data||id == $parent.selectedNodeId()) && $parent.isNodeShowLoading()-->
			<div class="cube modal-backdrop fade loading in loading-data-node">
				<div style="position: absolute; top: 50%; left: 50%">
					<div style="position: relative; top: -50%; left: -50%; color: #ccc;">
						<img alt="加载中" data-bind="attr:{src: cube.cubepath('$/images/window_loading.gif')}">
					</div>
				</div>
			</div>
			<!-- /ko -->
	</li>
	<!-- ko if: (typeof(childNodes) == 'function'?childNodes().length>0:childNodes.length>0) && expanded() -->
		<div data-bind='component:{name: "treenodetmpl", params: {nodes: childNodes, selectedNode: $parent.selectedNode,selectedNodeId: $parent.selectedNodeId, checkedNode: $parent.checkedNode, isShowCheckbox:$parent.isShowCheckbox,
			selectNode: $parent.selectNode, ctxtmenu: $parent.ctxtmenu, dblClickNode: $parent.dblClickNode,expandNode: $parent.expandNode,
			isAllowEdit: $parent.isAllowEdit,_editedItem: $parent._editedItem,
			saveItem: $parent.saveItem, cancelSaveItem: $parent.cancelSaveItem, editItem: $parent.editItem,
			checkNode: $parent.checkNode,onToggleExpand: $parent.onToggleExpand,level:$parent.level(),
			isNodeShowLoading: $parent.isNodeShowLoading,checkboxType:$parent.checkboxType,
			ctxMenuEdit: $parent.ctxMenuEdit
			}}'></div>
	<!-- /ko -->
</ul></div>
<div id="modaldialog"><!-- ko if: animatShowBck-->
<div class="cube modal fade" style="display: block;"  data-bind="css:{'in': animatShowDialog,'maximize': isMax, 'minimize': isMin},
	style:{width: width(), height: height(), top: top(), bottom: bottom(), zIndex: zIndex()}">
	<div class="modal-header"  data-bind="event:{mousedown:headmousedown, mouseup:headmouseup}">
		<button type="button" class="close" data-bind="attr:{title: cube.msg('CLOSE')},event:{mousedown: closeDialog}, mousedownBubble:false">×</button>
		<!-- ko if: isMax() || isMin() -->
		<div class="dialog-header-button winnormal" data-bind="attr:{title: cube.msg('RESTORE')},event:{mousedown: normalDialog}, mousedownBubble:false"></div>
		<!-- /ko -->
		<!-- ko if: isShowMaxBtn() && !isMax() -->
		<div class="dialog-header-button winmax" data-bind="attr:{title: cube.msg('WINDOWMAX')},event:{mousedown: maxDialog}, mousedownBubble:false"></div>
		<!-- /ko -->
		<!-- ko if: isShowMinBtn() && !isMin() -->
		<div class="dialog-header-button winmin" data-bind="attr:{title: cube.msg('WINDOWMIN')},event:{mousedown: minDialog}, mousedownBubble:false"></div>
		<!-- /ko -->
		<h3 data-bind="text: title"></h3>
	</div> 
	<!-- ko if: typeof(content)!="undefined" && content()!=null -->
		<!-- ko if: !isMax() && !isMin() -->
		<div class="modal-body" data-bind="html:content,style:{height: bodyHeight}">
		</div>
		<!-- /ko -->
		<!-- ko if: isMax() || isMin() -->
		<div class="modal-body" data-bind="html:content">
		</div>
		<!-- /ko -->
	<!-- /ko -->
	<!-- ko if: (typeof(content)=="undefined"||content()==null) && typeof(templateOptions)!="undefined" && templateOptions != null-->
		<!-- ko if: isOut -->
			<!-- ko if: templateOptions().type == "ajax" -->
				<div class="modal-body" data-bind="html:ajaxHtml,style:{height:isMax()?'82%': bodyHeight}"></div>
			<!-- /ko --> 
			<!-- ko if: templateOptions().type == "iframe" -->
				<div class="modal-body" style="padding: 0px" data-bind="style:{height:isMax()?'82%':bodyHeight}">
					<iframe name="iframe_dialog" style="width:100%;height:98%;" frameborder=0 data-bind="attr:{src:templateOptions().name}"></iframe>
				</div>
			<!-- /ko --> 
		<!-- /ko --> 
		<!-- ko ifnot: isOut -->
			<div class="modal-body" data-bind="style:{height:isMax()?'82%': bodyHeight},component: templateOptions"></div>
		<!-- /ko -->
	<!-- /ko -->
	
	<div class="modal-footer" data-bind="style:{height: footerHeight}">
		<!-- ko foreach: customBtns -->
			<button class="btn" data-bind="text:text, attr:{'class':'btn btn-'+(typeof(type)!='undefined'?type:'default')}, visible: typeof(visible)!='undefined'?visible:true, click: $parent.customClick, clickBubble: false"></button>
        <!-- /ko -->
        <!-- ko if:reverseBtn -->
			<!-- ko if:isShowConfirmBtn -->
				<button class="btn btn-primary" data-bind="text:confirmBtnText, click: confirmDialog">确定</button>
			<!-- /ko -->
			<!-- ko if:isShowCloseBtn -->
				<button class="btn" data-bind="text:closeBtnText, click: closeDialog">关闭</button>
			<!-- /ko -->
        <!-- /ko -->
         <!-- ko ifnot:reverseBtn -->
        	<!-- ko if:isShowCloseBtn -->
				<button class="btn" data-bind="text:closeBtnText, click: closeDialog">关闭</button>
			<!-- /ko -->
			<!-- ko if:isShowConfirmBtn -->
				<button class="btn btn-primary" data-bind="text:confirmBtnText, click: confirmDialog">确定</button>
			<!-- /ko -->
        <!-- /ko -->
	</div>
</div>


<div class="modal-backdrop fade" data-bind="css:{'in': animatShowBck},style:{zIndex: zIndex()-10}"></div>
<!-- /ko --></div>
<div id="msgdialog"><!-- ko if: animatShowBck-->
<div style="display: block;top:20%;"
	data-bind="attr:{'class': 'cube modal hide fade msgdialog ' + msgType()},event:{mouseout: function(data,event){mouseout($element,event)}},style:{zIndex: zIndex()},css:{'in': animatShowDialog}">
	<div class="modal-header" data-bind="event:{mousedown:headmousedown,mouseup:headmouseup}">
		<h3>
			<!-- ko if: isShowCancelBtn -->
			<button type="button" class="close" data-bind="event:{mousedown: disableMsgDlg}, mousedownBubble:false">×</button>
			<!-- /ko -->
			<i data-bind="css:{'icon-warning-sign': msgType()=='warning','icon-info-sign': msgType()=='info', 'icon-question-sign': msgType()=='confirm','icon-remove-sign':msgType()=='error'}"></i>
			<span data-bind="text: title"></span>
		</h3>
	</div>
	<!-- ko if: typeof(content)!="undefined" -->
		<div class="modal-body" data-bind="html:content">
		</div>
	<!-- /ko -->
	<!-- ko if: typeof(content)=="undefined" && typeof(templateOptions)!="undefined"-->
		<div class="modal-body" data-bind="component: templateOptions"></div>
	<!-- /ko -->
	<!-- ko if: msgType() == "confirm" -->
	<div class="modal-footer">
		<!-- ko if:reverseBtn -->
			<button class="btn btn-primary" data-bind="text:cube.msg('CONFIRM'), click: confirmDialog">确定</button>
			<!-- ko if: isShowCancelBtn -->
			<button class="btn" data-bind="text:cube.msg('CANCEL'), click: disableMsgDlg">取消</button>
			<!-- /ko -->
		<!-- /ko -->
		<!-- ko ifnot:reverseBtn -->
			<!-- ko if: isShowCancelBtn -->
			<button class="btn" data-bind="text:cube.msg('CANCEL'), click: disableMsgDlg">取消</button>
			<!-- /ko -->
			<button class="btn btn-primary" data-bind="text:cube.msg('CONFIRM'), click: confirmDialog">确定</button>
		<!-- /ko -->
	</div>
	<!-- /ko -->
</div>
<!-- ko if: msgType() == "confirm" -->
<div class="modal-backdrop fade" data-bind="css:{'in': animatShowBck},style:{zIndex: zIndex()-10}"></div>
<!-- /ko -->
<!-- /ko --></div>
<div id="popoverdialog"><div class="cube popover" data-bind='attr:{"class": "popover "+popoverDirection()+" "+ msgType()}, 
	style:{display: isShowDialog()?"block":"none",zIndex: zIndex(),left:left(),right:right(),top:top(),bottom:bottom()}'>
	<div class="arrow" data-bind='style:{left:arrowLeft()}'></div>
	<!-- ko if: title()!="" -->
		<h3 class="popover-title" data-bind='text: title'></h3>
		<!-- ko if: isShowCloseBtn -->
		<button type="button" class="close" data-bind="attr:{title: cube.msg('CLOSE')},event:{mousedown: closeDialog}, mousedownBubble:false">×</button>
		<!-- /ko -->
	<!-- /ko -->
	<div class="popover-content" data-bind='html: content'>
	</div>
</div></div>
<div id="commoneditor"><!-- ko if: prefixText() != "" -->
<span  data-bind='text:prefixText()'></span>
<!-- /ko -->
<!-- ko if:	editorType()=="TextEditor" && textMode()!="password" && textMode()!="multiline" -->
<input  type="text"
	data-bind="hasFocus: hasFocus, value: value, valueUpdate: blurValid()?'blur':'afterkeydown', attr:{name: name, readOnly: readOnly, maxlength:typeof(maxLength)!='undefined'?maxLength():null},style:{width: width,textAlign: textAlign}, event: {blur: _valid, click:_onclick, keydown:_onkeydown}" />
<!-- /ko -->
<!-- ko if: editorType()=="TextEditor" && textMode()=="password" -->
<input type="password" data-bind="hasFocus: hasFocus, textInput: value, attr:{name: name, readOnly: readOnly, maxlength:typeof(maxLength)!='undefined'?maxLength():null},style:{width: width,textAlign: textAlign}, event: {blur: _valid, keydown:_onkeydown}"></input>
<!-- /ko -->
<!-- ko if:	editorType()=='TextEditor' && textMode()=="multiline" -->
<textarea
	data-bind="hasFocus: hasFocus, value: value, valueUpdate:'afterkeydown', attr:{name: name, readOnly: readOnly, maxlength:typeof(maxLength)!='undefined'?maxLength():null},style:{width: width,height: height,textAlign: textAlign}, event: {blur: _valid, keydown:_onkeydown}"></textarea>
<!-- /ko -->
<!-- ko if: editorType() == "LabelEditor" -->
<span class="uneditable-input labelEditor" data-bind="html:labelValue, css:{autowrap: labelAutowrap},attr:{title:labelTitle, name: name, readOnly: readOnly},style:{width: width,textAlign: textAlign}, event: {blur: _valid}"></span>
<!-- /ko -->

<!-- ko if: editorType() =="DropDownEditor" -->
<!-- ko component:{
		name: 'dropdowneditor',
		params: {hasFocus:hasFocus, isShowNull:isShowNull, isSelectedFirst:isSelectedFirst, isAllowEdit: isAllowEdit, autoMatching: autoMatching, isClickShow: isClickShow, isTextEllipsis: isTextEllipsis, isExtDisplay: isExtDisplay,  isShowScroll: isShowScroll, onSelectedChanged: onSelectedChanged, isShowCheckbox:isShowCheckbox,readOnly: readOnly, _checkListvalue: _checkListvalue, selectedValue: value, items: list, diabled: readOnly, width:width, dropdownMenuHeight: dropdownMenuHeight,commonRendered: onRendered}
	}--> <!-- /ko -->
<!-- /ko -->

<!-- ko if:	editorType()=="CheckEditor"-->
<div>
<input type="checkbox"
	data-bind="checked: value, attr:{name: name, disabled: readOnly}" />
</div>	
<!-- /ko -->

<!-- ko if:	editorType()=="CheckListEditor" && type()=="radio" -->
	<!-- ko if:	checkListCols() == null -->
	<div data-bind="foreach: list,style:{width: width}">
		<label class="radio inline" data-bind="style:{'display': $parent.isCheckListVer()?'block':'inline-block', 'margin-left': $parent.isCheckListVer()?'0px':'auto'}">
			<input type="radio"
				data-bind="checkedValue: value, checked: $parent._checkListvalue, attr:{name: $parent.name, disabled: $parent.readOnly}" />
			<span data-bind="text: text"></span>
		</label>
	</div>
	<!-- /ko -->	
	<!-- ko ifnot:	checkListCols() == null -->
	<div data-bind="style:{width: width}">	
		<table>
			<tbody data-bind="foreach: _list">
				<tr data-bind="foreach: $data">
					<td>
						<label class="radio inline">
							<input type="radio"
								data-bind="checkedValue: value, checked: $parents[1]._checkListvalue, attr:{name: $parents[1].name, disabled: $parents[1].readOnly}" />
							<span data-bind="text: text"></span>
						</label>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	<!-- /ko -->	
<!-- /ko -->

<!-- ko if:	editorType()=="CheckListEditor" && type()=="checkbox"-->
	<!-- ko if:	checkListCols() == null -->
	<div data-bind="foreach: list,style:{width: width}">
		<label class="checkbox inline" data-bind="style:{'display': $parent.isCheckListVer()?'block':'inline-block', 'margin-left': $parent.isCheckListVer()?'0px':'auto'}">
			<input type="checkbox"
				data-bind="checkedValue: value, checked: $parent._checkListvalue, attr:{name: $parent.name, disabled: $parent.readOnly}" />
			<span data-bind="text: text"></span>
		</label>
	</div>
	<!-- /ko -->	
	<!-- ko ifnot:	checkListCols() == null -->
	<div data-bind="style:{width: width}">	
		<table>
			<tbody data-bind="foreach: _list">
				<tr data-bind="foreach: $data">
					<td>
						<label class="checkbox inline">
							<input type="checkbox"
								data-bind="checkedValue: value, checked: $parents[1]._checkListvalue, attr:{name: $parents[1].name, disabled: $parents[1].readOnly}" />
							<span data-bind="text: text"></span>
						</label>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
	<!-- /ko -->
<!-- /ko -->

<!-- ko if:	editorType()=="ListEditor"-->
<div data-bind='style:{width: width}'>
	<ul class="dropdown-menu" style="position: static; display: block;"
		data-bind="foreach: list">
		<li data-bind="css: {active:value==$parent.value()}"><a href="#" data-bind="text: text,css: {active:value==$parent.value()}, click: $parent._selectListItem"></a></li>
	</ul>
</div>
<!-- /ko -->

<!-- ko if:	editorType()=="TransferEditor"-->
	<!-- ko component:{
		name: 'transfereditor',
		params: {  width:width,value:value,list: list,
	 						transferHeight:transferHeight,
	 						transferWidth:transferWidth,
	 						displayAddButton:displayAddButton,
	 						displayDeleteButton:displayDeleteButton,
	 						displayAddAllButton:displayAddAllButton,
	 						displayDeleteAllButton:displayDeleteAllButton,
	 						commonRendered: onRendered}
	}--> <!-- /ko -->
<!-- /ko -->

<!-- ko if:	editorType()=="NumberEditor"-->
<div class="input-append numbereditor">
	<input type="text"
		data-bind="hasFocus: hasFocus, textInput: value, style:{width: width,textAlign: textAlign}, attr:{readOnly: readOnly},event:{keydown: _input_keydown,keypress:_input_keypress,keyup:_input_keyup,blur: _valid}">
	<span class="add-on" style="position: relative;"> <span class="caret-down"
		data-bind="click:setNumberUp"></span> <span class="caret-up"
		data-bind="click:setNumberDown"></span>
	</span>
</div>
<!-- /ko -->
<!-- ko if:	editorType()=="CustomEditor" -->
<div class="input-append customEditor">
	<input type="text"
		data-bind="hasFocus: hasFocus, textInput: value, style:{width: width,textAlign: textAlign}, attr:{readOnly:readOnly() || !isAllowEdit(),maxlength:typeof(maxLength)!='undefined'?maxLength():null},event:{blur: _valid}">
	 <button type="button" class="btn btn-default" data-bind="click:_onclick, keydown:_onkeydown">
	 	<!-- ko if:	customBtnText()!=null-->
	 		<!-- ko text:customBtnText --><!-- /ko -->
	 	<!-- /ko -->
	 	<!-- ko if:	customBtnText()==null-->
	 	 <span data-bind="css: 'icon-' + customBtnIcon()" aria-hidden="false"></span>
	 	<!-- /ko -->
    </button>
</div>
<!-- /ko -->

<!-- ko if: editorType() =="DropDownTreeEditor" -->
<!-- ko component:{
		name: 'dropdowntreeeditor',
		params: {hasFocus:hasFocus, isShowNull:isShowNull, isSelectedFirst:isSelectedFirst, isShowScroll: isShowScroll, onSelectedChanged: onSelectedChanged, isShowCheckbox:isShowCheckbox, isExtDisplay: isExtDisplay, readOnly: readOnly, selectedValue: value, items: list, diabled: readOnly,width:width,treeOptions: treeOptions(),isSelectedClose: isSelectedClose, dropdownMenuHeight: dropdownMenuHeight, isAllowEdit: isAllowEdit, autoMatching: autoMatching, commonRendered: onRendered}
	}--> <!-- /ko -->
<!-- /ko -->
<!-- ko if: suffixText() != "" -->
<span data-bind='text:suffixText'></span>
<!-- /ko --></div>
<div id="datetimeeditor"><!-- ko if: prefixText() != "" -->
<span  data-bind='text:prefixText()'></span>
<!-- /ko -->
<div data-bind="attr: {'class':'cube datepicker input-append editor-text-'+textAlign()}">
   <input type='text' data-bind="value: _value, hasFocus: hasFocus, 
    	event: {
    	blur: _valid, 
    	keydown:_input_keydown,keypress:_input_keydown,keyup:_input_keydown,
    	click: function(data,event){!isAllowEdit()?showPopoverDialog($element,event):_input_selectionchanged($element,event)}},
    	attr:{'readOnly': readOnly() || (!_timeEditor() && !isAllowEdit()),maxlength:typeof(maxLength)!='undefined'?maxLength():null},style:{width: width,textAlign: textAlign}"></input>
   <!-- ko if: !_timeEditor() -->
   <button type="button" class="btn btn-default" data-bind="click: function(data,event){showPopoverDialog($element,event)}">
        <span class="icon-calendar" aria-hidden="false"></span>
  	</button>
    <!-- /ko -->
   	<!-- ko if: _timeEditor() -->
	<span class="add-on" style="position: relative;">    	
		<span class="caret-up" data-bind="click:setTimeUp"></span>
    	<span class="caret-down" data-bind="click:setTimeDown"></span> 
	</span>
	<!-- /ko -->
</div>
<!-- ko if: suffixText() != "" -->
<span data-bind='text:suffixText'></span>
<!-- /ko -->
<!-- ko if: !_timeEditor() -->
<div class="par" style='position: relative;' data-bind="style:{left: leftOffset()}">
    <div tabIndex='1' class="popover" data-bind='click: dateClick,
        attr:{"class": "popover "+popoverDirection()+" "+ msgType()}, 
        style:{display: isShowDialog()?"block":"none"},
        hasFocus: calendarFocus,
        event:{mouseover: mouseoverPopoverDialog, mousedown: mousedownInnerPopoverDialog, blur: hiddenPopoverDialog}' 
        style='outline:none;'>
        <div class="arrow"></div>
        <calendar params="showTimePicker: showTimePicker,
        showDayPicker: showDayPicker,
        showMonthPicker: showMonthPicker,
        showQuarterPicker: showQuarterPicker,
        year: year,
        quarter: quarter,
        month: month,
        day: day,
        hour: hour,
        minute: minute,
        second: second,
        isShowDialog: isShowDialog,
        minValue: minValue,
        maxValue: maxValue,
        isClickCloseDialog: isClickCloseDialog,
        onSelectDate:onSelectDate"></calendar>
  		<div class="datetimeeditorbtns">
			<button type="button" class="btn datetime-btn" data-bind="click: emptyTime">清空</button>
			<button type="button" class="btn btn-primary datetime-btn" data-bind="event:{mousedown:  confirmTime}, mousedownBubble: false">确定</button>
		</div> 
    </div> 
</div>
<!-- /ko --></div>
<div id="dropdowneditor"><div class="cube btn-group dropdowneditor"
	data-bind="css:{'open': isShowDropdownOptions},attr:{'readOnly': readOnly}" >
	<!-- ko if: isAllowEdit -->
		<div class="input-append">
			<input  type="text" data-bind="hasFocus: hasFocus, textInput: _checkText, attr:{disabled: disabled},style:{width: width,textAlign: textAlign},event:{mouseout: doCloseDropdownOptions}" />
			<button type="button" class="btn dropdown-toggle split-toggle" data-toggle="dropdown" data-bind="attr:{disabled: disabled},
				event:{click: function(data,event){doClickDropdownOptions($element,event)}}">
		   		<span class="caret" data-bind=""></span>
		 	</button>
	 	</div>
	<!-- /ko -->
	<!-- ko ifnot: isAllowEdit -->
		<!-- ko ifnot:isSplit -->
			<button type="button" class="btn dropdown-toggle" data-toggle="dropdown" data-bind="hasFocus: hasFocus, attr:{disabled: disabled},
				event:{mouseover: function(data,event){doOpenDropdownOptions($element,event)},click: function(data,event){doOpenDropdownOptions($element,event)}, mouseout: doCloseDropdownOptions}, style:{width: width,textAlign: textAlign}">		
				<span data-bind=" text: selectedItem()!=null?_checkText:'请选择' "></span>
				<span class="caret"></span>
			</button>
		<!-- /ko -->
		
		<!-- ko if: isSplit-->
			<button type="button" class="btn" data-bind="text:selectedItem()!=null?_checkText:'请选择',hasFocus: hasFocus, attr:{disabled: disabled}, style:{width: width,textAlign: textAlign}"></button>
			<button type="button" class="btn dropdown-toggle split-toggle" data-toggle="dropdown" data-bind="attr:{disabled: disabled},
				event:{mouseover: function(data,event){doOpenDropdownOptions($element,event)}, click:function(data,event){doOpenDropdownOptions($element,event)}, mouseout: doCloseDropdownOptions}">
	    		<span class="caret" data-bind=""></span>
	  		</button>
	  	<!-- /ko -->
	<!-- /ko -->
  	
	<ul class="dropdown-menu" data-bind="event:{mouseenter: function(data,event){doOpenDropdownOptions($element,event)},mouseleave: doCloseDropdownOptions},css:{'dropdown-scroll':isShowScroll, 'dropdown-checkbox':isShowCheckbox},style:{width: ((width()!='auto') && isTextEllipsis())?width:null,  minWidth: ((width()!='auto') && !isTextEllipsis())?width:null, maxHeight: dropdownMenuHeight()!='auto'?dropdownMenuHeight:null}">
		<!-- ko if:isShowNull -->
			<li>
				<!-- ko if: isShowCheckbox -->
					<input type="checkbox" data-bind="checkedValue: '', checked: $data._checkListvalue" />
				<!-- /ko -->
				<a href="#" data-bind="text: '请选择',value: '',click: $data.selectItem"></a>
			</li>
		<!-- /ko -->
		<!-- ko foreach:t_items -->
			<li>
				<!-- ko if: $parent.isShowCheckbox -->
					<input type="checkbox" data-bind="checkedValue: value, checked: $parent._checkListvalue" />
				<!-- /ko -->
				<!-- ko ifnot: $parent.isTextEllipsis-->
					<a href="#" data-bind="html: text,click: $parent.selectItem"></a> 
				<!-- /ko -->
				<!-- ko if: $parent.isTextEllipsis-->
					<a href="#" class="textEllipsis" data-bind="attr:{title: text}, html: text,click: $parent.selectItem"></a> 
				<!-- /ko -->
			</li>
		<!-- /ko -->
	</ul>
</div></div>
<div id="dropdowntreeeditor"><div class="cube btn-group dropdowneditor dropdowntreeeditor"
	data-bind="css:{'open': isShowDropdownOptions},attr:{'readOnly': readOnly}" >
	
	<div class="input-append">
		<input  type="text" data-bind="hasFocus: hasFocus, textInput: _checkText()||isAllowEdit()?_checkText:'请选择',
			event:{click:function(data,event){ doClickDropdownOptions($element,event)}},
			attr:{disabled: disabled,readOnly:!isAllowEdit()},
			style:{width: width,textAlign: textAlign}" />
		<button type="button" class="btn dropdown-toggle split-toggle" data-toggle="dropdown" data-bind="attr:{disabled: disabled},
			event:{click:function(data,event){ doClickDropdownOptions($element,event)}}">
	   		<span class="caret" data-bind=""></span>
	 	</button>
 	</div>
  	
	<div class="dropdown-menu" style="outline:none;" tabIndex='1' 
		data-bind=" hasFocus: dropdownFocus,event:{
			mouseover: mouseoverPopoverDialog, 
			mousedown: mousedownInnerPopoverDialog,
			blur: doCloseDropdownOptions
		},
		css:{'dropdown-scroll':isShowScroll},
		style:{width: width()!='auto'?width:null, minWidth: width()!='auto'?width:null, maxHeight: dropdownMenuHeight()!='auto'?dropdownMenuHeight:null}">
		<!-- ko component:{
			name: 'tree',
			params: treeOptions()
		}--> <!-- /ko -->
	</div>
</div></div>
<div id="fileeditor"><div class="cube file-input">
	<!-- ko if: type()=="grid" -->
	 	<div class="input-group">
	 		<!-- ko if: isShowControl -->
			<div tabindex="500"
				class="form-control file-caption  kv-fileinput-caption">
				<div class="file-caption-name">
					<span class="glyphicon icon-file kv-caption-icon" data-bind="text: cube.msg('UPLOAD_COUNT',_items().length)+','+cube.msg('NOTUPLOAD')+'('+_unuploadCount()+')'"></span>
				</div>
			</div>
	
			<div class="input-group-btn">
				<div data-bind='click: showDialog' tabindex="500" class="btn btn-primary btn-file">
					<span class="hidden-xs">…</span>
				</div>
			</div>
			<!-- /ko -->
		</div>
		
		<!-- ko ifnot: isShowControl -->
		<div class="grid-progress">
			<!-- ko if: _unuploadCount() == 0 -->
				<!-- ko foreach: { data: _items }-->
						<a href="" class="file-footer-caption" data-bind = "text:name, attr:{title:name}, click:$parent.downloadFile"></a>
				<!-- /ko -->
			<!-- /ko -->
			<!-- ko if: _unuploadCount() > 0 -->
				<div class="file-thumb-progress">
					<div class="progress">
						<div
							class="progress-bar progress-bar-success active progress-bar-striped"
							role="progressbar" aria-valuenow="0" aria-valuemin="0"
							aria-valuemax="100" data-bind="style:{width:progress}">
								<!-- ko text:progress --> <!-- /ko -->
							</div>
					</div>
				</div>
			<!-- /ko -->
		</div>
		<!-- /ko -->
		
		
		<!-- ko if: animatShowDialog -->
		<div class="cube modal fade" style="display: block;"  data-bind="css:{'in': animatShowDialog}">
			<div class="modal-header">
				<button type="button" class="close" style="display: block;" data-bind="click:closeDialog">×</button>
				<h3>文件上传</h3>
			</div> 
				<div class="modal-body"> 
					<!-- ko if: isShowPreview() && (_items().length > 0 ||  _showErrorMessage()) -->
					<div class="file-preview">
						<!-- ko if: !previewModel() -->
						<div class="close fileinput-remove" data-bind="click:hidePreview">×</div>
						<!-- /ko -->
						<div data-bind="css:{'hide-thumbnail':!isShowThumbnail(),'file-drop-zone':!previewModel(), 'file-preview-small': previewSize()=='small', 'file-preview-mini': previewSize()=='mini'}">
							<div class="file-preview-thumbnails">
							   	<!-- ko foreach: { data: _items }-->
								<div class="file-preview-frame" id="preview-1456813948231-0"
									data-bind="attr:{title:name,'data-fileindex':index},css:{'file-uploading':status()==cube.msg('UPLOADING')}">
									<!-- ko if: $parent.isShowThumbnail() -->
									<div class="file-preview-other-frame">
										<!-- ko ifnot: isImage -->
										<div class="file-preview-other">
											<span class="file-icon-4x"><i
												class="fa text-warning" data-bind="css:css"></i></span>
										</div>
										<!-- /ko -->
										<!-- ko if: isImage -->
											<!-- ko if: isIE -->
												<div class="file-preview-image" data-bind="html: view"></div>
											 <!-- /ko -->
											 <!-- ko if: !isIE -->
											 	<img class="file-preview-image" data-bind="attr:{src:src,title:name}">
											 <!-- /ko -->
										 <!-- /ko -->
									</div>
									<!-- /ko -->
									<!-- ko if: !$parent.previewModel() -->
									<div class="file-preview-other-footer">
										<div class="file-thumbnail-footer">
											<div class="file-footer-caption" data-bind = "text:name, attr:{title:name}"></div>
											<div class="file-thumb-progress" data-bind="css:{hide:status()==cube.msg('NOTUPLOAD')}">
												<div class="progress">
													<div
														class="progress-bar progress-bar-success active"
														role="progressbar" aria-valuenow="0" aria-valuemin="0"
														aria-valuemax="100" data-bind="style:{width:progress}, css:{'progress-bar-striped':status()==cube.msg('UPLOADING')}">
															<!-- ko text:progress --> <!-- /ko -->
														</div>
												</div>
											</div>
											<div class="file-actions">
												<div class="file-footer-buttons">
													<!-- ko if: $parent.isShowUploadButton() -->
													<button type="button"
														class="kv-file-upload btn btn-xs btn-default"
														data-bind="click:$parent.uploadFile,css:{hide:(status()==cube.msg('UPLOADED') || status()==cube.msg('DELETEFAIL'))},attr:{title:cube.msg('UPLOAD'),disabled:status()==cube.msg('UPLOADING')}">
														<i class="glyphicon icon-upload text-info"></i>
													</button>
													 <!-- /ko -->
													  <!-- ko if: $parent.isShowDownloadButton() -->
													<button type="button"
														class="kv-file-upload btn btn-xs btn-default"
														data-bind="click:$parent.downloadFile,css:{hide:status()==cube.msg('UPLOADING')||status()==cube.msg('NOTUPLOAD')||status()==cube.msg('UPLOADFAIL')||status()==cube.msg('UPLOADCACEL')},attr:{title:cube.msg('DOWNLOAD')}">
														<i class="glyphicon icon-download text-success"></i>
													</button>
													 <!-- /ko -->
													 <!-- ko if: $parent.isShowRemoveButton() -->
													<button type="button"
														class="kv-file-remove btn btn-xs btn-default" 
														data-bind="click:$parent.removeFile,attr:{disabled:status()==cube.msg('UPLOADING')},attr:{title:cube.msg('DELETE'),disabled: $parent.readOnly}">
														<i class="glyphicon icon-trash text-danger"></i>
													</button>
													 <!-- /ko -->
												</div>
												<div class="file-upload-indicator">
													<i class="glyphicon text-warning" data-bind="text:status"></i>
												</div>
												<div class="clearfix"></div>
											</div>
										</div>
									</div>
									 <!-- /ko -->
								</div>
								<!-- /ko -->
							</div>
							<div class="clearfix"></div>
							<div class="file-preview-status text-center text-success"></div>
							<div class="kv-fileinput-error file-error-message"
								data-bind="style:{display:_showErrorMessage()?'':'none'}">
								<!-- ko foreach: { data: _validitems }-->
									<div data-bind="text:name+'：'+msg"></div>
								<!-- /ko -->
							</div>
						</div>
					</div>
					<!-- /ko -->
				</div>
			<div class="modal-footer">
				<div class="input-group-btn">
					<!-- ko if: !isIE() -->
					<div data-bind='attr:{"id": id}' tabindex="500" class="btn btn-warning  btn-file">
						<span
							class="hidden-xs">添加</span><input id="input-ficons-1"
							name="inputficons1[]" multiple="" type="file" class="" data-bind="event:{change: fileChange},attr:{disabled: readOnly, accept: _fileAccept}">
					</div>
					<!-- /ko -->
					
					<!-- ko if: isIE() -->
					<iframe id="myfrm" width=0 height=0 frameBorder=0 src="about:blank" name="myfrm"></iframe>
					<form data-bind='attr:{"id": id}' enctype='multipart/form-data' target='myfrm' method='post' style="display:inline-block;">
						<div tabindex="500" class="btn btn-warning  btn-file">
							<div id="_fileSelectionHiddenArea" style="width:1px;height:1px;"></div>
							<i class="glyphicon icon-folder-open"></i>&nbsp; <span
								class="hidden-xs">添加</span>
								<input type="file" name="file" id="file_1" data-bind="event:{change: fileChange},attr:{disabled: readOnly, accept: _fileAccept}">
								<!-- ko foreach: { data: _files, as: 'file' }-->
									<div data-bind="html: file"></div>
								<!-- /ko -->
								
						</div>
					</form>
					<!-- /ko -->
					<button class="btn btn-warning fileinput-upload-button" data-bind="click:uploadFiles,attr:{disabled: readOnly},text:cube.msg('UPLOAD')">上传</button>
					<button class="btn btn-warning fileinput-close-button" data-bind="click:closeDialog,text:cube.msg('CLOSE')">关闭</button>
				</div>
			</div>
		</div>
		<!-- /ko -->
	<!-- /ko -->
	<!-- ko if: type()!="grid" -->
	    <!-- ko if: isShowPreview() && (_items().length > 0 ||  _showErrorMessage()) -->
		<div class="file-preview">
			<!-- ko if: !previewModel() -->
			<div class="close fileinput-remove" data-bind="click:hidePreview">×</div>
			<!-- /ko -->
			<div data-bind="css:{'hide-thumbnail':!isShowThumbnail(),'file-drop-zone':!previewModel(), 'file-preview-small': previewSize()=='small', 'file-preview-mini': previewSize()=='mini'}">
				<div class="file-preview-thumbnails">
				   	<!-- ko foreach: { data: _items }-->
					<div class="file-preview-frame" id="preview-1456813948231-0"
						data-bind="attr:{title:name,'data-fileindex':index},css:{'file-uploading':status()==cube.msg('UPLOADING')}">
						<!-- ko if: $parent.isShowThumbnail() -->
						<div class="file-preview-other-frame">
							<!-- ko ifnot: isImage -->
							<div class="file-preview-other">
								<span class="file-icon-4x"><i
									class="fa text-warning" data-bind="css:css"></i></span>
							</div>
							<!-- /ko -->
							<!-- ko if: isImage -->
								<!-- ko if: isIE -->
									<div class="file-preview-image" data-bind="html: view"></div>
								 <!-- /ko -->
								 <!-- ko if: !isIE -->
								 	<img class="file-preview-image" data-bind="attr:{src:src,title:name}">
								 <!-- /ko -->
							 <!-- /ko -->
						</div>
						<!-- /ko -->
						<!-- ko if: !$parent.previewModel() -->
						<div class="file-preview-other-footer">
							<div class="file-thumbnail-footer">
								<div class="file-footer-caption" data-bind = "text:name, attr:{title:name}"></div>
								<div class="file-thumb-progress" data-bind="css:{hide:status()==cube.msg('NOTUPLOAD')}">
									<div class="progress">
										<div
											class="progress-bar progress-bar-success active"
											role="progressbar" aria-valuenow="0" aria-valuemin="0"
											aria-valuemax="100" data-bind="style:{width:progress}, css:{'progress-bar-striped':status()==cube.msg('UPLOADING')}">
												<!-- ko text:progress --> <!-- /ko -->
											</div>
									</div>
								</div>
								<div class="file-actions">
									<div class="file-footer-buttons">
										<!-- ko if: $parent.isShowUploadButton() -->
										<button type="button"
											class="kv-file-upload btn btn-xs btn-default"
											data-bind="click:$parent.uploadFile,css:{hide:(status()==cube.msg('UPLOADED') || status()==cube.msg('DELETEFAIL'))},attr:{title:cube.msg('UPLOAD'),disabled:status()==cube.msg('UPLOADING')}">
											<i class="glyphicon icon-upload text-info"></i>
										</button>
										 <!-- /ko -->
										  <!-- ko if: $parent.isShowDownloadButton() -->
										<button type="button"
											class="kv-file-upload btn btn-xs btn-default"
											data-bind="click:$parent.downloadFile,css:{hide:status()==cube.msg('UPLOADING')||status()==cube.msg('NOTUPLOAD')||status()==cube.msg('UPLOADFAIL')||status()==cube.msg('UPLOADCACEL')},attr:{title:cube.msg('DOWNLOAD')}">
											<i class="glyphicon icon-download text-success"></i>
										</button>
										 <!-- /ko -->
										 <!-- ko if: $parent.isShowRemoveButton() -->
										<button type="button"
											class="kv-file-remove btn btn-xs btn-default" 
											data-bind="click:$parent.removeFile,attr:{disabled:status()==cube.msg('UPLOADING')},attr:{title:cube.msg('DELETE'),disabled: $parent.readOnly}">
											<i class="glyphicon icon-trash text-danger"></i>
										</button>
										 <!-- /ko -->
									</div>
									<div class="file-upload-indicator">
										<i class="glyphicon text-warning" data-bind="text:status"></i>
									</div>
									<div class="clearfix"></div>
								</div>
							</div>
						</div>
						 <!-- /ko -->
					</div>
					<!-- /ko -->
				</div>
				<div class="clearfix"></div>
				<div class="file-preview-status text-center text-success"></div>
				<div class="kv-fileinput-error file-error-message"
					data-bind="style:{display:_showErrorMessage()?'':'none'}">
					<!-- ko foreach: { data: _validitems }-->
						<div data-bind="text:name+'：'+msg"></div>
					<!-- /ko -->
				</div>
			</div>
		</div>
		<!-- /ko -->
		<!-- ko if: !previewModel() -->
		<div class="kv-upload-progress hide">
			<div class="progress">
				<div
					class="progress-bar progress-bar-success progress-bar-striped active"
					role="progressbar" aria-valuenow="0" aria-valuemin="0"
					aria-valuemax="100" style="width: 0%;">0%</div>
			</div>
		</div>
		<div class="input-group ">
			<div tabindex="500"
				class="form-control file-caption  kv-fileinput-caption">
				<div class="file-caption-name">
					<span class="glyphicon icon-file kv-caption-icon" data-bind="text: cube.msg('UPLOAD_COUNT',_items().length)+','+cube.msg('NOTUPLOAD')+'('+_unuploadCount()+')'"></span>
				</div>
			</div>
	
			<div class="input-group-btn">
				<!-- ko if: isShowRemoveButton() -->
				<button type="button" tabindex="500" 
					title="删除全部文件"
					class="btn btn-default fileinput-remove fileinput-remove-button"
					data-bind="click:clearFiles,attr:{disabled: readOnly}">
					<i class="glyphicon icon-trash"></i> <span class="hidden-xs" data-bind="text:cube.msg('DELETE')">删除</span>
				</button>
				<!-- /ko -->
				<button type="button" tabindex="500" 
					class="btn btn-default hide fileinput-cancel fileinput-cancel-button">
					<i class="glyphicon icon-ban-circle"></i> <span class="hidden-xs" data-bind="text:cube.msg('CANCEL')">取消</span>
				</button>
				<!-- ko if: isShowUploadButton() -->
				<a href="javascript:void()" tabindex="500"
					title="上传全部文件"
					class="btn btn-default fileinput-upload fileinput-upload-button"
					data-bind="click:uploadFiles,attr:{disabled: readOnly}">
					<i class="glyphicon icon-upload"></i><span class="hidden-xs" data-bind="text:cube.msg('UPLOAD')">上传</span></a>
				<!-- /ko -->
				<!-- ko if: !isIE() -->
				<div data-bind='attr:{"id": id}' tabindex="500" class="btn btn-primary btn-file">
				<i class="glyphicon icon-folder-open"></i>&nbsp; <span
					class="hidden-xs" data-bind="text:cube.msg('BROWSE')">浏览 …</span><input id="input-ficons-1"
					name="inputficons1[]" multiple="" type="file" class="" data-bind="event:{change: fileChange},attr:{disabled: readOnly, accept: _fileAccept}">
				</div>
				<!-- /ko -->
				
				<!-- ko if: isIE() -->
				<iframe id="myfrm" width=0 height=0 frameBorder=0 src="about:blank" name="myfrm"></iframe>
				<form data-bind='attr:{"id": id}' enctype='multipart/form-data' target='myfrm' method='post' style="display:inline-block;">
					<div tabindex="500" class="btn btn-primary btn-file">
						<div id="_fileSelectionHiddenArea" style="width:1px;height:1px;"></div>
						<i class="glyphicon icon-folder-open"></i>&nbsp; <span
							class="hidden-xs" data-bind="text:cube.msg('BROWSE')">浏览 …</span>
							<input type="file" name="file" id="file_1" data-bind="event:{change: fileChange},attr:{disabled: readOnly, accept: _fileAccept}">
							<!-- ko foreach: { data: _files, as: 'file' }-->
								<div data-bind="html: file"></div>
							<!-- /ko -->
							
					</div>
				</form>
				<!-- /ko -->
			</div>
		</div>
		<!-- /ko -->
	<!-- /ko -->
</div></div>
<div id="imageeditor"><div class="cube imageeditor"
	data-bind="style:{width: width(), height: height()}">
	<header class="header">
		<span class="title" data-bind="text:name">文件名称</span>
		<div class="cmenu">
			<a class="menu__button status"  data-bind="visible:status()!=''">
				<span class="fa" data-bind="text:status"></span> 
			</a>
			<button type="button" data-action="restore"
				class="menu__button" data-bind="attr:{title:cube.msg('RESTORE')},visible:cropped(),event:{click:restore}">
				<span class="fa icon-undo"></span>
			</button>
			<button type="button" data-action="remove"
				class="menu__button menu__button--danger" data-bind="attr:{title:cube.msg('DELETE')},visible:hasImage() && !cropping(), event:{click:remove}">
				<span class="fa icon-trash"></span>
			</button>
			<button type="button" data-action="clear"
				class="menu__button menu__button--danger" data-bind="attr:{title:cube.msg('CANCEL')},visible:cropping(),event:{click:clear}">
				<span class="fa icon-ban-circle"></span>
			</button>
			<button type="button" data-action="crop"
				class="menu__button menu__button--success" data-bind="attr:{title:cube.msg('CONFIRM')},visible:cropping(),event:{click:cropOk}">
				<span class="fa icon-ok"></span>
			</button>
			<button type="button" data-action="crop"
				class="menu__button menu__button--success" data-bind="attr:{title:cube.msg('UPLOAD')},visible:hasImage() && !uploaded(),event:{click:upload}">
				<span class="fa icon-upload-alt"></span>
			</button>
			<a data-action="download"
				class="menu__button menu__button--success" data-bind="attr:{title:cube.msg('DOWNLOAD')},visible:hasImage() && uploaded(),event:{click:download}">
				<span class="fa icon-download-alt"></span></a>
		</div>
	</header>
	<main class="main">
	<div class="upload" data-bind= "visible:!hasImage()">
		<!-- ko if: !isIE() -->
			<p data-bind= "event:{drop:drop,dragover:dragover}">
				<i data-bind="text:cube.msg('DRAGPICTURE')"></i><label class="browse"><i data-bind="text:cube.msg('BROWSE')"></i><input
					id="file" type="file" name="file" accept="image/*" class="sr-only" data-bind="event:{change:imageInputChange}"></label>
			</p>
		<!-- /ko -->
		<!-- ko if: isIE() -->
		<iframe id="myfrm" width=0 height=0 frameBorder=0 src="about:blank" name="myfrm"></iframe>
		<form data-bind='attr:{"id": id}' enctype='multipart/form-data' target='myfrm' method='post'>
			<div id="_fileSelectionHiddenArea" style="width:1px;height:1px;"></div>
			<div>
				<label class="browse"><i data-bind="text:cube.msg('BROWSE')"></i><input
					id="file" type="file" name="file" accept="image/*" class="sr-only" data-bind="event:{change:imageInputChange}"></label>
			</div>
		</form>
		<!-- /ko -->
	</div>
	<div class="canvas" data-bind="visible:hasImage()">
		<div class="editor">
			<!-- ko if: !isIE() || isServerImage()-->
			<img id="image" data-bind="attr:{src:imageUrl,alt:name},event:{load:imageLoad}">
			 <!-- /ko -->
			 <!-- ko if: isIE() -->
			<div id='_show_area'></div>
			 <!-- /ko -->
		</div>
		<div class="toolbar" data-bind="visible:showToolbar() && !isIE()">
			<button type="button" data-action="move" title="移动" class="toolbar__button" data-bind="click:move">
				<span class="fa icon-move"></span>
			</button>
			<button type="button" data-action="crop" title="裁剪 " class="toolbar__button" data-bind="click:crop">
				<span class="fa icon-retweet"></span>
			</button>
			<button type="button" data-action="zoom-in" title="缩小"
				class="toolbar__button" data-bind="click:zoomin">
				<span class="fa icon-zoom-in"></span>
			</button>
			<button type="button" data-action="zoom-out" title="放大"
				class="toolbar__button" data-bind="click:zoomout">
				<span class="fa icon-zoom-out"></span>
			</button>
			<button type="button" data-action="rotate-left" title="逆时针旋转 "
				class="toolbar__button" data-bind="click:rolateleft">
				<span class="fa icon-undo"></span>
			</button>
			<button type="button" data-action="rotate-right" title="顺时针旋转 "
				class="toolbar__button" data-bind="click:rolateright">
				<span class="fa  icon-repeat"></span>
			</button>
			<button type="button" data-action="flip-horizontal" title="水平翻转"
				class="toolbar__button" data-bind="click:horizontal">
				<span class="fa icon-resize-horizontal"></span>
			</button>
			<button type="button" data-action="flip-vertical" title="垂直翻转 "
				class="toolbar__button" data-bind="click:vertical">
				<span class="fa icon-resize-vertical"></span>
			</button>
		</div>
	</div>
	</main>
</div></div>
<div id="transfereditor"><div class= "transferEditor" data-bind='style:{width: width}'>
	<div class= "transfer transferLeft" data-bind="style:{height: transferHeight}">
		<ul class="dropdown-menu" data-bind="style:{width: transferWidth}, foreach: list">
			<li data-bind="css: {active:value==$parent.value()}"><a href="#" data-bind="text: text,css: {active:value==$parent.value()},  event:{click: $parent._selectListItem, dblclick:function(data,event){$parent._abAddItem($element,event)}}"></a></li>
		</ul>
	</div>
	<div class= "transferCenter" style="width: 100px;">
		<!-- ko if: displayAddButton -->
 		<input type="button" class="btn btn-primary" data-bind="event:{click:function(data,event){_addItem($element,event)}}, value:cube.msg('ADD_RIGHT')"  ></input>
 		<!-- /ko -->
 		<!-- ko if: displayDeleteButton -->
		<input type="button" class="btn btn-primary" data-bind="click:_removeItem,value:cube.msg('DELETE_LEFT')"></input>
		<!-- /ko -->
		<!-- ko if: displayAddAllButton -->
		<input type="button" class="btn btn-primary" data-bind="click:_addAllItems,value:cube.msg('ADD_ALL')"></input>
		<!-- /ko -->
		<!-- ko if: displayDeleteAllButton -->
		<input type="button" class="btn btn-primary" data-bind="click:_removeAllItems,value:cube.msg('DELETE_All')"></input>
		<!-- /ko -->
	</div>
	<div class= "transfer transferRight"  data-bind="style:{height: transferHeight}">
		<ul class="dropdown-menu" data-bind="style:{width: transferWidth}, foreach: listRight">
			<li data-bind="css: {active:value==$parent.value()}"><a href="#" data-bind="text: text,css: {active:value==$parent.value()}, event:{click: $parent._selectListItem, dblclick: function(data,event){$parent._abRemoveItem($element,event)}}"></a></li>
		</ul>
	</div>
</div></div>
<div id="formeditor"><div class="cube">
    <input data-bind="attr:{type:type}">
</div></div>
<div id="richeditor"><div class="cube richeditor-container" data-bind='attr:{style: style},css:{readonly: readOnly}'>
	<div class="btn-toolbar" data-bind='foreach: cmdLists'>
	  <!-- ko if:type=='list' -->
      <div class="btn-group" data-bind="css:{'open': isShowOptions},
      					event:{mouseover: $parent.showOptions, mouseout: $parent.hiddenOptions}">
        <a class="btn dropdown-toggle" data-toggle="dropdown" data-bind="attr:{title: desc,disabled: $parent.isCodeMode},event:{mouseover: $parent.getEditorSelection}">
        	<!-- ko if: cmdKey=="FontName" -->
	        	<!-- ko if: $parent.fontName() != null -->
	        	<i data-bind="text: $parent.fontName"></i>
	        	<!-- /ko -->
	        	<!-- ko if: $parent.fontName() == null -->
	        	<i data-bind="attr:{'class': icon}"></i>
	        	<!-- /ko -->
        	<!-- /ko -->
        	
        	<!-- ko if: cmdKey=="FontSize" -->
	        	<!-- ko if: $parent.fontSize() != null -->
	        	<i data-bind="text: $parent.fontSize"></i>
	        	<!-- /ko -->
	        	<!-- ko if: $parent.fontSize() == null -->
	        	<i data-bind="attr:{'class': icon}"></i>
	        	<!-- /ko -->
        	<!-- /ko -->
        	
        	<b class="caret"></b></a>
			<ul class="dropdown-menu" style="margin-top: 0px;max-height: 150px;overflow: auto;" data-bind="foreach: options">
				<li>
					<!-- ko if: $parent.cmdKey=="FontName" -->
					<a data-bind="style:{'font-family': name}, text: name, click: $parents[1].execCommand"></a>
					<!-- /ko -->
					
					<!-- ko if: $parent.cmdKey=="FontSize" -->
					<a data-bind="click: $parents[1].execCommand">
						<font data-bind="attr:{size: value}, text: name"></font>
					</a>
					
					<!-- /ko -->
				</li>
			</ul>
		
		</div>
		<!-- /ko -->
		
		<!-- ko if:type=='group' -->
		<div class="btn-group" data-bind='foreach: items'>
			<!-- ko if: type=='single' -->
				<!-- ko if: (cmdKey == "CUBE_CODE" && $parents[1].isShowCodeBtn()) || cmdKey != "CUBE_CODE" -->
		        <a data-bind="click: $parents[1].execCommand,event:{mouseover: $parents[1].getEditorSelection},attr:{title: desc,disabled: cmdKey!='CUBE_CODE'&&$parents[1].isCodeMode}" class="btn">
		        	<i data-bind="attr:{'class': icon}"></i>
		        </a>
		        <!-- /ko -->
	        <!-- /ko -->
	        <!-- ko if: type=='complex' -->
		        <a class="btn dropdown-toggle" 
		        	data-bind='click: $parents[1].showOptions,event:{mouseover: $parents[1].getEditorSelection},attr:{title: desc,disabled: $parents[1].isCodeMode}' data-toggle="dropdown">
		        		<!-- <span data-bind='style:{"color": options.editorType=="color"?value:"#000"}'> -->
		        		<i data-bind="attr:{'class': icon}"></i>
		        		<!--</span> -->
		        </a>
			    <div class="dropdown-menu input-append" data-bind="style:{'display': isShowOptions()?'block':'none'}">
				    <!-- ko if: options.editorType=='text' -->
				    	<input style='width:45%' type="text" data-bind="textInput: value" />
				    <!-- /ko -->
				    <!-- ko if: options.editorType=='file' -->
				    	<input type="file" data-bind='event: { change: function() {value($element.files[0]); }} ' data-role="magic-overlay" data-target="#pictureBtn">
				    <!-- /ko -->
				    <!-- ko if: options.editorType=='color' -->
				    	<input type="color" data-bind='event: { change: function() {value($element.value) }} ' data-role="magic-overlay" data-target="#pictureBtn">
				    <!-- /ko -->
				    <button class="btn" type="button" data-bind='text:cube.msg("CONFIRM"),click: $parents[1].execCommand'>确定</button>
	        	</div>
	        <!-- /ko -->
      	</div>
		<!-- /ko -->
		
      </div>
	
	<!-- ko ifnot:isCodeMode -->
    	<div class="richeditor" data-bind="style:{height: textareaHeight},attr:{contenteditable: readOnly()?false:true}, editableHtml: value, event: {blur: _valid, click: _click}"></div>
    <!-- /ko -->
    <!-- ko if:isCodeMode -->
    	<textarea style='width:100%;' class="richeditor" data-bind="style:{height: textareaHeight},textInput: value, event: {blur: _valid}"></textarea>
    <!-- /ko -->
  </div></div>
<div id="borderlayout"><div class="cube container-fluid borderlayout">
	<div class="row-fluid">
		<!-- ko if: top() && (typeof(top().visible) == "function"?top().visible() != false:top().visible != false) -->
		<div class="item top" data-bind="visible:topDisplay,style:{width:top().width,height:top().height,border:top().border}">
			<!-- ko if: typeof(top().content)!='undefined' -->
				<div  data-bind="html: top().content"></div>
			<!-- /ko -->
		 	<!-- ko if: typeof(top().content)=='undefined' && typeof(top().templateOptions)!='undefined' -->
		 		<!-- ko component: top().templateOptions --> <!-- /ko -->
		 	<!-- /ko -->
		</div>
		<div class="hsplit-splitter" id="hSplitter" data-bind="visible:top().isShowCloseBtn">
			<div id="topSpiltterBtn" data-bind="attr:{title: cube.msg('HIDE')}, click: setTopPanel ,css:topDisplay()?'top':'collapsed',style:{background:btnbgcolor}">
				<span class="caret" ></span>
			</div>
		</div>
		 <!-- /ko -->
	</div>
	<div class="row-fluid middle">
		<!-- ko if: main() && (typeof(main().visible) == "function"?main().visible() != false:main().visible != false) -->
		<div class="item left"  data-bind="visible:leftDisplay,style:{width:left().width,height:left().height,border:left().border}">
			<!-- ko if: typeof(main().content)!='undefined' -->
				<div  data-bind="html: left().content"></div>
			<!-- /ko -->
		 	<!-- ko if: typeof(main().content)=='undefined' && typeof(main().templateOptions)!='undefined' -->
		 		<!-- ko component: main().templateOptions --> <!-- /ko -->
		 	<!-- /ko -->
		</div>
		<div class="vsplit-splitter" id="vSplitter"  data-bind="visible:left().isShowCloseBtn,style:{top:_btnheight}">
			<div id="leftSpiltterBtn" data-bind="attr:{title: cube.msg('HIDE')},click:setLeftPanel,css:leftDisplay()?'top':'collapsed',style:{background:btnbgcolor}">
				<span class="caret" ></span>
			</div>
		</div>
		 <!-- /ko -->
		 <!-- ko if: center() && (typeof(center().visible) == "function"?center().visible() != false:center().visible != false) -->
		<div class="item center"  data-bind="style:{width:center().width,height:center().height,border:center().border}">
			<!-- ko if: typeof(center().content)!='undefined' -->
				<div  data-bind="html: center().content"></div>
			<!-- /ko -->
		 	<!-- ko if: typeof(center().content)=='undefined' && typeof(center().templateOptions)!='undefined' -->
		 		<!-- ko component: center().templateOptions --> <!-- /ko -->
		 	<!-- /ko -->
		</div>
		 <!-- /ko -->
		 <!-- ko if: right() && (typeof(right().visible) == "function"?right().visible() != false:right().visible != false) -->
		<div class="item right"  data-bind="visible:rightDisplay,style:{width:right().width,height:right().height,border:right().border}">
			<!-- ko if: typeof(right().content)!='undefined' -->
				<div  data-bind="html: right().content"></div>
			<!-- /ko -->
		 	<!-- ko if: typeof(right().content)=='undefined' && typeof(right().templateOptions)!='undefined' -->
		 		<!-- ko component: right().templateOptions --> <!-- /ko -->
		 	<!-- /ko -->
		</div>
		<div class="vsplit-splitter" id="vSplitter"  style="float: right" data-bind="visible:right().isShowCloseBtn,style:{top:_btnheight}">
			<div id="rightSpiltterBtn" data-bind="attr:{title: cube.msg('HIDE')},click:setRightPanel,css:rightDisplay()?'collapsed':'top',style:{background:btnbgcolor}">
				<span class="caret" ></span>			
			</div>
		</div>
		 <!-- /ko -->
	</div>
	<div class="row-fluid">
		<!-- ko if: bottom() && (typeof(bottom().visible) == "function"?bottom().visible() != false:bottom().visible != false) -->
		<div class="hsplit-splitter" id="hSplitter" data-bind="visible: bottom().isShowCloseBtn">
			<div id="bottomSpiltterBtn" data-bind="attr:{title: cube.msg('HIDE')},click:setBottomPanel,css:bottomDisplay()?'collapsed':'top',style:{background:btnbgcolor}">
				<span class="caret" ></span>			
			</div>
		</div>
		<div class="item bottom"  data-bind="visible:bottomDisplay,style:{width:bottom().width,height:bottom().height,border:bottom().border}">
			<!-- ko if: typeof(bottom().content)!='undefined' -->
				<div  data-bind="html: bottom().content"></div>
			<!-- /ko -->
		 	<!-- ko if: typeof(bottom().content)=='undefined' && typeof(bottom().templateOptions)!='undefined' -->
		 		<!-- ko component: bottom().templateOptions --> <!-- /ko -->
		 	<!-- /ko -->
		</div>
		 <!-- /ko -->
	</div>
</div></div>
<div id="columntypelayout"><table class="cube col-layout">
	<tr   data-bind="foreach: columns">
		<td class="left col" data-bind="style:{'padding-left':columnborder,width:typeof(columnWidth)!='undefined'?columnWidth:'auto'}">
			<!-- ko if: typeof(content) != "undefined" -->
				<div data-bind="html:content"></div>
			<!-- /ko -->
			<!-- ko if: typeof(content) == "undefined" && typeof(component) != "undefined" -->
				<div data-bind="component:component"></div>
			<!-- /ko -->
	</td>
</tr>
</table></div>
<div id="fluidlayout"><div class="cube container" data-bind="style: {width:width,  height:height}">
	<!-- ko foreach: items -->
	
		<div data-bind="attr:{'class':'span'+(typeof(colspan)!='undefined'?colspan:1)},style:{textAlign: typeof(textAlign)!='undefined'?textAlign:null}">
			<!-- ko if: typeof(content)!='undefined' -->
				<div data-bind="html: content"></div>
			<!-- /ko -->
			<!-- ko if: typeof(content)=='undefined' && typeof(templateOptions)!='undefined' -->
				<!-- ko component: templateOptions --><!-- /ko -->
			<!-- /ko -->
		</div>
		
	<!-- /ko -->
</div></div>
<div id="gridlayout"><div class="cube container-fluid" data-bind="style: {width:width, height:height}">
	<!-- ko foreach: { data: items, as: 'item' } -->
	<div class="row-fluid">
		<!-- ko foreach: item -->
		<div data-bind="attr:{'class':'span'+(typeof(colspan)!='undefined'?colspan:1)},
			style:{width: typeof(width)!='undefined'?width:null,height: typeof(height)!='undefined'?height:null}">
			<!-- ko if: typeof(content)!='undefined' -->
				<div data-bind="html: content"></div>
			<!-- /ko -->
			<!-- ko if: typeof(content)=='undefined' && typeof(templateOptions)!='undefined' -->
				<!-- ko component: templateOptions --><!-- /ko -->
			<!-- /ko -->
		</div>
		<!-- /ko -->
	</div>
	<!-- /ko -->
</div></div>
<div id="include"><!-- ko if: _url -->
	<!-- ko if: isOut -->
		<!-- ko if: type() == "ajax" -->
			<div class="include" data-bind="html: ajaxHtml"></div>
		<!-- /ko --> 
		<!-- ko if: type() == "iframe" -->
			<iframe name="iframe_include" style="width:100%;" frameborder=0 data-bind="style:{height:iframeHeight()},attr:{src:_url}"></iframe>
		<!-- /ko --> 
	<!-- /ko --> 
	<!-- ko ifnot: isOut -->
		<div class="include" data-bind="component: { name: _url, params: _params }"></div>
	<!-- /ko --> 
<!-- /ko --></div>
<div id="submenutmpl"><ul class="dropdown-menu dropdown"  data-bind="style:{display:isList()?null:(hoverItem()==parentItem()?'block':'none')},foreach: children">
	<!-- ko if: typeof(hasChildren)!='undefined' && hasChildren -->
	<li class="dropdown-submenu" data-bind="event:{mouseenter:$parent.openSubItems,mouseleave:$parent.closeSubItems},mouseenterBubble: false">
		<a>
			<!-- ko if: typeof(icon) != "undefined" -->
			<span data-bind='attr:{"class":"icon icon-"+icon}'></span>
			<!-- /ko -->
			<span data-bind="text: text"></span>
		</a>
		<div data-bind='component:{name: "submenutmpl", params: {isList:$parent.isList,isHorizontalChildren:$parent.isHorizontalChildren,hoverItem:$parent.childrenHoverItem,parentItem: $data,children: children, selectMenuItem: $parent.selectMenuItem}}'></div>
	</li>
	<!-- /ko -->
	<!-- ko if: typeof(hasChildren)=='undefined' || !hasChildren -->
		<!-- ko if:text=='-' -->
		<li class="divider"></li>
		<!-- /ko -->
		<!-- ko if:!(text=='-') -->
		<li data-bind="attr:{code:typeof(code)!='undefined'?code:''}">
			<a data-bind="attr:{href: typeof(route)!='undefined'?route:''},click:$parent.selectMenuItem">
				<!-- ko if: typeof(icon) != "undefined" -->
				<span data-bind='attr:{"class":"icon-"+icon}'></span>
				<!-- /ko -->
				<span data-bind="text: text"></span>
			</a>
		</li>
		<!-- /ko -->
	<!-- /ko -->
	
</ul></div>
<div id="pageheader"><div class="cube page-header" data-bind='attr:{"style": style}'>
	<!-- ko if:titleSize()=='h1' -->
		<h1>
			<!-- ko text: title--><!-- /ko -->
			<!-- ko if:isSubtitleWrap--><br /><!--/ko-->
			<small data-bind="text: subTitle"></small>
		</h1>
	<!-- /ko -->
	<!-- ko if:titleSize()=='h2' -->
		<h2>
			<!-- ko text: title--><!-- /ko -->
			<!-- ko if:isSubtitleWrap--><br /><!--/ko-->
			<small data-bind="text: subTitle"></small>
		</h2>
	<!-- /ko -->
	<!-- ko if:titleSize()=='h3' -->
		<h3>
			<!-- ko text: title--><!-- /ko -->
			<!-- ko if:isSubtitleWrap--><br /><!--/ko-->
			<small data-bind="text: subTitle"></small>
		</h3>
	<!-- /ko -->
	<!-- ko if:titleSize()=='h4' -->
		<h4>
			<!-- ko text: title--><!-- /ko -->
			<!-- ko if:isSubtitleWrap--><br /><!--/ko-->
			<small data-bind="text: subTitle"></small>
		</h4>
	<!-- /ko -->
	<!-- ko if:titleSize()=='h5' -->
		<h5>
			<!-- ko text: title--><!-- /ko -->
			<!-- ko if:isSubtitleWrap--><br /><!--/ko-->
			<small data-bind="text: subTitle"></small>
		</h5>
	<!-- /ko -->
</div></div>
