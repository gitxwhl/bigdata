define(["RESTClient"],function(RESTClient){var me={};me.isNull=function(p_str){if(null==p_str||cube.isString(p_str)&&""==p_str.replace(/^\s*/,"").replace(/\s*$/,""))return true;else return false};me.isDigit=function(p_str){var patrn=/^[+|-]?\d+[\.]?\d*$/;var patrn2=/\-*(\d+(\.\d+)*)e([\+\-])(\d+)/;return patrn.test(p_str)||patrn.test(p_str)};me.isInteger=function(p_str){var patrn=/^([+-]?)(\d+)$/;return patrn.test(p_str)};me.isPlusInteger=function(p_str){var patrn=/^([+]?)(\d+)$/;return patrn.test(p_str)};
me.isMinusInteger=function(p_str){var patrn=/^-(\d+)$/;return patrn.test(p_str)};me.isFloat=function(p_str){var patrn=/^([+-]?)\d*\.\d+$/;return patrn.test(p_str)};me.isPlusFloat=function(p_str){var patrn=/^([+]?)\d*\.\d+$/;return patrn.test(p_str)};me.isMinusFloat=function(p_str){var patrn=/^-\d*\.\d+$/;return patrn.test(p_str)};me.isChinese=function(p_str){if(!cube.isString(p_str))return false;var patrn=/^[\u4E00-\u9FA5\uF900-\uFA2D]+$/;return patrn.test(p_str)};me.isLetter=function(p_str){if(!cube.isString(p_str))return false;
var reg=/^[a-zA-Z]+$/;return reg.test(p_str)};me.isAcsii=function(p_str){if(!cube.isString(p_str))return false;var patrn=/^[\x00-\xFF]+$/;return patrn.test(p_str)};me.isMobile=function(p_str){if(!cube.isString(p_str))return false;var patrn=/^1\d{10}$/;return patrn.test(p_str)};me.isPhone=function(p_str){if(!cube.isString(p_str))return false;var patrn=/^(0[\d]{2,3}-)?\d{6,8}(-\d{3,4})?$/;return patrn.test(p_str)};me.isUrl=function(p_str){if(!cube.isString(p_str))return false;var patrn=/^((http(s)?|ftp|telnet|news|rtsp|mms):\/\/)?(((\w(\-*\w)*\.)+[a-zA-Z]{2,4})|localhost|(((1\d\d|2([0-4]\d|5[0-5])|[1-9]\d|\d)\.){3}(1\d\d|2([0-4]\d|5[0-5])|[1-9]\d|\d)))(:\d{1,5})?(\/+.*)*$/;
return patrn.test(p_str)};me.isEmail=function(p_str){if(!cube.isString(p_str))return false;var patrn=/^[\w-]+@[\w-]+(\.[\w-]+)+$/;return patrn.test(p_str)};me.isZipCode=function(p_str){if(!cube.isString(p_str))return false;var patrn=/^\d{6}$/;return patrn.test(p_str)};me.isDate=function(p_str){if(cube.isDate(p_str))try{p_str=Date.format(p_str,"yyyy-MM-dd")}catch(e){return false}if(!cube.isString(p_str))return false;var parseDate=Date.parse(p_str);if(p_str.length==4&&!isNaN(parseDate))return true;
if(!/^\d{4}((\.|\/|\-)?\d{1,2}){1,2}$/.test(p_str))return false;var r=p_str.match(/\d{1,4}/g);if(r==null)return false;if(r[1]&&r[1].length==4){var md=r[1];r[1]=md.substring(0,2);r[2]=md.substring(2,4)}r[2]=r[2]||"01";var d=new Date(r[0],r[1]-1,r[2]);return d.getFullYear()==r[0]&&d.getMonth()+1==r[1]&&d.getDate()==r[2]};me.isDateTime=function(p_str){if(cube.isDate(p_str))try{p_str=Date.format(p_str,"yyyy-MM-dd HH:mm:ss")}catch(e){return false}if(!cube.isString(p_str))return false;var reg=/^(\d{1,4})(-|\/)?(\d{1,2})\2(\d{1,2}) ?(\d{1,2})(:?(\d{1,2})){1,2}$/;
var r=p_str.match(reg);if(r==null)return false;else{r=p_str.match(/\d{1,4}/g);if(r==null)return false;if(r.length<=5){if(r.length<2)return false;if(r.length==5&&r[1].length==4){r[5]=r[4];r[4]=r[3];r[3]=r[2];r[2]=r[1].substring(2,4);r[1]=r[1].substring(0,2)}else if(r.length==4&&r[1].length==4){r[4]=r[3];r[3]=r[2];r[2]=r[1].substring(2,4);r[1]=r[1].substring(0,2)}else if(r.length==4&&r[0].length==4&&r[1].length==2&&r[2].length==2)r[4]="00";else{if(typeof r[3]!="undefined"&&r[2].length==4)r[5]=r[3];
if(typeof r[2]!="undefined"&&r[2].length==4){r[4]=r[2].substring(2,4);r[3]=r[2].substring(0,2)}if(typeof r[1]!="undefined"&&r[1].length==4){r[2]=r[1].substring(2,4);r[1]=r[1].substring(0,2)}}}if(r.length==5){var d=new Date(r[0],r[1]-1,r[2],r[3],r[4]);return d.getFullYear()==r[0]&&d.getMonth()+1==r[1]&&d.getDate()==r[2]&&d.getHours()==r[3]&&d.getMinutes()==r[4]}else if(r.length>5){d=new Date(r[0],r[1]-1,r[2],r[3],r[4],r[5]);return d.getFullYear()==r[0]&&d.getMonth()+1==r[1]&&d.getDate()==r[2]&&d.getHours()==
r[3]&&d.getMinutes()==r[4]&&d.getSeconds()==r[5]}else return false}};me.isTime=function(p_str){if(cube.isDate(p_str))try{p_str=p_str.toTimeString().split(" ")[0]}catch(e){return false}if(!cube.isString(p_str))return false;var reg=/^(20|21|22|23|[0-1]\d)(\:[0-5][0-9]){0,2}$/;return reg.test(p_str)};me.isSqlInjection=function(p_str){if(!cube.isString(p_str))p_str=String(p_str);var regex=/(\sand\s)|(\sor\s)|(\slike\s)|(select\s)|(insert\s)|(delete\s)|(update\s[\s\S].*\sset)|(create\s)|(\stable)|(\sexec)|(declare)|(\struncate)|(\smaster)|(\sbackup)|(\smid)|(\scount)|(\sadd\s)|(\salter\s)|(\sdrop\s)|(\sfrom\s)|(\struncate\s)|(\sunion\s)|(\sjoin\s)|(')/;
var result=[];var successful=!regex.test(p_str);var matches=p_str.match(regex);var hint=p_str;if(matches&&matches[0])hint=matches[0];return{successful:successful,hint:hint}};me.isIP=function(p_str){if(!cube.isString(p_str))return false;var patrn=/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-4])$/;return patrn.test(p_str)};me.isIDCard=function(p_str){if(!cube.isString(p_str))return false;var patrn=/^((11|12|13|14|15|21|22|23|31|32|33|34|35|36|37|41|42|43|44|45|46|50|51|52|53|54|61|62|63|64|65|71|81|82|91)\d{4})((((19|20)(([02468][048])|([13579][26]))0229))|((20[0-9][0-9])|(19[0-9][0-9]))((((0[1-9])|(1[0-2]))((0[1-9])|(1\d)|(2[0-8])))|((((0[1,3-9])|(1[0-2]))(29|30))|(((0[13578])|(1[02]))31))))((\d{3}(x|X))|(\d{4}))$/;
return patrn.test(p_str)};me.isMaxValue=function(p_num,p_maxValue,p_isFloat){if(me.isDigit(p_num)){if(typeof p_isFloat=="undefined")p_isFloat=false;var value=p_isFloat?parseFloat(p_num):parseInt(p_num);var maxValue=p_isFloat?parseFloat(p_maxValue):parseInt(p_maxValue);return value>maxValue?false:true}return false};me.isMinValue=function(p_num,p_minValue,p_isFloat){if(me.isDigit(p_num)){if(typeof p_isFloat=="undefined")p_isFloat=false;var value=p_isFloat?parseFloat(p_num):parseInt(p_num);var minValue=
p_isFloat?parseFloat(p_minValue):parseInt(p_minValue);return value<minValue?false:true}return false};me.isMaxLength=function(p_str,p_maxLength){if(p_str==null)p_str="";var str=p_str;if(!cube.isString(p_str))str=p_str.toString();var maxLength=parseInt(p_maxLength);return str.length>=maxLength?false:true};me.isMinLength=function(p_str,p_minLength){if(p_str==null)p_str="";var str=p_str;if(!cube.isString(p_str))str=p_str.toString();var minLength=parseInt(p_minLength);return str.length<=minLength?false:
true};me.isUnique=function(p_str,p_url){if(p_str==null)p_str="";var str=p_str;if(!cube.isString(p_str))str=p_str.toString();var result=false;var restClient=new RESTClient;restClient.async=false;restClient.get(p_url,{"name":p_str},function(data){var ruleItems=data.resultValue;if(ruleItems==true)result=true;else result=false});return result};return me});