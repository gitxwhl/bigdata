define([],function(){function e(e){var a=this;a.panels=[];a.selectedPanelRoute=null;a.isEnabledDrawer=!1;a.isLazyRender=!1;var i=0,j=0;a.selectedPanel=cube.comp(function(){var c=null;$.each(a.panels(),function(b,d){if(c!=null)return c;c==null&&a.selectedPanelRoute()==d.route&&(c=d,j=b)});return c},a);a._init=function(){a.isEnabledDrawer()&&$.each(a.panels(),function(a,b){if(typeof b.expanded=="undefined")b.expanded=cube.obj(!1);else if(!cube.isObservable(b.expanded))b.expanded=cube.obj(b.expanded)});
a.panels()&&a.panels().length>0&&(a.selectedPanelRoute()!="undefined"&&a.selectedPanelRoute()!=null?a.selectedPanelRoute(a.selectedPanelRoute()):a.selectedPanelRoute(a.panels()[0].route))};a.setSelectedPanel=function(c,b){a.isLazyRender()&&!a.isEnabledDrawer()&&a.renderPanel(this,b.currentTarget?b.currentTarget:b.srcElement);a.selectedPanelRoute(this.route);a.isEnabledDrawer()&&this.expanded(!this.expanded())};a.renderPanel=function(a,b){var d=null,h=$(b).parent().parent().find(".accordion-inner");
typeof a.content!="undefined"?(d={html:a.content},cube.bindComponentByNode(h,d)):typeof a.content=="undefined"&&typeof a.templateOptions!="undefined"&&(d={component:{name:a.templateOptions.name,params:a.templateOptions.params}},cube.bindComponentByNode(h,d))};a.onloading=function(c){c=$(c).children("section");i=a.panels().length;var b=cube.getIEVersion();c.each(function(c,h){var f=$(h),g=f.wrap("<div></div>").parent().html();b>-1&&b<9&&(g=g.replace(/<:/g,"<").replace(/<\/:/g,"</"));var e=f.attr("expanded"),
g={title:f.attr("title"),route:f.attr("route"),expanded:cube.obj(typeof e=="undefined"?!1:e),content:g};a.panels.push(g);f.remove()})};a.onload=function(c,b){for(var d=$(c),e=a.panels(),f=i;f<e.length;f++)cube.applyBindings(d.find(">.accordion>.accordion-group:nth-child("+(f+1)+")>.accordion-body").children(".accordion-inner").children(),b);i==0&&a.panels()&&a.panels().length>0&&cube.isEmpty(a.selectedPanelRoute())&&a.selectedPanelRoute(a.panels()[0].route);a.isLazyRender()&&!a.isEnabledDrawer()&&
a.renderPanel(a.selectedPanel(),d.find(".accordion-inner:eq("+j+")"))};cube.endViewModel(a,e)}e.prototype.dispose=function(){this.selectedPanel.dispose()};return e});