define(["CheckUtil"],function(g){function e(e){var a=this;a.navLogo="";a.navTitle="";a.bgcolor="";a.navWidth=null;a.activeBgColor="";a.fontColor="";a.height="40px";a.items=[];a.operations=[];a.iconAlign="left";a.isShowSearchbox=!1;a.isSearchboxRight=!1;a.isShowDividerVertical=!1;a.isMenuWrap=!1;a.selectedRoute=null;a.isFixTop=!1;a.isInverse=!1;a.isHrefRoute=!0;a.isShowChildren=!1;a._showBtn=!1;a._showBtnTop="20px";a.$scrollDiv=null;a._children=null;a._menuHeight=null;a.$node=null;a.$childrenDialog=
null;a.$navsHeader=null;a.onSelectedChanged=null;a.onSearchBtnClick=null;a.onRendered=null;a.selectedItem=cube.comp(function(){var c=null;$.each(a.items(),function(){this.hasChildren==!0&&$.each(this.children,function(){a.selectedRoute()==this.route&&(c=this)});if(c!=null)return c;c==null&&a.selectedRoute()==this.route&&(c=this)});return c},a);a.hoverItem=cube.obj();a._init=function(){a.selectedRouteSub=cube.subscribe(a.selectedRoute,function(c){if(a.onSelectedChanged!=null&&!cube.isObservable(a.onSelectedChanged)){var b=
a.selectedItem();b==null&&(b=c);a.onSelectedChanged(b)}if(a.isHrefRoute())window.location.hash=c});a.items()&&a.items().length>0&&a.selectedRoute(a.items()[0].route);a._showBtnTop(parseInt(a.height().replace("px","")/2)+"px")};a.setSelectRoute=function(){cube.notEmpty(this.route)&&a.selectedRoute(this.route);cube.isFunction(this.click)&&!cube.isObservable(this.click)&&this.click();a.closeChildrenDialog()};a.openSubItems=function(c,b){var d=a.$childrenDialog[0],e=null,h=a.$scrollDiv.children("ul").position().left,
f=a.$node.children(".cubenavbar")[0].offsetTop,i=a.$navsHeader.position().left,j=c.offsetLeft;g.isDigit(a.height())||(e=parseInt(a.height().replace("px","")));a.hoverItem(this);if(b.hasChildren&&!a.isShowChildren())a.isShowChildren(!0),d.style.left=i+h+j+15+"px",d.style.top=f+e+"px",a._menuHeight(f+e+"px"),a._children(b.children)};a.closeSubItems=function(){a.hoverItem(null);a.isShowChildren(!1)};a.openChildrenDialog=function(){a.isShowChildren(!0)};a.closeChildrenDialog=function(){a.isShowChildren(!1)};
a.prev=function(a){var a=$(a).siblings(".scrollborder").children(".scroll").children("ul"),b=a.position().left;a.stop(!0,!0);b>=0||(b=parseInt(b)+100,b>0&&(b=0),a.animate({left:b}))};a.next=function(a){var b=$(a).siblings(".scrollborder"),a=b.children(".scroll").children("ul"),b=parseInt(b.width())-parseInt(a.width()),d=a.position().left;a.stop(!0,!0);d<=b||(d=parseInt(d)-100,d<=b&&(d=b),a.animate({left:d}))};a.itemsChange=function(){a.$scrollDiv!=null&&!cube.isObservable(a.$scrollDiv)&&setTimeout(function(){var c=
a.$scrollDiv.width();a.$scrollDiv.children("ul").width()>=c?a._showBtn(!0):a._showBtn(!1)},300)};a._onSearchBtnClick=function(c){a.onSearchBtnClick!=null&&!cube.isObservable(a.onSearchBtnClick)&&(c=$(c).siblings(".search-query"),a.onSearchBtnClick(c.val()))};a.onload=function(c){var b=$(c);a.$node=b;a.$childrenDialog=b.children(".cubenavbar").children(".dropdown-menu");a.$navsHeader=b.children(".cubenavbar").children(".navbar-inner").children(".navsheader");a.$scrollDiv=b.children(".cubenavbar").children(".navbar-inner").children(".navsheader").children(".scrollborder").children(".scroll");
if(a.onRendered!=null&&!cube.isObservable(a.onRendered))a.onRendered(c);a.itemsChange()};cube.endViewModel(a,e)}e.prototype.dispose=function(){this.selectedItem.dispose();this.selectedRouteSub.dispose()};return e});