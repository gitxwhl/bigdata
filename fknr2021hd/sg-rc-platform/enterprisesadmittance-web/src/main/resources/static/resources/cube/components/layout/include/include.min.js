define([],function(){function c(c){function g(b){$.ajax({url:b,crossDomain:!h(b),success:function(b){a.ajaxHtml(b)}})}function h(a){if(cube.notEmpty(a)&&a.indexOf("http")!=0)return!0;if((a=a.match(/((http|https):\/\/[^\/]+)\//i))&&a.length>1&&a[1]==window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""))return!0;$.support.cors=!0;return!1}var a=this;a.url=null;a.type="ajax";a.iframeHeight="100%";a._url=null;a.ajaxHtml="";a.isOut=!1;a.params={};a.oldparams=
{};a._params={};a._init=function(){a.oldparams=c.params;a.compurl();a.urlSub=cube.subscribe(a.url,a.compurl)};a.compurl=function(){var b=a.url();cube.notEmpty(b)&&b.indexOf("http")==0&&a.type()!="viewModel"&&a.isOut(!0);if(a.isOut()&&"ajax"==a.type())g(b);else{var c=cube.clone(a.oldparams);if(b!=null&&b.indexOf("?")!=-1){for(var e=b.split("?")[1].split("&"),d=0;d<e.length;d++){var f=e[d].split("=");c[f[0]]=unescape(f[1])}b=b.split("?")[0]}a._params(c)}a._url(b)};cube.endViewModel(a,c)}c.prototype.dispose=
function(){this.urlSub.dispose()};return c});