define(["RESTClient"],function(RestClient){var me={};me.baseUrl=null;me.setBaseUrl=function(p_baseUrl){if(me.baseUrl!=p_baseUrl)me.baseUrl=p_baseUrl};me.bindDom=function(code,dom){var restClient=new RestClient;var result=restClient.getSync(me.baseUrl,{"code":code});if(cube.notEmpty(dom)){if(!(dom instanceof jQuery))dom=$(dom);if(cube.notEmpty(result)&&cube.isArray(result)&&result.length>0)if(dom.is("menu")||dom.is("navbar")||dom.is("toolbar"))for(var i=0;i<result.length;i++){var ele=dom.find("[code='"+
result[i].code+"']");if(result[i].readOnly==true)ele.attr("readonly","readonly");else dom.attr("readonly","");if(result[i].visible==false)ele.hide();else ele.show()}else if(result[0].code==code){if(result[0].readOnly==true)dom.attr("readonly","readonly");else dom.attr("readonly","");if(result[0].visible==false)dom.hide();else ele.show()}}return result};me.getToken=function(url){var restClient=new RestClient;var result=restClient.getSync(cube.cubepath(url),null);if(cube.isString(result))document.cookie=
"token = "+result;return result};me.getUserInfo=function(url,type){var restClient=new RestClient;var result=restClient.getSync(cube.cubepath(url),{"requestType":"getUserId"});if(cube.notEmpty(result))cube.cl_u_id=result.userId;return result};return me});