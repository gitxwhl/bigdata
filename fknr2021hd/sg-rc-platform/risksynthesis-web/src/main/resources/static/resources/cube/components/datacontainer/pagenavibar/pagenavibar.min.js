define(["CheckUtil"],function(i){function f(f){function j(a,b,e){var a=parseInt(a),d=parseInt(b),b=parseInt(e);isNaN(b)||b<=0?b=1:b>a&&(b=a);e=[];if(d>=a){for(d=1;d<=a;d++)e.push({text:d});return e}var h=parseInt(d/2);b-=h;for(var f=b+d,g=0,h=0,d=b;d<f;d++)d<=0?g+=1:d>a?h+=1:e.push({text:d});for(d=0;d<g;d++)e.push({text:d+f});if(h>0){a=[];for(d=h;d>=1;d--)a.push({text:b-d});$.merge(a,e);return a}return e}function g(){var c=parseInt(a.pageIndex()),b=parseInt(a.pageTotalCount());return isNaN(c)||isNaN(b)||
c<=0||c>b?!1:!0}var a=this;a.size="middle";a.p_size=cube.comp(function(){var c;a.size()=="large"?c="pagination-large page-large":a.size()=="middle"?c="page-middle":a.size()=="small"?c="pagination-small page-small":a.size()=="mini"&&(c="pagination-mini page-mini");return c},a);a.showArrow=!0;a.isShowBtnText=!1;a.showTotal=!0;a.showGoto=!0;a.showAllPage=!1;a.pageTotalCount=0;a.count=0;a.pageIndex=1;a.pageVisibleCount=5;a.pageInfoToLeft=!1;a.blurGoto=!1;a.isShowLoadTime=!1;a.loadTimeFadeout=0;a.firstIcon=
"";a.previousIcon="";a.nextIcon="";a.endIcon="";a.loadTime=0;a.pageNumbers=cube.comp(function(){return a.showAllPage()?j(a.pageTotalCount(),a.pageTotalCount(),a.pageIndex()):j(a.pageTotalCount(),a.pageVisibleCount(),a.pageIndex())},a);a.onPageIndexChanged=null;a.onRendered=null;a.oldPageIndex=1;a._init=function(){a.pageIndexSub=cube.subscribe(a.pageIndex,function(c){cube.isEmpty(c)||(i.isPlusInteger(c)?(c<=0&&(a.pageIndex(1),c=1),c>a.pageTotalCount()&&(c=parseInt(a.pageTotalCount()),c==0&&(c=1),a.pageIndex(c)),
a.oldPageIndex()!=c&&a.onPageIndexChanged!=null&&!cube.isObservable(a.onPageIndexChanged)&&(a.oldPageIndex(c),a.onPageIndexChanged(parseInt(c)))):(a.pageIndex(a.oldPageIndex()),a.oldPageIndex()))})};a.onFirstPageClick=function(){g()&&a.pageIndex()!=1&&a.pageIndex(1)};a.onPagePreviousClick=function(){g()&&a.pageIndex()!=1&&a.pageIndex(a.pageIndex()-1)};a.onPageNextClick=function(){g()&&a.pageIndex()!=a.pageTotalCount()&&a.pageIndex(parseInt(a.pageIndex())+1)};a.onEndPageClick=function(){g()&&a.pageIndex()!=
a.pageTotalCount()&&a.pageIndex(a.pageTotalCount())};a.onPageIndexClick=function(){a.pageIndex(this.text)};a._input_keydown=function(a,b){var e=(b.currentTarget?b.currentTarget:b.srcElement).value;if(cube.notEmpty(e)&&!i.isPlusInteger(e))return!1;return!0};a._input_keypress=function(c,b){a.pageIndex();return b.which>=48&&b.which<=57&&b.ctrlKey==!1&&b.shiftKey==!1||b.which==0||b.which==8?!0:b.ctrlKey==!0&&(b.which==99||b.which==118)?!0:!1};a.onload=function(c){var b=a.loadTimeFadeout();a.isShowLoadTime()&&
b>0&&$(c).find("ul.loadtime").fadeOut(b);if(a.onRendered!=null&&!cube.isObservable(a.onRendered))a.onRendered(c)};cube.endViewModel(a,f)}f.prototype.dispose=function(){this.p_size.dispose()};return f});