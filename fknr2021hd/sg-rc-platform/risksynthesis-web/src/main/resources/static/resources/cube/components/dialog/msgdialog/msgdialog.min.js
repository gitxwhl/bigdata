define([],function(){function e(e){function h(b){var c=a.msgType()!="confirm"?150:0;b==!0&&(a.animatShowBck(b),window.setTimeout(function(){a.animatShowDialog(b)},c))}var a=this;a.title="";a.content="";a.templateOptions={};a.isShowDialog=!1;a.showTime=0;a.msgType="info";a.zIndex=1070;a.isShowCancelBtn=!0;a.reverseBtn=!1;a.animatShowBck=!1;a.animatShowDialog=!1;a.isdrag=!1;a.tx=0;a.ty=0;a.eleId=null;a.onConfirmBtnClick=null;var d=a.onRendered=null,i=null,j=null;a._init=function(){a.isdrag=!1;h(a.isShowDialog());
a.isShowDialogSub=cube.subscribe(a.isShowDialog,h);var b=a.showTime();b>0&&a.msgType()!="confirm"&&window.setTimeout(function(){a.disableMsgDlg()},b)};a.confirmDialog=function(){var b={cancel:!1},c=!0;a.onConfirmBtnClick!=null&&!cube.isObservable(a.onConfirmBtnClick)&&(c=a.onConfirmBtnClick(b));!b.cancel&&(cube.isEmpty(c)||c)&&a.disableMsgDlg()};a.headmousedown=function(b,c){j=document.documentElement.clientHeight-a.$e.find(".modal").height();i=document.documentElement.clientWidth-a.$e.find(".modal").width();
a.isdrag=!0;$(document).unbind("mousemove").bind("mousemove",a.headmousemove);a.tx=c.clientX;a.ty=c.clientY;d=c.currentTarget?c.currentTarget:c.srcElement;d=d.parentNode;d.style.top=$(d).position().top+"px";if(cube.isEmpty(d.style.left))d.style.left="0px"};a.headmousemove=function(b){if(a.isdrag){var c=b.clientX-a.tx,f=b.clientY-a.ty,e=d.style.top,g=d.style.left,e=parseInt(e.substr(0,e.indexOf("px"))),g=parseInt(g.substr(0,g.indexOf("px"))),f=e+f,c=g+2*c;if(f<j&&f>0&&c<i)d.style.top=f+"px",d.style.left=
c+"px";a.tx=b.clientX;a.ty=b.clientY}};a.headmouseup=function(){a.isdrag=!1;$(document).unbind("mousemove",a.headmousemove)};document.onmouseup=function(){a.isdrag=!1};a.mouseout=function(b,c){if(a.msgType()!="confirm"){for(var d=c.relatedTarget?c.relatedTarget:c.toElement;d&&d!=b;)d=d.parentNode;d!=b&&a.disableMsgDlg()}};a.disableMsgDlg=function(){if(!a.isdrag){var b=a.msgType()!="confirm"?150:0;window.setTimeout(function(){a.animatShowDialog(!1);a.isShowDialog(!1);window.setTimeout(function(){a.animatShowBck(!1);
a.eleId()!=null&&$("#"+a.eleId()).remove()},350)},b)}};a.onload=function(b){a.$e=$(b);if(a.onRendered!=null&&!cube.isObservable(a.onRendered))a.onRendered(b)};cube.endViewModel(a,e)}e.prototype.dispose=function(){this.isShowDialogSub.dispose()};return e});