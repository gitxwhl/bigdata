<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.property.mapper.WytoolsconsumablesMapper">
    <resultMap id="WytoolsconsumablesMapper" type="com.property.entity.Wytoolsconsumables">
        <id column="id" jdbcType="INTEGER" property="id"/>
        <result column="name" jdbcType="VARCHAR" property="name"/>
        <result column="classification" jdbcType="VARCHAR" property="classification"/>
        <result column="type" jdbcType="VARCHAR" property="type"/>
        <result column="no" jdbcType="VARCHAR" property="no"/>
        <result column="inventory" jdbcType="VARCHAR" property="inventory"/>
        <result column="received" jdbcType="VARCHAR" property="received"/>
        <result column="recipients" jdbcType="VARCHAR" property="recipients"/>
        <result column="collectiontime" jdbcType="VARCHAR" property="collectiontime"/>
        <result column="returntime" jdbcType="VARCHAR" property="returntime"/>
        <result column="usenum" jdbcType="VARCHAR" property="usenum"/>
        <result column="departmentId" jdbcType="VARCHAR" property="departmentId"/>
    </resultMap>


    <!--获取供应商数量-->
    <select id="getToolConsumptionCnt" resultType="java.lang.Integer">
        SELECT
        count(1)
        FROM
        ( SELECT * FROM wy_toolsconsumables ) a
        WHERE
        1=1
        <if test="name != null and name != ''">
            <bind name="Name" value="'%'+ name + '%'"/>
            AND a.name like #{Name}
        </if>
        <if test="type != null and type != ''">
            <bind name="Type" value="'%'+ type + '%'"/>
            AND a.type like #{Type}
        </if>
        <if test="departmentId != null and departmentId != ''">
            AND a.departmentId in #{departmentId}
        </if>
    </select>
    <!--获取供应商列表数据-->
    <select id="getToolConsumptionList" resultMap="WytoolsconsumablesMapper">
        SELECT
        a.id,
        a.name,
        a.classification,
        a.type,
        a.no,
        a.inventory,
        a.received,
        a.recipients,
        a.collectiontime,
        a.returntime,
        a.usenum,
        a.departmentId
        FROM
        ( SELECT * FROM wy_toolsconsumables ) a

        WHERE
        1=1
        <if test="name != null and name != ''">
            <bind name="Name" value="'%'+ name + '%'"/>
            AND a.name like #{Name}
        </if>
        <if test="type != null and type != ''">
            <bind name="Type" value="'%'+ type + '%'"/>
            AND a.type like #{Type}
        </if>
        <if test="departmentId != null and departmentId != ''">
            AND a.departmentId in #{departmentId}
        </if>
        limit #{startIndex},#{pageSize}

    </select>

    <!-- 新增-->
    <insert id="insertMaterialsStaff" parameterType="com.property.entity.Wytoolsconsumables">
    INSERT INTO wy_toolsconsumables (
	name,
    classification,
	type,
	no,
	inventory,
	received,
	recipients,
	collectiontime,
	returntime,
	usenum,
	departmentId
)
VALUES
	(#{name},#{classification},#{type},#{no},#{inventory},#{received},#{recipients},#{collectiontime},#{returntime},#{usenum},#{departmentId})
  </insert>

    <update id="updateMaterialsStaff" parameterType="com.property.entity.Wytoolsconsumables">
        UPDATE wy_toolsconsumables
        SET
        name= #{name},
        classification= #{classification},
        type= #{type},
        no= #{no},
        inventory= #{inventory},
        received= #{received},
        recipients= #{recipients},
        collectiontime= #{collectiontime},
        returntime= #{returntime},
        usenum= #{usenum}
        WHERE
		    id = #{id}
    </update>

    <!-- 导入-->
    <insert id="insert" parameterType="com.property.entity.Wytoolsconsumables">
    INSERT INTO wy_toolsconsumables (
	name,
    classification,
	type,
	no,
	inventory,
	received,
	recipients,
	collectiontime,
	returntime,
	usenum,
	departmentId
)
VALUES
	(#{name},#{classification},#{type},#{no},#{inventory},#{received},#{recipients},#{collectiontime},#{returntime},#{usenum},#{departmentId})
  </insert>
</mapper>