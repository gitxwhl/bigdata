<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.canteen.mapper.UserMapper">
    <resultMap id="UserPersonResult" type="com.canteen.entity.User">
        <id column="DID" property="did" />
        <result column="ACCOUNT" property="account" />
        <result column="PASSWORD" property="password" />
        <result column="PASSWDAPP" property="passwdapp" />
        <result column="uname" property="name" />
        <result column="SEX" property="sex" />
        <result column="ORGANIZATION_ID" property="organizationId" />
        <result column="DOMAIN_ID" property="domainId" />
        <result column="DEPARTMENT_ID" property="departmentId" />
        <result column="MOBILE" property="mobile" />
        <result column="EMAIL" property="email" />
        <result column="USER_TYPE" property="userType" />
        <result column="SALT" property="salt" />
        <result column="password_time" property="passwordTime" />
        <result column="last_time" property="lastTime" />
        <result column="CREATE_USER" property="createUser" />
        <result column="ENABLE" property="enable" />
        <result column="BPM_USER_ID" property="bpmUserId" />
        <result column="NOTE" property="note" />
        <result column="PERMISSION" property="permission" />
        <result column="OFFICE_TEL" property="officeTel" />
        <result column="ROLEID" property="roleid" />
        <result column="ISEXPAND" property="isexpand" />
        <result column="IS_DRAW" property="isDraw" />
        <result column="POSITION" property="position" />
        <result column="BIRTHDAY" property="birthday" />
        <result column="IDENTITY" property="identity" />
        <result column="IMG_URL" property="imgUrl" />
        <result column="CREATE_TIME" property="createTime" />
        <association property="department" column="ID" javaType="com.canteen.entity.Department">
            <id column="ID" property="id"/>
            <result column="dname" property="dname"/>
        </association>
    </resultMap>

    <select id="getUserPerson" resultMap="UserPersonResult">
        SELECT u.DID,u.`NAME` uname ,d.`NAME`dname , u.MOBILE, FROM user u
        LEFT JOIN
        department d
        ON u.DEPARTMENT_ID = d.ID
        <where>
            <if test="account != null and account != ''">
                u.ACCOUNT=#{account}
            </if>
        </where>
    </select>

</mapper>
