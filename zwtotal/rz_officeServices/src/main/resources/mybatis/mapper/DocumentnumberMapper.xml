<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.officeServices.mapper.DocumentnumberMapper">
    <resultMap id="orderNo" type="java.util.LinkedHashMap">
        <result property="NO" column="NO"/>
        <result property="CD" column="CD"/>
    </resultMap>
    <select id="getOrderNo" resultMap="orderNo">
        SELECT
            DISTINCT NO,
            createdate AS CD
        FROM
            documentnumber
        WHERE
            NO = ( SELECT MAX( D.NO ) FROM documentnumber D WHERE D.notype = #{type} )
    </select>

    <update id="updateOrderNo">
        UPDATE documentnumber SET no = #{no},createdate = #{cd} WHERE notype = #{type}
    </update>

    <insert id="insertOrderNo">
        INSERT INTO documentnumber(no,createdate,notype) VALUES(#{no},#{cd},#{type})
    </insert>
</mapper>